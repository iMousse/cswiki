import{_ as c}from"./chunks/image-202309240014.japkR3SR.js";import{_ as o,a as A}from"./chunks/image-16955347808315.4MJK92Nr.js";import{_ as C}from"./chunks/image-16955347808316.FQPKeV_A.js";import{_ as u}from"./chunks/image-16953998571144.rXBgCuLs.js";import{_ as D}from"./chunks/image-20230505092340431.oQwn9FOT.js";import{_ as B,E,c as b,J as n,w as a,m as s,b as p,a4 as e,a as i,V as k,o as l,e as v}from"./chunks/framework.syB9hai_.js";const m="/cswiki/assets/image-16953998571149.FohIB9VB.png",q="/cswiki/assets/image-169539985711410.6IkYBwm2.png",T="/cswiki/assets/image-169539985711411.k6m7rxc6.png",f="/cswiki/assets/image-169539985711412.KHZZdVe8.png",j="/cswiki/assets/image-169539985711413.-5uhK_PN.png",S="/cswiki/assets/image-169539985711416.AWH9fwvo.png",w="/cswiki/assets/image-169539985711415.Tt1Q-ZvW.png",_="/cswiki/assets/image-169539985711414.g-dB7ijT.png",L="/cswiki/assets/image-202309240022.NOz3imet.png",N="/cswiki/assets/image-202309240021.qHe_svNF.png",I="/cswiki/assets/image-202309240023.rDl0pO73.png",P="/cswiki/assets/image-20230503203629212.6vtScGxX.png",x="/cswiki/assets/WechatIMG384.UeK1aTD6.jpeg",ki=JSON.parse('{"title":"共享模型之管程","description":"","frontmatter":{},"headers":[],"relativePath":"src/base/juc/juc-share-monitor.md","filePath":"src/base/juc/juc-share-monitor.md","lastUpdated":1730648753000}'),R={name:"src/base/juc/juc-share-monitor.md"},O=s("h1",{id:"共享模型之管程",tabindex:"-1"},[i("共享模型之管程 "),s("a",{class:"header-anchor",href:"#共享模型之管程","aria-label":'Permalink to "共享模型之管程"'},"​")],-1),z=s("p",null,[s("a",{href:"./"},"返回首页")],-1),U={class:"table-of-contents"},M=s("a",{href:"#共享模型之管程"},"共享模型之管程",-1),W=s("a",{href:"#synchoronized"},"synchoronized",-1),G=s("li",null,[s("a",{href:"#共享带来的问题"},"共享带来的问题")],-1),V={href:"#应用之互斥"},H=s("ul",null,[s("li",null,[s("a",{href:"#synchronized解决"},"synchronized解决")]),s("li",null,[s("a",{href:"#面向对象改进"},"面向对象改进")]),s("li",null,[s("a",{href:"#synchronzied简写"},"synchronzied简写")]),s("li",null,[s("a",{href:"#线程问题考察"},"线程问题考察")])],-1),J=k("",1),K={href:"#原理之-synchronized"},Q=s("a",{href:"#wait-notify"},"wait & notify",-1),$={href:"#原理之-wait-notify"},X=s("li",null,[s("a",{href:"#wait-notify-的正确姿势"},"wait/notify 的正确姿势")],-1),Z={href:"#模式之保护性暂停"},Y=s("li",null,[s("a",{href:"#带超时版-guardedobject"},"带超时版 GuardedObject")],-1),ss={href:"#原理之-join"},is=s("li",null,[s("a",{href:"#多任务版guardedobject"},"多任务版GuardedObject")],-1),as={href:"#模式之生产者消费者"},ns=s("a",{href:"#park-unpark"},"Park & Unpark",-1),hs=s("li",null,[s("a",{href:"#基本使用"},"基本使用")],-1),ks={href:"#原理之park和unpark"},ls=s("ul",null,[s("li",null,[s("a",{href:"#调用park场景"},"调用Park场景")]),s("li",null,[s("a",{href:"#调用unpark场景"},"调用Unpark场景")]),s("li",null,[s("a",{href:"#先调用unpark在调用park场景"},"先调用Unpark在调用Park场景")])],-1),ps=s("li",null,[s("a",{href:"#线程状态转换"},"线程状态转换"),s("ul",null,[s("li",null,[s("a",{href:"#状态之间如何转换"},"状态之间如何转换")]),s("li",null,[s("a",{href:"#代码之间如何转换"},"代码之间如何转换")])])],-1),ts=s("a",{href:"#reentrantlock"},"ReentrantLock",-1),es=k("",3),Es={href:"#同步模式之顺序控制"},rs=s("ul",null,[s("li",null,[s("a",{href:"#固定顺序"},"固定顺序")]),s("li",null,[s("a",{href:"#交替输出"},"交替输出")])],-1),ds=k("",13),gs=s("br",null,null,-1),ys=s("p",null,"但多线程下这 8 行代码可能交错运行：",-1),Fs=s("p",null,[s("strong",null,"出现负数的情况")],-1),cs=s("p",null,[s("strong",null,"出现正数的情况")],-1),os=k("",8),As={id:"应用之互斥",tabindex:"-1"},Cs=s("a",{class:"header-anchor",href:"#应用之互斥","aria-label":'Permalink to "<font color="green">*应用之互斥</font>"'},"​",-1),us=k("",14),Ds=k("",103),Bs=k("",71),bs={id:"原理之-synchronized",tabindex:"-1"},vs=s("a",{class:"header-anchor",href:"#原理之-synchronized","aria-label":`Permalink to "<font color='blue'>* 原理之 synchronized</font>"`},"​",-1),ms=k("",10),qs={id:"原理之-wait-notify",tabindex:"-1"},Ts=s("a",{class:"header-anchor",href:"#原理之-wait-notify","aria-label":`Permalink to "<font color='blue'>* 原理之 wait / notify</font>"`},"​",-1),fs=k("",60),js={id:"模式之保护性暂停",tabindex:"-1"},Ss=s("a",{class:"header-anchor",href:"#模式之保护性暂停","aria-label":`Permalink to "<font color='orange'>* 模式之保护性暂停</font>"`},"​",-1),ws=k("",18),_s={id:"原理之-join",tabindex:"-1"},Ls=s("a",{class:"header-anchor",href:"#原理之-join","aria-label":`Permalink to "<font color='blue'>* 原理之 join</font>"`},"​",-1),Ns=k("",22),Is={id:"模式之生产者消费者",tabindex:"-1"},Ps=s("a",{class:"header-anchor",href:"#模式之生产者消费者","aria-label":`Permalink to "<font color='orange'>* 模式之生产者消费者</font>"`},"​",-1),xs=k("",23),Rs={id:"原理之park和unpark",tabindex:"-1"},Os=s("a",{class:"header-anchor",href:"#原理之park和unpark","aria-label":`Permalink to "<font color='blue' id='park'>*原理之park和unpark</font>"`},"​",-1),zs=k("",122),Us=s("br",null,null,-1),Ms=s("p",null,"顺序加锁的解决方案",-1),Ws=k("",91),Gs={id:"同步模式之顺序控制",tabindex:"-1"},Vs=s("a",{class:"header-anchor",href:"#同步模式之顺序控制","aria-label":`Permalink to "<font color='orange'>* 同步模式之顺序控制</font>"`},"​",-1),Hs=k("",10);function Js(r,Ks,Qs,$s,Xs,Zs){const y=E("ArticleMetadata"),F=E("ClientOnly"),h=E("font"),t=E("Mermaid");return l(),b("div",null,[O,n(F,null,{default:a(()=>{var d,g;return[(((d=r.$frontmatter)==null?void 0:d.aside)??!0)&&(((g=r.$frontmatter)==null?void 0:g.showArticleMetadata)??!0)?(l(),p(y,{key:0,article:r.$frontmatter},null,8,["article"])):v("",!0)]}),_:1}),z,s("nav",U,[s("ul",null,[s("li",null,[M,s("ul",null,[s("li",null,[W,s("ul",null,[G,s("li",null,[s("a",V,[n(h,{color:"green"},{default:a(()=>[i("*应用之互斥")]),_:1})]),H]),J,s("li",null,[s("a",K,[n(h,{color:"blue"},{default:a(()=>[i("* 原理之 synchronized")]),_:1})])])])]),s("li",null,[Q,s("ul",null,[s("li",null,[s("a",$,[n(h,{color:"blue"},{default:a(()=>[i("* 原理之 wait / notify")]),_:1})])]),X,s("li",null,[s("a",Z,[n(h,{color:"orange"},{default:a(()=>[i("* 模式之保护性暂停")]),_:1})]),s("ul",null,[Y,s("li",null,[s("a",ss,[n(h,{color:"blue"},{default:a(()=>[i("* 原理之 join")]),_:1})])]),is])]),s("li",null,[s("a",as,[n(h,{color:"orange"},{default:a(()=>[i("* 模式之生产者消费者")]),_:1})])])])]),s("li",null,[ns,s("ul",null,[hs,s("li",null,[s("a",ks,[n(h,{color:"blue",id:"park"},{default:a(()=>[i("*原理之park和unpark")]),_:1})]),ls])])]),ps,s("li",null,[ts,s("ul",null,[es,s("li",null,[s("a",Es,[n(h,{color:"orange"},{default:a(()=>[i("* 同步模式之顺序控制")]),_:1})]),rs])])])])])])]),ds,(l(),p(e,null,{default:a(()=>[n(t,{id:"mermaid-40",class:"mermaid",graph:"sequenceDiagram%0A%09participant%20t%20as%20%E7%BA%BF%E7%A8%8B1%0A%09participant%20s%20as%20static%20i%0A%09s%20-%3E%3E%20t%3A%20getstatic%20i%20%E8%AF%BB%E5%8F%96%200%0A%09t%20-%3E%3E%20t%3A%20iconst_1%20%E5%87%86%E5%A4%87%E5%B8%B8%E6%95%B0%201%0A%09t%20-%3E%3E%20t%3A%20iadd%20%E5%8A%A0%E6%B3%95%EF%BC%8C%E7%BA%BF%E7%A8%8B%E5%86%85%20i%20%3D%201%0A%09t%20-%3E%3E%20s%3A%20putstatic%20i%20%E5%86%99%E5%85%A5%201%0A%09s%20-%3E%3E%20t%3A%20getstatic%20i%20%E8%AF%BB%E5%8F%96%201%0A%09t%20-%3E%3E%20t%3A%20iconst_1%20%E5%87%86%E5%A4%87%E5%B8%B8%E6%95%B0%201%0A%09t%20-%3E%3E%20t%3A%20isub%20%E5%87%8F%E6%B3%95%EF%BC%8C%E7%BA%BF%E7%A8%8B%E5%86%85%20i%20%3D%201%0A%20%20t%20-%3E%3E%20s%3A%20putstatic%20i%20%E5%86%99%E5%85%A5%200%0A"})]),fallback:a(()=>[i(" Loading... ")]),_:1})),gs,ys,Fs,(l(),p(e,null,{default:a(()=>[n(t,{id:"mermaid-48",class:"mermaid",graph:"sequenceDiagram%0A%09participant%20t1%20as%20%E7%BA%BF%E7%A8%8B1%0A%09participant%20t2%20as%20%E7%BA%BF%E7%A8%8B2%0A%09participant%20s%20as%20static%20i%0A%09s%20%20-%3E%3E%20t2%3A%20%20getstatic%20i%20%E8%AF%BB%E5%8F%96%200%0A%09t2%20-%3E%3E%20t2%3A%20%20iconst_1%20%E5%87%86%E5%A4%87%E5%B8%B8%E6%95%B0%201%0A%09t2%20-%3E%3E%20t2%3A%20%20isub%20%E5%87%8F%E6%B3%95%EF%BC%8C%E7%BA%BF%E7%A8%8B%E5%86%85%20i%20%3D%20-1%0A%09t2%20--%3E%3E%20t1%3A%20%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%0A%09s%20%20-%3E%3E%20t1%3A%20%20getstatic%20i%20%E8%AF%BB%E5%8F%960%0A%09t1%20-%3E%3E%20t1%3A%20%20iconst_1%20%E5%87%86%E5%A4%87%E5%B8%B8%E6%95%B0%201%0A%09t1%20-%3E%3E%20t1%3A%20%20iadd%20%E5%8A%A0%E6%B3%95%EF%BC%8C%E7%BA%BF%E7%A8%8B%E5%86%85%20i%20%3D%201%0A%09t1%20-%3E%3E%20s%3A%20%20%20putstatic%20i%20%E5%86%99%E5%85%A5%201%0A%09t1%20--%3E%3E%20t2%3A%20%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%0A%09t2%20-%3E%3E%20s%3A%20%20%20putstatic%20i%20%E5%86%99%E5%85%A5%20-1%0A"})]),fallback:a(()=>[i(" Loading... ")]),_:1})),cs,(l(),p(e,null,{default:a(()=>[n(t,{id:"mermaid-52",class:"mermaid",graph:"sequenceDiagram%0A%09participant%20t1%20as%20%E7%BA%BF%E7%A8%8B1%0A%09participant%20t2%20as%20%E7%BA%BF%E7%A8%8B2%0A%09participant%20s%20as%20static%20i%0A%09s%20%20-%3E%3E%20t1%3A%20%20getstatic%20i%20%E8%AF%BB%E5%8F%96%200%0A%09t1%20-%3E%3E%20t1%3A%20%20iconst_1%20%E5%87%86%E5%A4%87%E5%B8%B8%E6%95%B0%201%0A%09t1%20-%3E%3E%20t1%3A%20%20isub%20%E5%87%8F%E6%B3%95%EF%BC%8C%E7%BA%BF%E7%A8%8B%E5%86%85%20i%20%3D%201%0A%09t1%20--%3E%3E%20t2%3A%20%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%0A%09s%20%20-%3E%3E%20t2%3A%20%20getstatic%20i%20%E8%AF%BB%E5%8F%96%200%0A%09t2%20-%3E%3E%20t2%3A%20%20iconst_1%20%E5%87%86%E5%A4%87%E5%B8%B8%E6%95%B0%201%0A%09t2%20-%3E%3E%20t2%3A%20%20iadd%20%E5%8A%A0%E6%B3%95%EF%BC%8C%E7%BA%BF%E7%A8%8B%E5%86%85%20i%20%3D%20-1%0A%09t2%20-%3E%3E%20s%3A%20%20%20putstatic%20i%20%E5%86%99%E5%85%A5%20-1%0A%09t2%20--%3E%3E%20t1%3A%20%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%0A%09t1%20-%3E%3E%20s%3A%20%20%20putstatic%20i%20%E5%86%99%E5%85%A5%201%0A"})]),fallback:a(()=>[i(" Loading... ")]),_:1})),os,s("h3",As,[n(h,{color:"green"},{default:a(()=>[i("*应用之互斥")]),_:1}),i(),Cs]),us,(l(),p(e,null,{default:a(()=>[n(t,{id:"mermaid-183",class:"mermaid",graph:"sequenceDiagram%0A%09participant%20t1%20as%20%E7%BA%BF%E7%A8%8B1%0A%09participant%20t2%20as%20%E7%BA%BF%E7%A8%8B2%0A%09participant%20s%20as%20static%20i%0A%09participant%20l%20as%20%E9%94%81%E5%AF%B9%E8%B1%A1%0A%09t2%20-%3E%3E%20l%3A%20%E5%B0%9D%E8%AF%95%E8%8E%B7%E5%8F%96%E9%94%81%0A%09Note%20over%20t2%2Cl%3A%E6%8B%A5%E6%9C%89%E9%94%81%0A%09s%20%20-%3E%3E%20t2%3A%20getstatic%20i%20%E8%AF%BB%E5%8F%96%200%0A%09t2%20-%3E%3E%20t2%3A%20iconst_1%20%E5%87%86%E5%A4%87%E5%B8%B8%E6%95%B0%201%0A%09t2%20-%3E%3E%20t2%3A%20isub%20%E5%87%8F%E6%B3%95%EF%BC%8C%E7%BA%BF%E7%A8%8B%E5%86%85%20i%20%3D%20-1%0A%09t2%20--%3E%3E%20t1%3A%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%0A%09t1%20-x%20l%3A%E5%B0%9D%E8%AF%95%E8%8E%B7%E5%8F%96%E9%94%81%2C%E8%A2%AB%E9%98%BB%E5%A1%9E(BLOCKD)%0A%09t1%20--%3E%3E%20t2%3A%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%0A%09t2%20-%3E%3E%20s%3Aputstatic%20i%20%E5%86%99%E5%85%A5%20-1%0A%09Note%20over%20t2%2Cl%3A%E6%8B%A5%E6%9C%89%E9%94%81%0A%09t2%20-%3E%3E%20l%3A%E9%87%8A%E6%94%BE%E9%94%81%EF%BC%8C%E5%B9%B6%E5%94%A4%E9%86%92%E9%98%BB%E5%A1%9E%E7%9A%84%E7%BA%BF%E7%A8%8B%0A%09Note%20over%20t1%2Cl%3A%E6%8B%A5%E6%9C%89%E9%94%81%0A%09s%20-%3E%3E%20t1%3Agetstatic%20i%20%E8%AF%BB%E5%8F%96%20-1%0A%09t1%20-%3E%3E%20t1%3A%20iconst_1%20%E5%87%86%E5%A4%87%E5%B8%B8%E6%95%B0%201%0A%09t1%20-%3E%3E%20t1%3A%20iadd%20%E5%8A%A0%E6%B3%95%EF%BC%8C%E7%BA%BF%E7%A8%8B%E5%86%85%20i%20%3D%200%0A%09t1%20-%3E%3E%20s%3A%20putstatic%20i%20%E5%86%99%E5%85%A5%200%0A%09Note%20over%20t1%2Cl%3A%E6%8B%A5%E6%9C%89%E9%94%81%0A%09t1%20-%3E%3E%20l%3A%E9%87%8A%E6%94%BE%E9%94%81%EF%BC%8C%E5%B9%B6%E5%94%A4%E9%86%92%E9%98%BB%E5%A1%9E%E7%9A%84%E7%BA%BF%E7%A8%8B%0A%0A"})]),fallback:a(()=>[i(" Loading... ")]),_:1})),Ds,(l(),p(e,null,{default:a(()=>[n(t,{id:"mermaid-579",class:"mermaid",graph:"sequenceDiagram%0A%09participant%20t1%20as%20%E7%BA%BF%E7%A8%8B1%0A%09participant%20t2%20as%20%E7%BA%BF%E7%A8%8B2%0A%09participant%20t3%20as%20table%0A%20%0A%20%20t1%20-%3E%3E%20t3%3Aget(%22key%22)%20%3D%3D%20null%0A%20%20t2%20-%3E%3E%20t3%3Aget(%22key%22)%20%3D%3D%20null%0A%20%20t2%20-%3E%3E%20t3%3Aput(%22key%22%2Cv2)%0A%20%20t1%20-%3E%3E%20t3%3Aput(%22key%22%2Cv1)%0A"})]),fallback:a(()=>[i(" Loading... ")]),_:1})),Bs,s("h3",bs,[n(h,{color:"blue"},{default:a(()=>[i("* 原理之 synchronized")]),_:1}),i(),vs]),ms,s("h3",qs,[n(h,{color:"blue"},{default:a(()=>[i("* 原理之 wait / notify")]),_:1}),i(),Ts]),fs,s("h3",js,[n(h,{color:"orange"},{default:a(()=>[i("* 模式之保护性暂停")]),_:1}),i(),Ss]),ws,s("h4",_s,[n(h,{color:"blue"},{default:a(()=>[i("* 原理之 join")]),_:1}),i(),Ls]),Ns,s("h3",Is,[n(h,{color:"orange"},{default:a(()=>[i("* 模式之生产者消费者")]),_:1}),i(),Ps]),xs,s("h3",Rs,[n(h,{color:"blue",id:"park"},{default:a(()=>[i("*原理之park和unpark")]),_:1}),i(),Os]),zs,(l(),p(e,null,{default:a(()=>[n(t,{id:"mermaid-1966",class:"mermaid",graph:"sequenceDiagram%0A%09participant%20t1%20as%20%E7%BA%BF%E7%A8%8B1%0A%09participant%20t2%20as%20%E7%BA%BF%E7%A8%8B2%0A%09participant%20o1%20as%20%E5%AF%B9%E8%B1%A1A%0A%09participant%20o2%20as%20%E5%AF%B9%E8%B1%A1B%0A%20%20t1%20--%3E%3E%20o1%3A%20%E5%B0%9D%E8%AF%95%E8%8E%B7%E5%8F%96%E9%94%81%0A%20%20Note%20over%20t1%2Co1%3A%E6%8B%A5%E6%9C%89%E9%94%81%0A%20%20t2%20--%3E%3E%20o2%3A%20%E5%B0%9D%E8%AF%95%E8%8E%B7%E5%8F%96%E9%94%81%0A%20%20Note%20over%20t2%2Co2%3A%E6%8B%A5%E6%9C%89%E9%94%81%0A%20%20t1%20--x%20o2%3A%E5%B0%9D%E8%AF%95%E8%8E%B7%E5%8F%96%E9%94%81%0A%20%20t2%20--x%20o1%3A%E5%B0%9D%E8%AF%95%E8%8E%B7%E5%8F%96%E9%94%81%0A"})]),fallback:a(()=>[i(" Loading... ")]),_:1})),Us,Ms,(l(),p(e,null,{default:a(()=>[n(t,{id:"mermaid-1971",class:"mermaid",graph:"sequenceDiagram%0A%09participant%20t1%20as%20%E7%BA%BF%E7%A8%8B1%0A%09participant%20t2%20as%20%E7%BA%BF%E7%A8%8B2%0A%09participant%20o1%20as%20%E5%AF%B9%E8%B1%A1A%0A%09participant%20o2%20as%20%E5%AF%B9%E8%B1%A1B%0A%20%20t1%20--%3E%3E%20o1%3A%20%E5%B0%9D%E8%AF%95%E8%8E%B7%E5%8F%96%E9%94%81%0A%20%20Note%20over%20t1%2Co1%3A%E6%8B%A5%E6%9C%89%E9%94%81%0A%20%20t2%20--x%20o1%3A%20%E5%B0%9D%E8%AF%95%E8%8E%B7%E5%8F%96%E9%94%81%0A%20%20t2%20--%3E%3E%20o1%3A%20%E9%98%BB%E5%A1%9E%0A%20%20t1%20--%3E%3E%20o2%3A%20%E5%B0%9D%E8%AF%95%E8%8E%B7%E5%8F%96%E9%94%81%0A%20%20Note%20over%20t1%2Co2%3A%E6%8B%A5%E6%9C%89%E9%94%81%0A"})]),fallback:a(()=>[i(" Loading... ")]),_:1})),Ws,s("h3",Gs,[n(h,{color:"orange"},{default:a(()=>[i("* 同步模式之顺序控制")]),_:1}),i(),Vs]),Hs])}const li=B(R,[["render",Js]]);export{ki as __pageData,li as default};
