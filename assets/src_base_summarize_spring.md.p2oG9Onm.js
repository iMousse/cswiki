import{_ as e,E as n,c as k,J as r,w as E,m as p,a as g,V as o,o as l,b as d,e as c}from"./chunks/framework.syB9hai_.js";const v=JSON.parse('{"title":"æ¡†æ¶ç¯‡æ€»ç»“","description":"","frontmatter":{},"headers":[],"relativePath":"src/base/summarize/spring.md","filePath":"src/base/summarize/spring.md","lastUpdated":1730648753000}'),y={name:"src/base/summarize/spring.md"},u=p("h1",{id:"æ¡†æ¶ç¯‡æ€»ç»“",tabindex:"-1"},[g("æ¡†æ¶ç¯‡æ€»ç»“ "),p("a",{class:"header-anchor",href:"#æ¡†æ¶ç¯‡æ€»ç»“","aria-label":'Permalink to "æ¡†æ¶ç¯‡æ€»ç»“"'},"â€‹")],-1),F=o(`<p><a href="./">è¿”å›é¦–é¡µ</a></p><p><a href="./../struct/spring/">Springå…¥é—¨åˆ°ç²¾é€š</a></p><br><p><strong>Spring</strong></p><ul><li>Spring æ¡†æ¶ä¸­çš„å•ä¾‹ bean æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</li><li>ä»€ä¹ˆæ˜¯ AOP,ä½ ä»¬é¡¹ç›®ä¸­æœ‰æ²¡æœ‰ä½¿ç”¨åˆ° AOP ï¼Ÿ</li><li>Spring ä¸­çš„äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„</li><li>Spring äº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯æœ‰å“ªäº›</li><li>Spring çš„ bean çš„ç”Ÿå‘½å‘¨æœŸ</li><li>Spring ä¸­çš„å¾ªç¯å¼•ç”¨</li><li>SpringMVC çš„æ‰§è¡Œæµç¨‹çŸ¥é“å˜›</li><li>Springboot è‡ªåŠ¨é…ç½®åŸç†</li><li>Spring çš„å¸¸è§æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</li><li>SpringMVC å¸¸è§çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</li><li>Springboot å¸¸è§æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</li></ul><br><p><strong>Mybatis</strong></p><ul><li>MyBatis æ‰§è¡Œæµç¨‹ï¼Ÿ</li><li>Mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿ</li><li>å»¶è¿ŸåŠ è½½çš„åº•å±‚åŸç†çŸ¥é“å—ï¼Ÿ</li><li>Mybatis çš„äºŒçº§ç¼“å­˜ä»€ä¹ˆæ—¶å€™ä¼šæ¸…ç†ç¼“å­˜ä¸­çš„æ•°æ®</li></ul><h2 id="spring" tabindex="-1">Spring <a class="header-anchor" href="#spring" aria-label="Permalink to &quot;Spring&quot;">â€‹</a></h2><h3 id="bean-çº¿ç¨‹å®‰å…¨" tabindex="-1">Bean çº¿ç¨‹å®‰å…¨ <a class="header-anchor" href="#bean-çº¿ç¨‹å®‰å…¨" aria-label="Permalink to &quot;Bean çº¿ç¨‹å®‰å…¨&quot;">â€‹</a></h3><blockquote><p>é¢è¯•å®˜ï¼šSpringæ¡†æ¶ä¸­çš„å•ä¾‹ bean æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</p></blockquote><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Service</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;singleton&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserServiceImpl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>Singleton : Beanåœ¨æ¯ä¸ª Spring IOC å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</li><li>Prototypeï¼šä¸€ä¸ª bean çš„å®šä¹‰å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ã€‚</li></ul><br><p>Spring bean å¹¶æ²¡æœ‰å¯å˜çš„çŠ¶æ€ (æ¯”å¦‚Serviceç±»å’ŒDAOç±») ï¼Œæ‰€ä»¥åœ¨æŸç§ç¨‹åº¦ä¸Šè¯´ Spring çš„å•ä¾‹ beanæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>ä½†å¦‚æœå­˜åœ¨æˆå‘˜æ–¹æ³•åˆ™<strong>ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong>ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Controller</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	  // ! å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜</span></span>
<span class="line highlighted"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserService userService;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GetMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/getById/{id}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> User </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PathVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) Integer </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(count);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><br><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡æ€è€ƒï¼šSpring æ¡†æ¶ä¸­çš„å•ä¾‹ Bean æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</p><p>ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒSpringä¸­æœ‰ä¸ª @Scope æ³¨è§£ï¼Œé»˜è®¤çš„å€¼æ˜¯ <code>Singleton</code>ï¼Œå•ä¾‹çš„ã€‚å½“ Spring çš„ Bean å¯¹è±¡æ˜¯æ— çŠ¶æ€çš„å¯¹è±¡ï¼Œåˆ™æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœåœ¨ Bean ä¸­å®šä¹‰äº†å¯ä¿®æ”¹çš„æˆå‘˜å˜é‡ï¼Œåˆ™éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚å¯ä»¥ä½¿ç”¨å¤šä¾‹æˆ–åŠ é”æ¥è§£å†³ã€‚</p></div><br><h3 id="bean-ç”Ÿå‘½å‘¨æœŸ" tabindex="-1">Bean ç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#bean-ç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to &quot;Bean ç”Ÿå‘½å‘¨æœŸ&quot;">â€‹</a></h3><blockquote><p>é¢è¯•å®˜ï¼šSpringBean çš„ç”Ÿå‘½å‘¨æœŸ</p></blockquote><p>å›ç­”ä¸¤æ–¹é¢å†…å®¹ï¼š</p><ul><li>Spring å®¹å™¨æ˜¯å¦‚ä½•ç®¡ç†å’Œåˆ›å»º Bean å®ä¾‹</li><li>æ–¹ä¾¿è°ƒè¯•å’Œè§£å†³é—®é¢˜</li></ul><br><p><strong>BeanDefinition</strong></p><p>Springå®¹å™¨åœ¨è¿›è¡Œå®ä¾‹åŒ–æ—¶ï¼Œä¼šå°†XMLé…ç½®çš„ <code>&lt;bean&gt;</code> çš„ä¿¡æ¯å°è£…æˆ <code>BeanDefinition</code> å¯¹è±¡ï¼ŒSpringæ ¹æ® <code>BeanDefinition</code>æ¥åˆ›å»ºBeanå¯¹è±¡ï¼Œé‡Œé¢æœ‰å¾ˆå¤šçš„å±æ€§æ¥æè¿°Bean</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userDao&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lazy-init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userService&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.itheima.service.UserServiceImpl&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;singleton&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userDao&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userDao&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><ul><li><code>beanClassName</code>ï¼šbean çš„ç±»å</li><li><code>initMethodName</code>ï¼šåˆå§‹åŒ–æ–¹æ³•åç§°</li><li><code>properryValues</code>ï¼šbean çš„å±æ€§å€¼</li><li><code>scope</code>ï¼šä½œç”¨åŸŸ</li><li><code>lazyInit</code>ï¼šå»¶è¿Ÿåˆå§‹åŒ–</li></ul><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231223141045130.png" alt="image-20231223141045130" loading="lazy"></p><br><p><strong>Beanç”Ÿå‘½å‘¨æœŸ</strong></p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231223141145378.png" alt="image-20231223141145378" loading="lazy"></p><p>ä»£ç å®ä¾‹ï¼š</p><p>éœ€è¦çš„ä¾èµ–</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-context&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;5.2.10.RELEASE&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>é…ç½®ä»£ç </p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ComponentScan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.itheima.lifecycle&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SpringConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ç”¨æˆ·ç±»</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.itheima.lifecycle;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.beans.BeansException;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.beans.factory.BeanFactory;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.beans.factory.BeanFactoryAware;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.beans.factory.BeanNameAware;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.beans.factory.InitializingBean;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.beans.factory.annotation.Value;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.context.ApplicationContext;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.context.ApplicationContextAware;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Component;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.annotation.PostConstruct;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.annotation.PreDestroy;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BeanNameAware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BeanFactoryAware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ApplicationContextAware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">InitializingBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Userçš„æ„é€ æ–¹æ³•æ‰§è¡Œäº†.........&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String name ;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¼ ä¸‰&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;setNameæ–¹æ³•æ‰§è¡Œäº†.........&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setBeanName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;setBeanNameæ–¹æ³•æ‰§è¡Œäº†.........&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setBeanFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(BeanFactory </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">beanFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BeansException {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;setBeanFactoryæ–¹æ³•æ‰§è¡Œäº†.........&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setApplicationContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ApplicationContext </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">applicationContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BeansException {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;setApplicationContextæ–¹æ³•æ‰§è¡Œäº†........&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PostConstruct</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;initæ–¹æ³•æ‰§è¡Œäº†.................&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> afterPropertiesSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;afterPropertiesSetæ–¹æ³•æ‰§è¡Œäº†........&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PreDestroy</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> destory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;destoryæ–¹æ³•æ‰§è¡Œäº†...............&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ç»§æ‰¿äº†BeanPostProcessor</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.itheima.lifecycle;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.beans.BeansException;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.beans.factory.config.BeanPostProcessor;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cglib.proxy.Enhancer;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cglib.proxy.InvocationHandler;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Component;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.lang.reflect.Method;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyBeanPostProcessor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BeanPostProcessor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postProcessBeforeInitialization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">bean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">beanName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BeansException {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (beanName.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;postProcessBeforeInitializationæ–¹æ³•æ‰§è¡Œäº†-&gt;userå¯¹è±¡åˆå§‹åŒ–æ–¹æ³•å‰å¼€å§‹å¢å¼º....&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bean;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postProcessAfterInitialization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">bean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">beanName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BeansException {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (beanName.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;postProcessAfterInitialization-&gt;userå¯¹è±¡åˆå§‹åŒ–æ–¹æ³•åå¼€å§‹å¢å¼º....&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //cglibä»£ç†å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Enhancer enhancer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Enhancer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //è®¾ç½®éœ€è¦å¢å¼ºçš„ç±»</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            enhancer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setSuperclass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(bean.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //æ‰§è¡Œå›è°ƒæ–¹æ³•ï¼Œå¢å¼ºæ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            enhancer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InvocationHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">o</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Method </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">objects</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Throwable {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    //æ‰§è¡Œç›®æ ‡æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> method.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(method,objects);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //åˆ›å»ºä»£ç†å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> enhancer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bean;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æµ‹è¯•ç±»</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.itheima.lifecycle;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.itheima.config.SpringConfig;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.context.ApplicationContext;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserTest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ApplicationContext ctx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AnnotationConfigApplicationContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SpringConfig.class);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        User user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(User.class);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æ‰“å°ä¿¡æ¯</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Userçš„æ„é€ æ–¹æ³•æ‰§è¡Œäº†.........</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNameæ–¹æ³•æ‰§è¡Œäº†.........</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setBeanNameæ–¹æ³•æ‰§è¡Œäº†.........</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setBeanFactoryæ–¹æ³•æ‰§è¡Œäº†.........</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setApplicationContextæ–¹æ³•æ‰§è¡Œäº†........</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postProcessBeforeInitializationæ–¹æ³•æ‰§è¡Œäº†-&gt;userå¯¹è±¡åˆå§‹åŒ–æ–¹æ³•å‰å¼€å§‹å¢å¼º....</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initæ–¹æ³•æ‰§è¡Œäº†.................</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">afterPropertiesSetæ–¹æ³•æ‰§è¡Œäº†........</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postProcessAfterInitialization-&gt;userå¯¹è±¡åˆå§‹åŒ–æ–¹æ³•åå¼€å§‹å¢å¼º....</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Userçš„æ„é€ æ–¹æ³•æ‰§è¡Œäº†.........</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">public</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> java.lang.String java.lang.Object.toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><br><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡æ€è€ƒï¼šSpring Beançš„ç”Ÿå‘½å‘¨æœŸ</p><p>é¦–å…ˆä¼šé€šè¿‡ä¸€ä¸ªéå¸¸é‡è¦çš„ç±»ï¼Œå«åš BeanDefinition è·å– Bean çš„å®šä¹‰ä¿¡æ¯ï¼Œè¿™é‡Œé¢å°±å°è£…äº† Bean çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ¯”å¦‚ç±»çš„å…¨è·¯å¾„ï¼Œæ˜¯å¦æ˜¯å»¶è¿ŸåŠ è½½ï¼Œæ˜¯å¦æ˜¯å•ä¾‹ç­‰ç­‰è¿™äº›ä¿¡æ¯ã€‚</p><p>ç¬¬ä¸€æ­¥æ˜¯åœ¨åˆ›å»º Bean çš„æ—¶å€™ï¼Œè°ƒç”¨æ„é€ å‡½æ•°å®ä¾‹åŒ– Bean</p><p>ç¬¬äºŒæ­¥æ˜¯ Bean çš„ä¾èµ–æ³¨å…¥ï¼Œæ¯”å¦‚ä¸€äº› set æ–¹æ³•æ³¨å…¥ï¼Œåƒå¹³æ—¶å¼€å‘ç”¨çš„ @Autowire éƒ½æ˜¯è¿™ä¸€æ­¥å®Œæˆ</p><p>ç¬¬ä¸‰æ­¥æ˜¯å¤„ç† Aware æ¥å£ï¼Œå¦‚æœæŸä¸€ä¸ª Bean å®ç°äº† Aware æ¥å£å°±ä¼šé‡å†™æ–¹æ³•æ‰§è¡Œ</p><p>ç¬¬å››æ­¥æ˜¯ Bean çš„åç½®å¤„ç†å™¨ BeanPostProcessorï¼Œè¿™ä¸ªæ˜¯å‰ç½®å¤„ç†å™¨</p><p>ç¬¬äº”æ­¥æ˜¯åˆå§‹åŒ–æ–¹æ³•ï¼Œæ¯”å¦‚å®ç°äº†æ¥å£ InitializingBean æˆ–è€…è‡ªå®šä¹‰äº†æ–¹æ³• init-method æ ‡ç­¾æˆ– @PostContruct</p><p>ç¬¬å…­æ­¥æ˜¯æ‰§è¡Œäº† Bean çš„åç½®å¤„ç†å™¨ BeanPostProcessorï¼Œä¸»è¦æ˜¯å¯¹ Beanè¿›è¡Œå¢å¼ºï¼Œæœ‰å¯èƒ½åœ¨è¿™é‡Œäº§ç”Ÿä»£ç†å¯¹è±¡</p><p>æœ€åä¸€æ­¥æ˜¯é”€æ¯ Bean</p></div><br><h3 id="spring-aop" tabindex="-1">Spring AOP <a class="header-anchor" href="#spring-aop" aria-label="Permalink to &quot;Spring AOP&quot;">â€‹</a></h3><blockquote><p>é¢è¯•å®˜ï¼šä»€ä¹ˆæ˜¯AOPï¼Œä½ ä»¬é¡¹ç›®ä¸­æœ‰æ²¡æœ‰ä½¿ç”¨åˆ°AOP</p></blockquote><p>AOPç§°ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œç”¨äºå°†é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œä½†å´å¯¹å¤šä¸ªå¯¹è±¡äº§ç”Ÿå½±å“çš„å…¬å…±è¡Œä¸ºå’Œé€»è¾‘ï¼ŒæŠ½å–å¹¶å°è£…ä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—è¢«å‘½åä¸ºâ€œåˆ‡é¢â€ï¼ˆAspectï¼‰ï¼Œå‡å°‘ç³»ç»Ÿä¸­çš„é‡å¤ä»£ç ï¼Œé™ä½äº†æ¨¡å—é—´çš„è€¦åˆåº¦ï¼ŒåŒæ—¶æé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚</p><p>å¸¸è§çš„AOPä½¿ç”¨åœºæ™¯ï¼š</p><ul><li>è®°å½•æ“ä½œæ—¥å¿—</li><li>ç¼“å­˜å¤„ç†</li><li>Springä¸­å†…ç½®çš„äº‹åŠ¡å¤„ç†</li></ul><br><p><strong>Springä¸­çš„äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„</strong></p><p>Springæ”¯æŒç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†å’Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ä¸¤ç§æ–¹å¼ã€‚</p><p>ç¼–ç¨‹å¼äº‹åŠ¡æ§åˆ¶ï¼šéœ€ä½¿ç”¨ TransactionTemplate æ¥è¿›è¡Œå®ç°ï¼Œå¯¹ä¸šåŠ¡ä»£ç æœ‰ä¾µå…¥æ€§ï¼Œé¡¹ç›®ä¸­å¾ˆå°‘ä½¿ç”¨</p><p>å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼šå£°æ˜å¼äº‹åŠ¡ç®¡ç†å»ºç«‹åœ¨AOPä¹‹ä¸Šçš„ã€‚å…¶æœ¬è´¨æ˜¯é€šè¿‡AOPåŠŸèƒ½ï¼Œå¯¹æ–¹æ³•å‰åè¿›è¡Œæ‹¦æˆªï¼Œå°†äº‹åŠ¡å¤„ç†çš„åŠŸèƒ½ç¼–ç»‡åˆ°æ‹¦æˆªçš„æ–¹æ³•ä¸­ï¼Œä¹Ÿå°±æ˜¯åœ¨ç›®æ ‡æ–¹æ³•å¼€å§‹ä¹‹å‰åŠ å…¥ä¸€ä¸ªäº‹åŠ¡ï¼Œåœ¨æ‰§è¡Œå®Œç›®æ ‡æ–¹æ³•ä¹‹åæ ¹æ®æ‰§è¡Œæƒ…å†µæäº¤æˆ–è€…å›æ»šäº‹åŠ¡ã€‚</p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231221094357582.png" alt="image-20231221094357582" loading="lazy"></p><br><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡æ€è€ƒï¼šä»€ä¹ˆæ˜¯ AOP ï¼Œä½ ä»¬é¡¹ç›®ä¸­æœ‰æ²¡æœ‰ä½¿ç”¨åˆ° AOP</p><p>AOP çš„å«ä¹‰æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚å°†ä¸ä¸šåŠ¡æ— å…³ï¼Œä½†å¯¹å¤šä¸ªå¯¹è±¡äº§ç”Ÿå½±å“çš„è¡Œä¸ºå’Œé€»è¾‘ï¼ŒæŠ½å–æˆä¸ºå…¬å…±çš„åŠŸèƒ½æ¨¡å—æ¥è¿›è¡Œå¤ç”¨ã€‚</p><p>æˆ‘ä»¬ç³»ç»Ÿä¸­æ—¥å¿—æ–‡ä»¶çš„æ–¹æ³•ï¼Œèœå•æŒ‰é’®æƒé™çš„ç®¡ç†éƒ½æ˜¯é€šè¿‡ AOP æ¥å®ç°çš„ã€‚é€šè¿‡åˆ‡ç‚¹è¡¨è¾¾å¼è·å–æ—¥å¿—è®°å½•çš„æ–¹æ³•ï¼Œç„¶åé€šè¿‡ç¯ç»•é€šçŸ¥è·å–è¯·æ±‚æ–¹æ³•çš„å‚æ•°ï¼Œæ¯”å¦‚ç±»ä¿¡æ¯ã€æ–¹æ³•ä¿¡æ¯ã€æ³¨è§£ã€è¯·æ±‚æ–¹å¼ç­‰ï¼Œè·å–è¿™äº›å‚æ•°ä»¥åä¿å­˜åˆ°æ•°æ®åº“ã€‚</p><br><p>ğŸ’¡<strong>æ€è€ƒï¼šSpring ä¸­çš„äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</strong></p><p>Spring æœ¬è´¨æ˜¯ AOP æ¥å®ç°çš„ï¼Œå¯¹æ–¹æ³•çš„å‰åè¿›è¡Œæ‹¦æˆªï¼Œåœ¨æ‰§è¡Œæ–¹æ³•ä¹‹å‰å¼€å¯äº‹åŠ¡ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œä¹‹åæäº¤æˆ–å›æ»šäº‹åŠ¡ã€‚</p></div><br><h3 id="spring-äº‹åŠ¡å¤±æ•ˆ" tabindex="-1">Spring äº‹åŠ¡å¤±æ•ˆ <a class="header-anchor" href="#spring-äº‹åŠ¡å¤±æ•ˆ" aria-label="Permalink to &quot;Spring äº‹åŠ¡å¤±æ•ˆ&quot;">â€‹</a></h3><blockquote><p>é¢è¯•å®˜ï¼šå¯¹springæ¡†æ¶çš„æ·±å…¥ç†è§£ã€å¤æ‚ä¸šåŠ¡çš„ç¼–ç ç»éªŒ</p></blockquote><ul><li>å¼‚å¸¸æ•è·å¤„ç†</li><li>æŠ›å‡ºæ£€æŸ¥å¼‚å¸¸</li><li>épublicæ–¹æ³•</li></ul><br><p><strong>æƒ…å†µä¸€ï¼šå¼‚å¸¸æ•è·å¤„ç†</strong></p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231221094706821.png" alt="image-20231221094706821" loading="lazy"></p><br><p><strong>æƒ…å†µäºŒï¼šæŠ›å‡ºæ£€æŸ¥å¼‚å¸¸</strong></p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231221094803359.png" alt="image-20231221094803359" loading="lazy"></p><br><p><strong>æƒ…å†µä¸‰ï¼šépublicæ–¹æ³•å¯¼è‡´çš„äº‹åŠ¡å¤±æ•ˆ</strong></p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231221094844464.png" alt="image-20231221094844464" loading="lazy"></p><br><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡æ€è€ƒï¼šSpring äº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</p><ul><li>æ–¹æ³•ä¸Šå¼‚å¸¸æ•è·å¤„ç†ï¼Œè‡ªå·±å¤„ç†äº†å¼‚å¸¸ä½†æ˜¯æ²¡æœ‰æŠ›å‡ºå°±ä¼šå¯¼è‡´äº‹åŠ¡å¤±æ•ˆï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¤„ç†å¼‚å¸¸ä¹‹åéœ€è¦å¯¹å¼‚å¸¸è¿›è¡ŒæŠ›å‡ºã€‚</li><li>æ–¹æ³•æŠ›å‡ºå¼‚å¸¸æ£€æŸ¥ï¼Œå¦‚æœæŠ¥é”™ä¹Ÿä¼šå¯¼è‡´äº‹åŠ¡å¤±æ•ˆï¼Œå› ä¸ºSpringé»˜è®¤åªä¼šå›æ»šéæ£€æŸ¥å¼‚å¸¸ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨Transactionalæ³¨è§£ä¸Šé…ç½®rollbackForå±æ€§ä¸ºExceptionã€‚</li><li>æ–¹æ³•ä¸Šä¸æ˜¯publicä¿®é¥°ä¹Ÿä¼šå¤±æ•ˆã€‚</li></ul></div><br><h3 id="spring-å¾ªç¯ä¾èµ–" tabindex="-1">*Spring å¾ªç¯ä¾èµ– <a class="header-anchor" href="#spring-å¾ªç¯ä¾èµ–" aria-label="Permalink to &quot;*Spring å¾ªç¯ä¾èµ–&quot;">â€‹</a></h3><p>Springä¸­çš„å¾ªç¯å¼•ç”¨</p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224000223068.png" alt="image-20231224000223068" loading="lazy"></p><p>å¾ªç¯ä¾èµ–æµç¨‹å›¾</p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224002346813.png" alt="image-20231224002346813" loading="lazy"></p><br><p>ä¸‰çº§ç¼“å­˜è§£å†³å¾ªç¯ä¾èµ–</p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224005813459.png" alt="image-20231224005813459" loading="lazy"></p><br><p>ä¸€çº§ç¼“å­˜ä½œç”¨ï¼šé™åˆ¶beanåœ¨beanFactoryä¸­åªå­˜ä¸€ä»½ï¼Œå³å®ç°singleton scopeï¼Œè§£å†³ä¸äº†å¾ªç¯ä¾èµ–ã€‚</p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224022839719.png" alt="image-20231224022839719" loading="lazy"></p><br><p>å¦‚æœè¦æƒ³æ‰“ç ´å¾ªç¯ä¾èµ–, å°±éœ€è¦ä¸€ä¸ªä¸­é—´äººçš„å‚ä¸, è¿™ä¸ªä¸­é—´äººå°±æ˜¯äºŒçº§ç¼“å­˜ã€‚<mark>å¯¹è±¡Aå’Œå¯¹è±¡Bä»äºŒçº§ç¼“å­˜å­˜å…¥äº†ä¸€çº§ç¼“å­˜ã€‚</mark></p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224023549457.png" alt="image-20231224023549457" loading="lazy"></p><br><p>ä½†æ˜¯ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜åªèƒ½è§£å†³ä¸€èˆ¬å¯¹è±¡çš„å¾ªç¯ä¾èµ–é—®é¢˜ã€‚å¦‚æœAæ˜¯ä»£ç†å¯¹è±¡ï¼Œåˆ™éœ€è¦å€ŸåŠ©ä¸‰çº§ç¼“å­˜</p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224023658943.png" alt="image-20231224023658943" loading="lazy"></p><br><p>ä¸‰çº§ç¼“å­˜è§£å†³å¾ªç¯ä¾èµ–</p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224023958186.png" alt="image-20231224023958186" loading="lazy"></p><br><p>æ‰‹åŠ¨è§£å†³å¾ªç¯ä¾èµ–ï¼šæ„é€ æ–¹æ³•å‡ºç°äº†å¾ªç¯ä¾èµ–ã€‚</p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224024045030.png" alt="image-20231224024045030" loading="lazy"></p><br><p>å›ç­”è¦ç‚¹ï¼šSpringä¸­çš„å¾ªç¯å¼•ç”¨</p><p>å¾ªç¯ä¾èµ–ï¼šå¾ªç¯ä¾èµ–å…¶å®å°±æ˜¯å¾ªç¯å¼•ç”¨,ä¹Ÿå°±æ˜¯ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„beanäº’ç›¸æŒæœ‰å¯¹æ–¹,æœ€ç»ˆå½¢æˆé—­ç¯ã€‚æ¯”å¦‚Aä¾èµ–äºB,Bä¾èµ–äºA</p><p>å¾ªç¯ä¾èµ–åœ¨springä¸­æ˜¯å…è®¸å­˜åœ¨ï¼Œspringæ¡†æ¶ä¾æ®ä¸‰çº§ç¼“å­˜å·²ç»è§£å†³äº†å¤§éƒ¨åˆ†çš„å¾ªç¯ä¾èµ–</p><p>â‘ ä¸€çº§ç¼“å­˜ï¼šå•ä¾‹æ± ï¼Œç¼“å­˜å·²ç»ç»å†äº†å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œå·²ç»åˆå§‹åŒ–å®Œæˆçš„beanå¯¹è±¡</p><p>â‘¡äºŒçº§ç¼“å­˜ï¼šç¼“å­˜æ—©æœŸçš„beanå¯¹è±¡ï¼ˆç”Ÿå‘½å‘¨æœŸè¿˜æ²¡èµ°å®Œï¼‰</p><p>â‘¢ä¸‰çº§ç¼“å­˜ï¼šç¼“å­˜çš„æ˜¯ObjectFactoryï¼Œè¡¨ç¤ºå¯¹è±¡å·¥å‚ï¼Œç”¨æ¥åˆ›å»ºæŸä¸ªå¯¹è±¡çš„</p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224024304233.png" alt="image-20231224024304233" loading="lazy"></p><p><strong>é¢è¯•å®˜</strong>ï¼šSpringä¸­çš„å¾ªç¯å¼•ç”¨</p><p><strong>å€™é€‰äºº</strong>ï¼š</p><p>å—¯ï¼Œå¥½çš„ï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹</p><p>å¾ªç¯ä¾èµ–ï¼šå¾ªç¯ä¾èµ–å…¶å®å°±æ˜¯å¾ªç¯å¼•ç”¨,ä¹Ÿå°±æ˜¯ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„beanäº’ç›¸æŒæœ‰å¯¹æ–¹,æœ€ç»ˆå½¢æˆé—­ç¯ã€‚æ¯”å¦‚Aä¾èµ–äºB,Bä¾èµ–äºA</p><p>å¾ªç¯ä¾èµ–åœ¨springä¸­æ˜¯å…è®¸å­˜åœ¨ï¼Œspringæ¡†æ¶ä¾æ®ä¸‰çº§ç¼“å­˜å·²ç»è§£å†³äº†å¤§éƒ¨åˆ†çš„å¾ªç¯ä¾èµ–</p><p>â‘ ä¸€çº§ç¼“å­˜ï¼šå•ä¾‹æ± ï¼Œç¼“å­˜å·²ç»ç»å†äº†å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œå·²ç»åˆå§‹åŒ–å®Œæˆçš„beanå¯¹è±¡</p><p>â‘¡äºŒçº§ç¼“å­˜ï¼šç¼“å­˜æ—©æœŸçš„beanå¯¹è±¡ï¼ˆç”Ÿå‘½å‘¨æœŸè¿˜æ²¡èµ°å®Œï¼‰</p><p>â‘¢ä¸‰çº§ç¼“å­˜ï¼šç¼“å­˜çš„æ˜¯ObjectFactoryï¼Œè¡¨ç¤ºå¯¹è±¡å·¥å‚ï¼Œç”¨æ¥åˆ›å»ºæŸä¸ªå¯¹è±¡çš„</p><p><strong>é¢è¯•å®˜</strong>ï¼šé‚£å…·ä½“è§£å†³æµç¨‹æ¸…æ¥šå—ï¼Ÿ</p><p><strong>å€™é€‰äºº</strong>ï¼š</p><p>ç¬¬ä¸€ï¼Œå…ˆå®ä¾‹Aå¯¹è±¡ï¼ŒåŒæ—¶ä¼šåˆ›å»ºObjectFactoryå¯¹è±¡å­˜å…¥ä¸‰çº§ç¼“å­˜singletonFactories</p><p>ç¬¬äºŒï¼ŒAåœ¨åˆå§‹åŒ–çš„æ—¶å€™éœ€è¦Bå¯¹è±¡ï¼Œè¿™ä¸ªèµ°Bçš„åˆ›å»ºçš„é€»è¾‘</p><p>ç¬¬ä¸‰ï¼ŒBå®ä¾‹åŒ–å®Œæˆï¼Œä¹Ÿä¼šåˆ›å»ºObjectFactoryå¯¹è±¡å­˜å…¥ä¸‰çº§ç¼“å­˜singletonFactories</p><p>ç¬¬å››ï¼ŒBéœ€è¦æ³¨å…¥Aï¼Œé€šè¿‡ä¸‰çº§ç¼“å­˜ä¸­è·å–ObjectFactoryæ¥ç”Ÿæˆä¸€ä¸ªAçš„å¯¹è±¡åŒæ—¶å­˜å…¥äºŒçº§ç¼“å­˜ï¼Œè¿™ä¸ªæ˜¯æœ‰ä¸¤ç§æƒ…å†µï¼Œä¸€ä¸ªæ˜¯å¯èƒ½æ˜¯Açš„æ™®é€šå¯¹è±¡ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯Açš„ä»£ç†å¯¹è±¡ï¼Œéƒ½å¯ä»¥è®©ObjectFactoryæ¥ç”Ÿäº§å¯¹åº”çš„å¯¹è±¡ï¼Œè¿™ä¹Ÿæ˜¯ä¸‰çº§ç¼“å­˜çš„å…³é”®</p><p>ç¬¬äº”ï¼ŒBé€šè¿‡ä»é€šè¿‡äºŒçº§ç¼“å­˜earlySingletonObjects è·å¾—åˆ°Açš„å¯¹è±¡åå¯ä»¥æ­£å¸¸æ³¨å…¥ï¼ŒBåˆ›å»ºæˆåŠŸï¼Œå­˜å…¥ä¸€çº§ç¼“å­˜singletonObjects</p><p>ç¬¬å…­ï¼Œå›åˆ°Aå¯¹è±¡åˆå§‹åŒ–ï¼Œå› ä¸ºBå¯¹è±¡å·²ç»åˆ›å»ºå®Œæˆï¼Œåˆ™å¯ä»¥ç›´æ¥æ³¨å…¥Bï¼ŒAåˆ›å»ºæˆåŠŸå­˜å…¥ä¸€æ¬¡ç¼“å­˜singletonObjects</p><p>ç¬¬ä¸ƒï¼ŒäºŒçº§ç¼“å­˜ä¸­çš„ä¸´æ—¶å¯¹è±¡Aæ¸…é™¤</p><p><strong>é¢è¯•å®˜</strong>ï¼šæ„é€ æ–¹æ³•å‡ºç°äº†å¾ªç¯ä¾èµ–æ€ä¹ˆè§£å†³ï¼Ÿ</p><p><strong>å€™é€‰äºº</strong>ï¼š</p><p>ç”±äºbeançš„ç”Ÿå‘½å‘¨æœŸä¸­æ„é€ å‡½æ•°æ˜¯ç¬¬ä¸€ä¸ªæ‰§è¡Œçš„ï¼Œspringæ¡†æ¶å¹¶ä¸èƒ½è§£å†³æ„é€ å‡½æ•°çš„çš„ä¾èµ–æ³¨å…¥ï¼Œå¯ä»¥ä½¿ç”¨@Lazyæ‡’åŠ è½½ï¼Œä»€ä¹ˆæ—¶å€™éœ€è¦å¯¹è±¡å†è¿›è¡Œbeanå¯¹è±¡çš„åˆ›å»º</p><h2 id="springmvc" tabindex="-1">SpringMVC <a class="header-anchor" href="#springmvc" aria-label="Permalink to &quot;SpringMVC&quot;">â€‹</a></h2><h3 id="springmvc-çš„æ‰§è¡Œæµç¨‹" tabindex="-1">SpringMVC çš„æ‰§è¡Œæµç¨‹ <a class="header-anchor" href="#springmvc-çš„æ‰§è¡Œæµç¨‹" aria-label="Permalink to &quot;SpringMVC çš„æ‰§è¡Œæµç¨‹&quot;">â€‹</a></h3><blockquote><p>é¢è¯•å®˜ï¼šSpringMVCçš„æ‰§è¡Œæµç¨‹ä½ çŸ¥é“å—ï¼Ÿ</p></blockquote><p>SpringMVCçš„æ‰§è¡Œæµç¨‹æ˜¯è¿™ä¸ªæ¡†æ¶æœ€æ ¸å¿ƒçš„å†…å®¹ã€‚</p><ul><li>è§†å›¾é˜¶æ®µï¼ˆè€æ—§JSPç­‰ï¼‰</li><li>å‰åç«¯åˆ†ç¦»é˜¶æ®µï¼ˆæ¥å£å¼€å‘ï¼Œå¼‚æ­¥ï¼‰</li></ul><br><p><strong>è§†å›¾é˜¶æ®µ</strong></p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224032311005.png" alt="image-20231224032311005" loading="lazy"></p><p><strong>å‰åç«¯åˆ†ç¦»é˜¶æ®µ</strong></p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224032336004.png" alt="image-20231224032336004" loading="lazy"></p><br><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡æ€è€ƒï¼šSpringMVCçš„æ‰§è¡Œæµç¨‹çŸ¥é“å˜›</p><p>1ã€ç”¨æˆ·å‘é€å‡ºè¯·æ±‚åˆ°å‰ç«¯æ§åˆ¶å™¨ DispatcherServletï¼Œè¿™æ˜¯ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒ</p><p>2ã€DispatcherServlet æ”¶åˆ°è¯·æ±‚è°ƒç”¨ HandlerMappingï¼ˆå¤„ç†å™¨æ˜ å°„å™¨ï¼‰ã€‚</p><p>3ã€HandlerMapping æ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨ ï¼ˆå¯æŸ¥æ‰¾xmlé…ç½®æˆ–æ³¨è§£é…ç½®ï¼‰ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠ<strong>å¤„ç†å™¨æ‹¦æˆªå™¨</strong>(å¦‚æœæœ‰)ï¼Œå†ä¸€èµ·è¿”å›ç»™DispatcherServletã€‚</p><p>4ã€DispatcherServlet è°ƒç”¨ HandlerAdapterï¼ˆå¤„ç†å™¨é€‚é…å™¨ï¼‰ã€‚</p><p>5ã€HandlerAdapter ç»è¿‡é€‚é…è°ƒç”¨å…·ä½“çš„å¤„ç†å™¨ï¼ˆHandler/Controllerï¼‰ã€‚</p><p>6ã€Controller æ‰§è¡Œå®Œæˆè¿”å› ModelAndView å¯¹è±¡ã€‚</p><p>7ã€HandlerAdapter å°† Controller æ‰§è¡Œç»“æœ ModelAndView è¿”å›ç»™ DispatcherServletã€‚</p><p>8ã€DispatcherServlet å°† ModelAndView ä¼ ç»™ ViewResloverï¼ˆè§†å›¾è§£æå™¨ï¼‰ã€‚</p><p>9ã€ViewReslover è§£æåè¿”å›å…·ä½“ Viewï¼ˆè§†å›¾ï¼‰ã€‚</p><p>10ã€DispatcherServlet æ ¹æ® View è¿›è¡Œæ¸²æŸ“è§†å›¾ï¼ˆå³å°†æ¨¡å‹æ•°æ®å¡«å……è‡³è§†å›¾ä¸­ï¼‰ã€‚</p><p>11ã€DispatcherServlet å“åº”ç”¨æˆ·ã€‚</p><p>å½“ç„¶ç°åœ¨çš„å¼€å‘ï¼ŒåŸºæœ¬éƒ½æ˜¯å‰åç«¯åˆ†ç¦»çš„å¼€å‘çš„ï¼Œå¹¶æ²¡æœ‰è§†å›¾è¿™äº›ï¼Œä¸€èˆ¬éƒ½æ˜¯handlerä¸­ä½¿ç”¨Responseç›´æ¥ç»“æœè¿”å›</p></div><h2 id="springboot" tabindex="-1">SpringBoot <a class="header-anchor" href="#springboot" aria-label="Permalink to &quot;SpringBoot&quot;">â€‹</a></h2><h3 id="è‡ªåŠ¨é…ç½®åŸç†" tabindex="-1">è‡ªåŠ¨é…ç½®åŸç† <a class="header-anchor" href="#è‡ªåŠ¨é…ç½®åŸç†" aria-label="Permalink to &quot;è‡ªåŠ¨é…ç½®åŸç†&quot;">â€‹</a></h3><p>SpringBoot ä¸­æœ€é«˜é¢‘çš„ä¸€é“é¢è¯•é¢˜ï¼Œä¹Ÿæ˜¯æ¡†æ¶æœ€æ ¸å¿ƒçš„æ€æƒ³ã€‚</p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224130558060.png" alt="image-20231224130558060" loading="lazy"></p><ul><li><code>@SpringBootConfiguration</code>: è¯¥æ³¨è§£ä¸<code>@Configutation</code>æ³¨è§£ä½œç”¨ç›¸åŒï¼Œç”¨æ¥å£°æ˜å½“å‰ä¹Ÿæ˜¯ä¸€ä¸ªé…ç½®ç±»ã€‚</li><li><code>@ComponentScan</code>: ç»„ä»¶æ‰«æï¼Œé»˜è®¤æ‰«æå½“å‰å¼•å¯¼ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ã€‚</li><li><code>@EnableAutoConfiguration</code>: SpringBootå®ç°è‡ªåŠ¨åŒ–é…ç½®çš„æ ¸å¿ƒæ³¨è§£ã€‚</li></ul><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224131426774.png" alt="image-20231224131426774" loading="lazy"></p><p>ä¸¾ä¾‹ï¼šæŸ¥çœ‹ <code>RedisAutoConfiguration</code> çš„é…ç½®ä¿¡æ¯</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ˜¯ä¸€ä¸ªé…ç½®ç±»</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">AutoConfiguration</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åˆ¤æ–­æ˜¯å¦æœ‰å¯¹åº”çš„å­—èŠ‚ç </span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ConditionalOnClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RedisOperations.class) </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EnableConfigurationProperties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RedisProperties.class)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ LettuceConnectionConfiguration.class, JedisConnectionConfiguration.class })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RedisAutoConfiguration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // åˆ¤æ–­ç¯å¢ƒä¸­æœ‰æ²¡æœ‰å¯¹åº”çš„ Bean</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ConditionalOnMissingBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;redisTemplate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ConditionalOnSingleCandidate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RedisConnectionFactory.class)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RedisTemplate&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redisTemplate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RedisConnectionFactory </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">redisConnectionFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		RedisTemplate&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; template </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RedisTemplate&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		template.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setConnectionFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(redisConnectionFactory);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> template;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ConditionalOnMissingBean</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ConditionalOnSingleCandidate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RedisConnectionFactory.class)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StringRedisTemplate </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringRedisTemplate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RedisConnectionFactory </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">redisConnectionFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StringRedisTemplate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(redisConnectionFactory);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><br><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡æ€è€ƒï¼šSpringbootè‡ªåŠ¨é…ç½®åŸç†</p><p>SpringBooté¡¹ç›®ä¸­æœ‰ä¸ªæ³¨è§£ @SpringBootApplicationï¼Œä¸»è¦ç”±ä¸‰ä¸ªæ³¨è§£ç»„æˆã€‚</p><ul><li><code>@SpringBootConfiguration</code> è¡¨æ˜è¿™ä¸ªç±»å½“å‰æ˜¯é…ç½®ç±»ã€‚</li><li><code>@ComponentScan</code> è¡¨æ˜é»˜è®¤æ‰«æå½“å‰å¼•å¯¼ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ã€‚</li><li><code>@EnableAutoConfiguration</code> æ˜¯å®ç°è‡ªåŠ¨åŒ–é…ç½®çš„æ ¸å¿ƒåŒ…ã€‚å…¶ä¸»è¦é€šè¿‡ <code>@Import</code> æ³¨è§£å¯¼å…¥ç›¸åº”çš„é…ç½®ã€‚å†…éƒ¨è¯»å–äº†è¯¥é¡¹ç›®å’Œè¯¥é¡¹ç›®å¼•ç”¨çš„ Jar åŒ…ä¸‹ classpath ä¸‹ <code>METE/spring.factories</code> æ–‡ä»¶ä¸­çš„æ‰€é…ç½®ç±»çš„å…¨ç±»åã€‚å¹¶ä¼šæœ‰ <code>@ConditionalOnClass</code> æ³¨è§£åˆ¤æ–­æ˜¯å¦æœ‰å¯¹è±¡çš„ class æ–‡ä»¶ï¼Œå¦‚æœæœ‰åˆ™åŠ è½½è¯¥ç±»ï¼ŒæŠŠè¿™ä¸ªé…ç½®ç±»çš„æ‰€æœ‰ Bean æ”¾å…¥ Spring å®¹å™¨ä¸­ã€‚</li></ul></div><br><h3 id="spring-æ¡†æ¶å¸¸è§æ³¨è§£" tabindex="-1">Spring æ¡†æ¶å¸¸è§æ³¨è§£ <a class="header-anchor" href="#spring-æ¡†æ¶å¸¸è§æ³¨è§£" aria-label="Permalink to &quot;Spring æ¡†æ¶å¸¸è§æ³¨è§£&quot;">â€‹</a></h3><blockquote><p>é¢è¯•å®˜ï¼šSpringæ¡†æ¶å¸¸è§æ³¨è§£ï¼ˆSpringã€SpringBootã€SpringMVCï¼‰</p></blockquote><ul><li>Spring å¸¸è§çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</li><li>SpringMVC å¸¸è§çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</li><li>SpringBoot å¸¸è§çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</li></ul><br><p><strong>Springå¸¸è§æ³¨è§£</strong></p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224131918449.png" alt="image-20231224131918449" loading="lazy"></p><br><p><strong>SpringMVCå¸¸è§æ³¨è§£</strong></p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224131949623.png" alt="image-20231224131949623" loading="lazy"></p><br><p><strong>SpringBootå¸¸è§æ³¨è§£</strong></p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224132051165.png" alt="image-20231224132051165" loading="lazy"></p><br><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡æ€è€ƒï¼šSpring çš„å¸¸è§æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</p><p>ç¬¬ä¸€ç±»æ˜¯ï¼šå£°æ˜beanï¼Œæœ‰@Componentã€@Serviceã€@Repositoryã€@Controller</p><p>ç¬¬äºŒç±»æ˜¯ï¼šä¾èµ–æ³¨å…¥ç›¸å…³çš„ï¼Œæœ‰@Autowiredã€@Qualifierã€@Resourse</p><p>ç¬¬ä¸‰ç±»æ˜¯ï¼šè®¾ç½®ä½œç”¨åŸŸ @Scope</p><p>ç¬¬å››ç±»æ˜¯ï¼šspringé…ç½®ç›¸å…³çš„ï¼Œæ¯”å¦‚@Configurationï¼Œ@ComponentScan å’Œ @Bean</p><p>ç¬¬äº”ç±»æ˜¯ï¼šè·Ÿaopç›¸å…³åšå¢å¼ºçš„æ³¨è§£ @Aspectï¼Œ@Beforeï¼Œ@Afterï¼Œ@Aroundï¼Œ@Pointcut</p><br><p>ğŸ’¡<strong>æ€è€ƒï¼šSpringMVC å¸¸è§çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</strong></p><ul><li>@RequestMappingï¼šç”¨äºæ˜ å°„è¯·æ±‚è·¯å¾„ï¼›</li><li>@RequestBodyï¼šæ³¨è§£å®ç°æ¥æ”¶httpè¯·æ±‚çš„jsonæ•°æ®ï¼Œå°†jsonè½¬æ¢ä¸ºjavaå¯¹è±¡ï¼›</li><li>@RequestParamï¼šæŒ‡å®šè¯·æ±‚å‚æ•°çš„åç§°ï¼›</li><li>@PathViriableï¼šä»è¯·æ±‚è·¯å¾„ä¸‹ä¸­è·å–è¯·æ±‚å‚æ•°(/user/{id})ï¼Œä¼ é€’ç»™æ–¹æ³•çš„å½¢å¼å‚æ•°ï¼›</li><li>@ResponseBodyï¼šæ³¨è§£å®ç°å°†controlleræ–¹æ³•è¿”å›å¯¹è±¡è½¬åŒ–ä¸ºjsonå¯¹è±¡å“åº”ç»™å®¢æˆ·ç«¯ã€‚</li><li>@RequestHeaderï¼šè·å–æŒ‡å®šçš„è¯·æ±‚å¤´æ•°æ®ï¼Œè¿˜æœ‰åƒ@PostMappingã€@GetMappingè¿™äº›ã€‚</li></ul><br><p>ğŸ’¡<strong>æ€è€ƒï¼šSpringBoot å¸¸è§çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</strong></p><p>Spring Bootçš„æ ¸å¿ƒæ³¨è§£æ˜¯@SpringBootApplication , ä»–ç”±å‡ ä¸ªæ³¨è§£ç»„æˆ :</p><ul><li>@SpringBootConfigurationï¼š ç»„åˆäº†- @Configurationæ³¨è§£ï¼Œå®ç°é…ç½®æ–‡ä»¶çš„åŠŸèƒ½ï¼›</li><li>@EnableAutoConfigurationï¼šæ‰“å¼€è‡ªåŠ¨é…ç½®çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥å…³é—­æŸä¸ªè‡ªåŠ¨é…ç½®çš„é€‰é¡¹</li><li>@ComponentScanï¼šSpringç»„ä»¶æ‰«æ</li></ul></div><h2 id="mybatis" tabindex="-1">MyBatis <a class="header-anchor" href="#mybatis" aria-label="Permalink to &quot;MyBatis&quot;">â€‹</a></h2><h3 id="mybatisæ‰§è¡Œæµç¨‹" tabindex="-1">MyBatisæ‰§è¡Œæµç¨‹ <a class="header-anchor" href="#mybatisæ‰§è¡Œæµç¨‹" aria-label="Permalink to &quot;MyBatisæ‰§è¡Œæµç¨‹&quot;">â€‹</a></h3><blockquote><p>é¢è¯•å®˜ï¼šMyBatisæ‰§è¡Œæµç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Œèƒ½æè¿°ä¸€ä¸‹å—ï¼Ÿ</p></blockquote><ul><li>ç†è§£å„ä¸ªç»„ä»¶çš„å…³ç³»</li><li>SQLæ‰§è¡Œè¿‡ç¨‹ï¼ˆå‚æ•°æ˜ å°„ï¼ŒSQLè§£æï¼Œæ‰§è¡Œå’Œç»“æœå¤„ç†ï¼‰</li></ul><br><p>æ ¸å¿ƒé…ç½® :<code>mybatis-config.xml</code></p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224133216040.png" alt="" loading="lazy"></p><p>MappendStatementå¯¹è±¡</p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224133449346.png" alt="" loading="lazy"></p><br><p><strong>Mybatisæ‰§è¡Œæµç¨‹</strong></p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224133410862.png" alt="image-20231224133410862" loading="lazy"></p><br><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡æ€è€ƒï¼šMyBatisæ‰§è¡Œæµç¨‹</p><p>è¯»å–mybatis-config.xmlåŠ è½½è¿è¡Œç¯å¢ƒå’Œæ˜ å°„æ–‡ä»¶ï¼Œå¹¶åˆ›å»ºå…¨å±€å”¯ä¸€çš„ä¼šè¯å·¥å‚SqlSessionFactoryï¼Œç”Ÿäº§SqlSessionå¯¹è±¡ï¼ŒåŒ…å«äº†æ‰§è¡ŒSQLè¯­å¥çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¹¶é€šè¿‡Executoræ‰§è¡Œå™¨æ¥æ‰§è¡Œæ•°æ®åº“æ“ä½œæ¥å£ã€‚å…¶ä¸­Executoræ¥å£çš„æ‰§è¡Œæ–¹æ³•ä¸­æœ‰ä¸€ä¸ªMappedStatementç±»å‹çš„å‚æ•°ï¼Œå°è£…äº†æ˜ å°„ä¿¡æ¯ã€‚é€šè¿‡è¾“å…¥å‚æ•°æ˜ å°„æ¥è·å–è¾“å‡ºç»“æœæ˜ å°„ã€‚</p></div><br><h3 id="mybatiså»¶è¿ŸåŠ è½½" tabindex="-1">Mybatiså»¶è¿ŸåŠ è½½ <a class="header-anchor" href="#mybatiså»¶è¿ŸåŠ è½½" aria-label="Permalink to &quot;Mybatiså»¶è¿ŸåŠ è½½&quot;">â€‹</a></h3><blockquote><p>é¢è¯•å®˜ï¼šMybatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿ</p></blockquote><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224135431031.png" alt="image-20231224135431031" loading="lazy"></p><p>æŸ¥è¯¢ç”¨æˆ·çš„æ—¶å€™ï¼ŒæŠŠç”¨æˆ·æ‰€å±çš„è®¢å•æ•°æ®ä¹ŸæŸ¥è¯¢å‡ºæ¥ï¼Œè¿™ä¸ªæ˜¯<mark>ç«‹å³åŠ è½½</mark></p><p>æŸ¥è¯¢ç”¨æˆ·çš„æ—¶å€™ï¼Œæš‚æ—¶ä¸æŸ¥è¯¢è®¢å•æ•°æ®ï¼Œå½“éœ€è¦è®¢å•çš„æ—¶å€™ï¼Œå†æŸ¥è¯¢è®¢å•ï¼Œè¿™ä¸ªå°±æ˜¯<mark>å»¶è¿ŸåŠ è½½</mark></p><br><p><strong>å»¶è¿ŸåŠ è½½åŸç†</strong></p><ol><li>ä½¿ç”¨CGLIBåˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡</li><li>å½“è°ƒç”¨ç›®æ ‡æ–¹æ³•<code>user.getOrderList()</code>æ—¶ï¼Œè¿›å…¥æ‹¦æˆªå™¨invokeæ–¹æ³•ï¼Œå‘ç°<code>user.getOrderList()</code>æ˜¯nullå€¼ï¼Œæ‰§è¡ŒsqlæŸ¥è¯¢orderåˆ—</li><li>æŠŠorderæŸ¥è¯¢ä¸Šæ¥ï¼Œç„¶åè°ƒç”¨<code>user.setOrderList(List&lt;Order&gt; orderList)</code> ï¼Œæ¥ç€å®Œæˆ<code>user.getOrderList()</code>æ–¹æ³•çš„è°ƒç”¨</li></ol><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224135627464.png" alt="image-20231224135627464" loading="lazy"></p><br><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡æ€è€ƒï¼šMybatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿ</p><p>å»¶è¿ŸåŠ è½½å°±æ˜¯æŒ‡ç”¨åˆ°æ•°æ®æ‰åŠ è½½ï¼Œæ²¡æœ‰ç”¨åˆ°æ•°æ®ä¸åŠ è½½ã€‚Mybatisæ”¯æŒä¸€å¯¹ä¸€å…³è”å¯¹è±¡å’Œä¸€å¯¹å¤šå…³è”å¯¹è±¡çš„å»¶è¿ŸåŠ è½½ã€‚å¯ä»¥é€šè¿‡é…ç½®æ˜¯å¦åŠ è½½å»¶è¿ŸåŠ è½½æ¥å®ç°ï¼Œé»˜è®¤æ˜¯å…³é—­çš„ã€‚</p><br><p>ğŸ’¡<strong>æ€è€ƒï¼šå»¶è¿ŸåŠ è½½çš„åº•å±‚åŸç†çŸ¥é“å—ï¼Ÿ</strong></p><p>å»¶è¿ŸåŠ è½½åº•å±‚æ˜¯é€šè¿‡CGLIBåŠ¨æ€ä»£ç†å®ç°çš„ã€‚é€šè¿‡åˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œç›®æ ‡å¯¹è±¡æ˜¯å¼€å¯å»¶è¿ŸåŠ è½½çš„mapperï¼Œå½“è°ƒç”¨ç›®æ ‡æ–¹æ³•åè¿›å…¥æ‹¦æˆªå™¨invokeæ–¹æ³•ï¼Œå‘ç°ç›®æ ‡å¯¹è±¡ä¸ºç©ºåˆ™æ‰§è¡ŒSQLï¼Œåœ¨è·å–æ•°æ®ä»¥åè°ƒç”¨SETæ–¹æ³•è®¾ç½®å±æ€§å€¼ï¼Œåœ¨æŸ¥è¯¢ç›®æ ‡æ–¹æ³•åˆ™ä¼šæœ‰æ•°æ®ã€‚</p></div><br><h3 id="mybatisä¸€çº§äºŒçº§ç¼“å­˜" tabindex="-1">Mybatisä¸€çº§äºŒçº§ç¼“å­˜ <a class="header-anchor" href="#mybatisä¸€çº§äºŒçº§ç¼“å­˜" aria-label="Permalink to &quot;Mybatisä¸€çº§äºŒçº§ç¼“å­˜&quot;">â€‹</a></h3><blockquote><p>é¢è¯•å®˜ï¼šMybatisçš„ä¸€çº§ï¼ŒäºŒçº§ç¼“å­˜ç”¨è¿‡å—ï¼Ÿ</p></blockquote><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224140431881.png" alt="image-20231224140431881" loading="lazy"></p><br><p><strong>ä¸€çº§ç¼“å­˜</strong></p><p>åŸºäº PerpetualCache çš„ HashMap æœ¬åœ°ç¼“å­˜ï¼Œå…¶å­˜å‚¨ä½œç”¨åŸŸä¸º Sessionï¼Œå½“Sessionè¿›è¡Œflushæˆ–closeä¹‹åï¼Œè¯¥Sessionä¸­çš„æ‰€æœ‰Cacheå°±å°†æ¸…ç©ºï¼Œé»˜è®¤æ‰“å¼€ä¸€çº§ç¼“å­˜</p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224140515933.png" alt="" loading="lazy"></p><br><p><strong>äºŒçº§ç¼“å­˜</strong></p><p>äºŒçº§ç¼“å­˜æ˜¯åŸºäºnamespaceå’Œmapperçš„ä½œç”¨åŸŸèµ·ä½œç”¨çš„ï¼Œä¸æ˜¯ä¾èµ–äºSQL sessionï¼Œé»˜è®¤ä¹Ÿæ˜¯é‡‡ç”¨ PerpetualCacheï¼ŒHashMap å­˜å‚¨</p><p><img src="https://mugrain.oss-cn-hangzhou.aliyuncs.com/cswiki/image-20231224140612820.png" alt="image-20231224140612820" loading="lazy"></p><p>æ³¨æ„äº‹é¡¹</p><ol><li><p>å¯¹äºç¼“å­˜æ•°æ®æ›´æ–°æœºåˆ¶ï¼Œå½“æŸä¸€ä¸ªä½œç”¨åŸŸ(ä¸€çº§ç¼“å­˜ Session/äºŒçº§ç¼“å­˜Namespaces)çš„è¿›è¡Œäº†æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤æ“ä½œåï¼Œé»˜è®¤è¯¥ä½œç”¨åŸŸä¸‹æ‰€æœ‰ select ä¸­çš„ç¼“å­˜å°†è¢« clear</p></li><li><p>äºŒçº§ç¼“å­˜éœ€è¦ç¼“å­˜çš„æ•°æ®å®ç°Serializableæ¥å£</p></li><li><p>åªæœ‰ä¼šè¯æäº¤æˆ–è€…å…³é—­ä»¥åï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®æ‰ä¼šè½¬ç§»åˆ°äºŒçº§ç¼“å­˜ä¸­</p></li></ol><br><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡æ€è€ƒï¼šMybatisçš„äºŒçº§ç¼“å­˜ä»€ä¹ˆæ—¶å€™ä¼šæ¸…ç†ç¼“å­˜ä¸­çš„æ•°æ®</p><ul><li>ä¸€çº§ç¼“å­˜æ˜¯åŸºäºsessionçš„HashMapæœ¬åœ°ç¼“å­˜ï¼Œå½“sessionè¿›è¡Œflushæˆ–closeåˆ™å¯¹ç¼“å­˜è¿›è¡Œæ¸…ç©ºï¼Œé»˜è®¤å¼€å¯ã€‚</li><li>äºŒçº§ç¼“å­˜æ˜¯åŸºäºnamespaceå’Œmapperä½œç”¨åŸŸçš„æœ¬åœ°ç¼“å­˜ï¼Œéœ€è¦æ‰“å¼€é…ç½®æ‰ä¼šç”Ÿæ•ˆã€‚</li><li>äºŒçº§ç¼“å­˜ä¼šåœ¨æ•°æ®è¿›è¡Œæ–°å¢ï¼Œä¿®æ”¹ï¼Œåˆ é™¤åå¯¹æ‰€æœ‰é»˜è®¤æ”¹ä½œç”¨åŸŸä¸‹çš„selectç¼“å­˜è¿›è¡Œclearã€‚</li></ul></div>`,208);function m(s,b,A,B,C,D){const t=n("ArticleMetadata"),h=n("ClientOnly");return l(),k("div",null,[u,r(h,null,{default:E(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(l(),d(t,{key:0,article:s.$frontmatter},null,8,["article"])):c("",!0)]}),_:1}),F])}const q=e(y,[["render",m]]);export{v as __pageData,q as default};
