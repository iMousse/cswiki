import{_ as t,E as n,c as e,J as r,w as E,m as l,a as g,V as d,o as h,b as y,e as c}from"./chunks/framework.syB9hai_.js";const F="/cswiki/assets/1663557792268-e080928e-cf37-48c0-9daf-16a13f246d83.xglC8C6f.gif",o="/cswiki/assets/1672122152999-bf7bae0a-db49-446f-bcc7-81c5d65a16ef.BU0n5yhG.png",D="/cswiki/assets/1666061224408-67145457-6c29-4857-bc10-a2ae5ed19b91.OwR4GZge.png",A="/cswiki/assets/1666061234916-53bd0d63-2446-4090-9dac-1f419a0d4c53.8v-yieez.png",C="/cswiki/assets/1672122238964-3aa23731-3e7e-4363-9f1e-f93f9ddb944a.0r8ngqvY.png",m="/cswiki/assets/1677809821340-ed3eeb84-5dc0-4798-b0e4-4af4ad0e0252.5Yroz4B_.png",u="/cswiki/assets/1666786491093-544a5daa-7729-41e0-bc57-887d3f9deb2b.Kekyvyc8.png",b="/cswiki/assets/1666786525363-3a4823d1-7ac3-4aa6-a20b-013580642f68.G1zgfXAU.png",B="/cswiki/assets/1666063150946-1c5db726-14b2-464c-802a-91b595f38338.-WoXEWRg.png",v="/cswiki/assets/1666063166641-8b2a33b3-2988-42a8-96ae-f815818ae9a6.x4CeesDB.png",T="/cswiki/assets/1666063175569-0ec98072-74ea-49e9-93ac-5977818c1713.LkMFI63G.png",f="/cswiki/assets/1666063184804-16848ed4-f5f1-4728-aa44-74e23018c2ed.ss1mJ4gI.png",O="/cswiki/assets/1677809486172-2601c3cb-be60-43fc-90ea-69fc0e93b06a.3agEL4Pz.jpeg",_="/cswiki/assets/1672126222980-59d062ee-7055-4dff-9588-809c16713cba.ER3FVAlA.jpeg",x="/cswiki/assets/1672133403601-474aed4a-1c77-48be-892b-4f00be308fba.DYbyNVYZ.png",w="/cswiki/assets/1672133594977-ce850e6c-dc1a-460f-aa82-9b155542f758.pv1J2f9X.png",q="/cswiki/assets/1666063463781-edb6ff39-e821-4b1c-bc94-90b3d0bc1f5d.WdkXe5Mg.png",S="/cswiki/assets/1666063463771-21974f54-25bb-4e70-bf93-af1c3fa9a87c.38kGhwGU.png",N="/cswiki/assets/1666063524941-5981dbf3-06a1-4633-a3b9-a6924cff8929.ZWQCk0uK.png",L="/cswiki/assets/1666334786914-76e2d013-5715-4b8a-8f17-30a68ac5d1e4.yPvxmlgE.png",W="/cswiki/assets/1666334475848-85b2fe09-1c9b-439f-9f3c-7f6d36dd8105.WGbJeb-V.png",j="/cswiki/assets/1666334630525-78698a87-c3a5-411f-aa06-0c9d71e1e5f8.vSh3UU2c.png",Y=JSON.parse('{"title":"è¿è´¹æœåŠ¡","description":"","frontmatter":{},"headers":[],"relativePath":"src/project/express/03-è¿è´¹æœåŠ¡.md","filePath":"src/project/express/03-è¿è´¹æœåŠ¡.md","lastUpdated":1730648753000}'),R={name:"src/project/express/03-è¿è´¹æœåŠ¡.md"},H=l("h1",{id:"è¿è´¹æœåŠ¡",tabindex:"-1"},[g("è¿è´¹æœåŠ¡ "),l("a",{class:"header-anchor",href:"#è¿è´¹æœåŠ¡","aria-label":'Permalink to "è¿è´¹æœåŠ¡"'},"â€‹")],-1),U=d('<nav class="table-of-contents"><ul><li><a href="#è¿è´¹æœåŠ¡">è¿è´¹æœåŠ¡</a><ul><li><a href="#è¯¾ç¨‹å®‰æ’">è¯¾ç¨‹å®‰æ’</a></li><li><a href="#èƒŒæ™¯è¯´æ˜">èƒŒæ™¯è¯´æ˜</a></li><li><a href="#éœ€æ±‚åˆ†æ">éœ€æ±‚åˆ†æ</a><ul><li><a href="#æ¨¡æ¿åˆ—è¡¨">æ¨¡æ¿åˆ—è¡¨</a></li><li><a href="#è®¡è´¹è§„åˆ™">è®¡è´¹è§„åˆ™</a></li><li><a href="#æ–°å¢æ¨¡æ¿">æ–°å¢æ¨¡æ¿</a><ul><li><a href="#å…¨å›½èŒƒå›´">å…¨å›½èŒƒå›´</a></li><li><a href="#ç»æµåŒºäº’å¯„">ç»æµåŒºäº’å¯„</a></li></ul></li></ul></li><li><a href="#è¿è´¹æ¨¡æ¿è¡¨">è¿è´¹æ¨¡æ¿è¡¨</a></li><li><a href="#æ‹‰å–ä»£ç ">æ‹‰å–ä»£ç </a></li><li><a href="#å®ç°ä¸šåŠ¡">å®ç°ä¸šåŠ¡</a><ul><li><a href="#æŸ¥è¯¢æ¨¡æ¿åˆ—è¡¨">æŸ¥è¯¢æ¨¡æ¿åˆ—è¡¨</a></li><li><a href="#æ–°å¢æˆ–æ›´æ–°">æ–°å¢æˆ–æ›´æ–°</a><ul><li><a href="#æ•´ä½“æµç¨‹">æ•´ä½“æµç¨‹</a></li><li><a href="#ä»£ç å®ç°">ä»£ç å®ç°</a></li><li><a href="#æµ‹è¯•">æµ‹è¯•</a></li></ul></li><li><a href="#è¿è´¹è®¡ç®—">è¿è´¹è®¡ç®—</a><ul><li><a href="#æ•´ä½“æµç¨‹-1">æ•´ä½“æµç¨‹</a></li><li><a href="#æŸ¥æ‰¾æ¨¡æ¿">æŸ¥æ‰¾æ¨¡æ¿</a></li><li><a href="#è®¡ç®—è¿è´¹">è®¡ç®—è¿è´¹</a></li><li><a href="#æµ‹è¯•-1">æµ‹è¯•</a></li><li><a href="#å¼‚å¸¸">å¼‚å¸¸</a></li><li><a href="#æµ‹è¯•ä¸¾ä¾‹">æµ‹è¯•ä¸¾ä¾‹</a></li></ul></li><li><a href="#éƒ¨ç½²">éƒ¨ç½²</a></li><li><a href="#ç”¨æˆ·ç«¯æµ‹è¯•">ç”¨æˆ·ç«¯æµ‹è¯•</a></li></ul></li><li><a href="#ç»ƒä¹ ">ç»ƒä¹ </a></li><li><a href="#é¢è¯•è¿ç¯é—®">é¢è¯•è¿ç¯é—®</a></li></ul></li></ul></nav><h2 id="è¯¾ç¨‹å®‰æ’" tabindex="-1">è¯¾ç¨‹å®‰æ’ <a class="header-anchor" href="#è¯¾ç¨‹å®‰æ’" aria-label="Permalink to &quot;è¯¾ç¨‹å®‰æ’&quot;">â€‹</a></h2><ul><li>äº†è§£è¿è´¹çš„ä¸šåŠ¡éœ€æ±‚</li><li>äº†è§£è¿è´¹æ¨¡æ¿è¡¨çš„è®¾è®¡</li><li>å®ç°è¿è´¹è®¡ç®—çš„ä¸šåŠ¡é€»è¾‘</li><li>å®Œæˆéƒ¨ç½²æœåŠ¡ä»¥åŠåŠŸèƒ½æµ‹è¯•</li></ul><h2 id="èƒŒæ™¯è¯´æ˜" tabindex="-1">èƒŒæ™¯è¯´æ˜ <a class="header-anchor" href="#èƒŒæ™¯è¯´æ˜" aria-label="Permalink to &quot;èƒŒæ™¯è¯´æ˜&quot;">â€‹</a></h2><p>ç°åœ¨å‡ºç°äº†æ–°çš„æƒ…å†µï¼Œå¼€å‘äºŒç»„ä¸€åè´Ÿè´£è¿è´¹å¾®æœåŠ¡çš„åŒäº‹å°å¼ ç¦»èŒäº†ï¼Œå¼€å‘äºŒç»„ç›®å‰äººæ‰‹ä¸è¶³ï¼Œéœ€è¦å€Ÿè°ƒå»æ¥æ‰‹è¿™ä¸ªä»»åŠ¡ï¼Œä½ éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œè¿è´¹è®¡ç®—å¾®æœåŠ¡æ˜¯æ ¸å¿ƒçš„å¾®æœåŠ¡ï¼Œä¸èƒ½å‡ºç°è®¡ç®—é”™è¯¯ï¼Œæ¯•ç«Ÿæ˜¯é’±æŒ‚é’©çš„ã€‚ å¯¹äº†ï¼Œå°å¼ ç¦»èŒå‰å·²ç»å°†è¯¥å¾®æœåŠ¡çš„åŸºæœ¬æ¡†æ¶æ­å»ºå®Œæˆäº†ï¼Œä½ åªéœ€è¦å®ç°æ ¸å¿ƒçš„ä¸šåŠ¡é€»è¾‘å°±å¯ä»¥äº†ï¼Œè¿™å¯¹ä½ æ¥è¯´å¯èƒ½æ˜¯ä¸ªå¥½æ¶ˆæ¯â€¦â€¦</p><p><img src="'+F+'" alt="ksc.gif" loading="lazy"></p><h2 id="éœ€æ±‚åˆ†æ" tabindex="-1">éœ€æ±‚åˆ†æ <a class="header-anchor" href="#éœ€æ±‚åˆ†æ" aria-label="Permalink to &quot;éœ€æ±‚åˆ†æ&quot;">â€‹</a></h2><p>æ¥åˆ°å¼€å‘ä»»åŠ¡åï¼Œé¦–å…ˆéœ€è¦äº†è§£éœ€æ±‚ï¼Œå†åŠ¨æ‰‹å¼€å‘ã€‚</p><p>è¿è´¹çš„è®¡ç®—æ˜¯åˆ†ä¸åŒåœ°åŒºçš„ï¼Œæ¯”å¦‚ï¼šåŒåŸã€çœå†…ã€è·¨çœï¼Œè®¡ç®—è§„åˆ™æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥é’ˆå¯¹ä¸åŒçš„ç±»å‹éœ€è¦è®¾ç½®ä¸åŒçš„è¿è´¹è§„åˆ™ï¼Œè¿™å…¶å®å°±æ˜¯æ‰€è°“çš„æ¨¡æ¿ã€‚</p><h3 id="æ¨¡æ¿åˆ—è¡¨" tabindex="-1">æ¨¡æ¿åˆ—è¡¨ <a class="header-anchor" href="#æ¨¡æ¿åˆ—è¡¨" aria-label="Permalink to &quot;æ¨¡æ¿åˆ—è¡¨&quot;">â€‹</a></h3><p>äº§å“éœ€æ±‚ä¸­çš„è¿è´¹æ¨¡æ¿åˆ—è¡¨ï¼š <img src="'+o+'" alt="image.png" loading="lazy"></p><div class="info custom-block"><p class="custom-block-title">INFO</p><p><strong>è½»æŠ›ç³»æ•°åç§°è§£é‡Šï¼š</strong> åœ¨è®¡ç®—è¿è´¹æ—¶ï¼ŒåŒ…è£¹æœ‰ä¸¤ä¸ªç»´åº¦ï¼Œä½“ç§¯å’Œé‡é‡ï¼ŒäºŒè€…è°å¤§å–è°è¿›è¡Œè®¡ç®—ï¼Œä½†æ˜¯ä½“ç§¯å’Œé‡é‡ä¸æ˜¯ä¸€ä¸ªå•ä½æ€ä¹ˆæ¯”è¾ƒå‘¢ï¼Ÿä¸€èˆ¬çš„åšæ³•å°±æ˜¯å°†ä½“ç§¯è½¬åŒ–æˆé‡é‡ï¼Œå…¬å¼ï¼šä½“ç§¯ / è½»æŠ›ç³»æ•° = é‡é‡ï¼Œè¿™æ ·å°±å¯ä»¥æ¯”è¾ƒäº†ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œç›¸åŒçš„ä½“ç§¯ï¼Œè½»æŠ›ç³»æ•°è¶Šå¤§è®¡ç®—å‡ºçš„é‡é‡å°±è¶Šå°ï¼Œåä¹‹å°±è¶Šå¤§ã€‚</p></div><h3 id="è®¡è´¹è§„åˆ™" tabindex="-1">è®¡è´¹è§„åˆ™ <a class="header-anchor" href="#è®¡è´¹è§„åˆ™" aria-label="Permalink to &quot;è®¡è´¹è§„åˆ™&quot;">â€‹</a></h3><p><strong>é‡é‡è®¡ç®—æ–¹æ³•ï¼š</strong> å–é‡é‡å’Œä½“ç§¯ä¸¤è€…é—´è¾ƒå¤§çš„æ•°å€¼ï¼Œä½“ç§¯è®¡ç®—æ–¹æ³•ï¼šé•¿(cm)Ã—_å®½(cm)_Ã—é«˜(cm) / è½»æŠ›ç³»æ•°</p><p><strong>æ™®å¿«ï¼š</strong> åŒåŸäº’å¯„ï¼š12000 çœå†…å¯„ä»¶ï¼š8000 è·¨çœå¯„ä»¶ï¼š12000 ç»æµåŒºäº’å¯„ï¼ˆäº¬æ´¥ç¿¼ã€æ±Ÿæµ™æ²ªï¼‰ï¼š6000 ç»æµåŒºäº’å¯„ï¼ˆé»‘å‰è¾½ï¼‰ï¼š12000 ç»æµåŒºäº’å¯„ï¼ˆå·æ¸ï¼‰ï¼š8000</p><hr><p><strong>è®¡è´¹é‡é‡å°æ•°ç‚¹è§„åˆ™ï¼š</strong></p><p>ä¸æ»¡1kgï¼ŒæŒ‰1kgè®¡è´¹ï¼› 10KGä»¥ä¸‹ï¼šä»¥0.1kgä¸ºè®¡é‡å•ä½ï¼Œå››èˆäº”å…¥ä¿ç•™ 1 ä½å°æ•°ï¼› 10-100KGï¼šç»­é‡ä»¥0.5kgä¸ºè®¡é‡å•ä½ï¼Œä¸è¶³0.5kgæŒ‰0.5kgç®—ï¼Œå››èˆäº”å…¥ä¿ç•™ 1 ä½å°æ•°ï¼› 100KGåŠä»¥ä¸Šï¼šå››èˆäº”å…¥å–æ•´ï¼›</p><blockquote><p><strong>ä¸¾ä¾‹ï¼š</strong> 8.4kgæŒ‰ç…§8.4kgæ”¶è´¹ 8.5kgæŒ‰ç…§8.5kgæ”¶è´¹ 8.8kgæŒ‰ç…§8.8kgæ”¶è´¹ 18.1kgæŒ‰ç…§18.5kgæ”¶è´¹ 18.5kgæŒ‰ç…§18.5kgæ”¶è´¹ 18.7kgæŒ‰ç…§19kgæ”¶è´¹ 108.4kgæŒ‰ç…§108kgæ”¶è´¹ 108.5kgæŒ‰ç…§109kgæ”¶è´¹ 108.6kgæŒ‰ç…§109kgæ”¶è´¹</p></blockquote><p>æ€»è¿è´¹å°æ•°ç‚¹è§„åˆ™ï¼š<strong>æŒ‰å››èˆäº”å…¥è®¡ç®—ï¼Œç²¾ç¡®åˆ°å°æ•°ç‚¹åä¸€ä½</strong></p><hr><p>æ¨¡æ¿ä¸å¯é‡å¤è®¾ç½®ï¼Œéœ€ç¡®ä¿å”¯ä¸€å€¼ã€‚ å¦‚å·²è®¾ç½®åŒåŸå¯„ã€è·¨çœå¯„ã€çœå†…å¯„ï¼Œåˆ™åªå¯ä¿®æ”¹ï¼Œä¸å¯å†æ–°å¢ å¦‚å·²è®¾ç½®ç»æµåŒºäº’å¯„æŸä¸ªåŸå¸‚ï¼Œä¸‹æ¬¡æ·»åŠ ä¸å¯å†å…³è”æ­¤ç»æµåŒºåŸå¸‚</p><h3 id="æ–°å¢æ¨¡æ¿" tabindex="-1">æ–°å¢æ¨¡æ¿ <a class="header-anchor" href="#æ–°å¢æ¨¡æ¿" aria-label="Permalink to &quot;æ–°å¢æ¨¡æ¿&quot;">â€‹</a></h3><p>è¿è´¹æ¨¡æ¿æœ‰4ç§ç±»å‹ï¼Œåˆ†åˆ«ä¸ºï¼š åŒåŸå¯„ï¼šåŒåŸå¯„ä»¶è¿è´¹è®¡ç®—æ¨¡æ¿ï¼Œå…¨å›½ç»Ÿä¸€å®šä»· çœå†…å¯„ï¼šçœå†…å¯„ä»¶è¿è´¹è®¡ç®—æ¨¡æ¿ï¼Œå…¨å›½ç»Ÿä¸€å®šä»· è·¨çœå¯„ï¼šä¸åŒçœä»½é—´çš„è¿è´¹è®¡ç®—æ¨¡æ¿ï¼Œå…¨å›½ç»Ÿä¸€å®šä»· ç»æµåŒºäº’å¯„ï¼š4ä¸ªç»æµåŒºï¼ˆäº¬æ´¥ç¿¼ã€æ±Ÿæ²ªæµ™çš–ã€å·æ¸ã€é»‘å‰è¾½ï¼‰ï¼Œç»æµåŒºé—´å¯„ä»¶å¯è®¾ç½®ä¼˜æƒ ä»·æ ¼</p><h4 id="å…¨å›½èŒƒå›´" tabindex="-1">å…¨å›½èŒƒå›´ <a class="header-anchor" href="#å…¨å›½èŒƒå›´" aria-label="Permalink to &quot;å…¨å›½èŒƒå›´&quot;">â€‹</a></h4><p><img src="'+D+'" alt="image-20220802121447879.png" loading="lazy"></p><p>æ­¤æ¨¡æ¿ä¸ºâ€˜åŒåŸå¯„/çœå†…å¯„/è·¨çœâ€™ä¸‰ä¸ªç±»å‹çš„è¿è´¹æ¨¡æ¿ æ¨¡æ¿ç±»å‹ï¼šå¯é€‰æ‹©åŒåŸå¯„/çœå†…å¯„/è·¨çœ/ç»æµåŒºäº’å¯„ è¿é€ç±»å‹ï¼šå¯é€‰æ‹©è¿é€ç±»å‹ï¼Œç›®å‰ä¸šåŠ¡åªæ”¯æŒæ™®å¿« å…³è”åŸå¸‚ï¼š åŒåŸå¯„/çœå†…å¯„/è·¨çœï¼šå…¨å›½ç»Ÿä¸€å®šä»·ï¼ˆå¦‚ä¸Šå›¾ï¼‰ é¦–é‡ä»·æ ¼ï¼šä¿ç•™å°æ•°ç‚¹åä¸€ä½ï¼Œå¯è¾“å…¥1-999é—´ä»»æ„æ•°å€¼ ç»­é‡ä»·æ ¼ï¼šä¿ç•™å°æ•°ç‚¹åä¸€ä½ï¼Œå¯è¾“å…¥1-999é—´ä»»æ„æ•°å€¼ è½»æŠ›ç³»æ•°ï¼šæ•´æ•°ï¼Œå¯è¾“å…¥1-99999é—´ï¼Œä»»æ„æ•°å€¼</p><h4 id="ç»æµåŒºäº’å¯„" tabindex="-1">ç»æµåŒºäº’å¯„ <a class="header-anchor" href="#ç»æµåŒºäº’å¯„" aria-label="Permalink to &quot;ç»æµåŒºäº’å¯„&quot;">â€‹</a></h4><p><img src="'+A+'" alt="image-20220802120200185.png" loading="lazy"></p><p>æ­¤æ¨¡æ¿ä¸ºâ€˜ç»æµåŒºäº’å¯„â€™ç±»å‹çš„è¿è´¹æ¨¡æ¿ æ¨¡æ¿ç±»å‹ï¼šå¯é€‰æ‹©åŒåŸå¯„/çœå†…å¯„/è·¨çœ/ç»æµåŒºäº’å¯„ è¿é€ç±»å‹ï¼šå¯é€‰æ‹©è¿é€ç±»å‹ï¼Œç›®å‰ä¸šåŠ¡åªæ”¯æŒæ™®å¿« å…³è”åŸå¸‚ï¼š ç»æµåŒºäº’å¯„ï¼šå¯è®¾ç½®å•ä¸ªæˆ–å¤šä¸ªç»æµåŒºä»·æ ¼ï¼ˆå¦‚ä¸Šå›¾ï¼‰ é¦–é‡ä»·æ ¼ï¼šä¿ç•™å°æ•°ç‚¹åä¸€ä½ï¼Œå¯è¾“å…¥1-999é—´ä»»æ„æ•°å€¼ ç»­é‡ä»·æ ¼ï¼šä¿ç•™å°æ•°ç‚¹åä¸€ä½ï¼Œå¯è¾“å…¥1-999é—´ä»»æ„æ•°å€¼ è½»æŠ›ç³»æ•°ï¼šæ•´æ•°ï¼Œå¯è¾“å…¥1-99999é—´ï¼Œä»»æ„æ•°å€¼</p><h2 id="è¿è´¹æ¨¡æ¿è¡¨" tabindex="-1">è¿è´¹æ¨¡æ¿è¡¨ <a class="header-anchor" href="#è¿è´¹æ¨¡æ¿è¡¨" aria-label="Permalink to &quot;è¿è´¹æ¨¡æ¿è¡¨&quot;">â€‹</a></h2><p>è¿è´¹æ¨¡æ¿æ˜¯éœ€è¦å­˜å‚¨åˆ°è¡¨ä¸­çš„ï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦è®¾è®¡è¡¨ç»“æ„ï¼Œå…·ä½“è¡¨ç»“æ„è¯­å¥å¦‚ä¸‹ï¼š</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sl_carriage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">` (</span></span>\n<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;è¿è´¹æ¨¡æ¿id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `template_type`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> tinyint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ¨¡æ¿ç±»å‹ï¼Œ1-åŒåŸå¯„ 2-çœå†…å¯„ 3-ç»æµåŒºäº’å¯„ 4-è·¨çœ&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `transport_type`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> tinyint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;è¿é€ç±»å‹ï¼Œ1-æ™®å¿« 2-ç‰¹å¿«&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `associated_city`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4_general_ci </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å…³è”åŸå¸‚ï¼Œ1-å…¨å›½ 2-äº¬æ´¥å†€ 3-æ±Ÿæµ™æ²ª 4-å·æ¸ 5-é»‘å‰è¾½&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `first_weight`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> double </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;é¦–é‡ä»·æ ¼&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `continuous_weight`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> double </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç»­é‡ä»·æ ¼&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `light_throwing_coefficient`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;è½»æŠ›ç³»æ•°&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `created`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> datetime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `updated`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> datetime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ›´æ–°æ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">InnoDB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CHARSET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">utf8mb4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">utf8mb4_general_ci ROW_FORMAT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=DYNAMIC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;è¿è´¹æ¨¡æ¿è¡¨&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>è¯´æ˜ï¼šç”±äºè¯¥è¡¨æ•°æ®æ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦æ·»åŠ ç´¢å¼•å­—æ®µäº†ã€‚</p></div><p>åœ¨æ•°æ®åº“ä¸­å·²ç»é¢„å­˜äº†7æ¡æ•°æ®ï¼š <img src="'+C+'" alt="image.png" loading="lazy"></p><blockquote><p>ğŸš¨ ç‰¹åˆ«éœ€è¦æ³¨æ„associated_cityå­—æ®µï¼Œå¦‚æœå¤šä¸ªç»æµåŒºäº’å¯„åŸå¸‚å…±ç”¨ä¸€å¥—æ¨¡æ¿ï¼Œå…¶æ•°æ®æ˜¯é€šè¿‡é€—å·åˆ†å‰²å­˜å‚¨çš„ï¼Œå¦‚ä¸‹ï¼š <img src="'+m+`" alt="image.png" loading="lazy"></p></blockquote><h2 id="æ‹‰å–ä»£ç " tabindex="-1">æ‹‰å–ä»£ç  <a class="header-anchor" href="#æ‹‰å–ä»£ç " aria-label="Permalink to &quot;æ‹‰å–ä»£ç &quot;">â€‹</a></h2><p>éœ€è¦æ‹‰å–çš„å·¥ç¨‹æœ‰3ä¸ªï¼š</p><table><thead><tr><th>å·¥ç¨‹å</th><th>gitåœ°å€</th></tr></thead><tbody><tr><td>sl-express-ms-carriage-domain</td><td><a href="http://git.sl-express.com/sl/sl-express-ms-carriage-domain.git" target="_blank" rel="noreferrer">http://git.sl-express.com/sl/sl-express-ms-carriage-domain.git</a></td></tr><tr><td>sl-express-ms-carriage-api</td><td><a href="http://git.sl-express.com/sl/sl-express-ms-carriage-api.git" target="_blank" rel="noreferrer">http://git.sl-express.com/sl/sl-express-ms-carriage-api.git</a></td></tr><tr><td>sl-express-ms-carriage-service</td><td><a href="http://git.sl-express.com/sl/sl-express-ms-carriage-service.git" target="_blank" rel="noreferrer">http://git.sl-express.com/sl/sl-express-ms-carriage-service.git</a></td></tr></tbody></table><h2 id="å®ç°ä¸šåŠ¡" tabindex="-1">å®ç°ä¸šåŠ¡ <a class="header-anchor" href="#å®ç°ä¸šåŠ¡" aria-label="Permalink to &quot;å®ç°ä¸šåŠ¡&quot;">â€‹</a></h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦ç¼–å†™ä»£ç å®ç°å…·ä½“çš„ä¸šåŠ¡äº†ï¼ŒåŒäº‹å°å¼ å·²ç»å®ŒæˆåŸºæœ¬çš„ä»£ç æ¡†æ¶ï¼ŒåŒ…æ‹¬Controllerã€Serviceæ¥å£ç­‰ï¼Œæˆ‘ä»¬åªéœ€è¦å®ç°CarriageServiceå³å¯ã€‚éœ€è¦å®ç°4ä¸ªæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.service;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.baomidou.mybatisplus.extension.service.IService;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.dto.CarriageDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.dto.WaybillDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.entity.CarriageEntity;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * è¿è´¹ç®¡ç†è¡¨ æœåŠ¡ç±»</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CarriageService</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CarriageEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * æ–°å¢/ä¿®æ”¹è¿è´¹æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> carriageDto</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> æ–°å¢/ä¿®æ”¹è¿è´¹å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *                    å¿…å¡«å­—æ®µï¼štemplateTypeã€transportType</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *                    æ›´æ–°æ—¶ä¼ å…¥idå­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    CarriageDTO </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">saveOrUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">carriageDto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * è·å–å…¨éƒ¨è¿è´¹æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è¿è´¹æ¨¡æ¿å¯¹è±¡åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CarriageDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * è¿è´¹è®¡ç®—</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> waybillDTO</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è¿è´¹è®¡ç®—å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è¿è´¹æ¨¡æ¿å¯¹è±¡ï¼Œä¸ä»…åŒ…å«æ¨¡æ¿æ•°æ®è¿˜åŒ…å«ï¼šcomputeWeightã€expense å­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    CarriageDTO </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">compute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(WaybillDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">waybillDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * æ ¹æ®æ¨¡æ¿ç±»å‹æŸ¥è¯¢æ¨¡æ¿ï¼Œç»æµåŒºäº’å¯„ä¸é€šè¿‡è¯¥æ–¹æ³•æŸ¥è¯¢æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> templateType</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> æ¨¡æ¿ç±»å‹ï¼š1-åŒåŸå¯„ï¼Œ2-çœå†…å¯„ï¼Œ4-è·¨çœ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è¿è´¹æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    CarriageEntity </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findByTemplateType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Integer </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">templateType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="æŸ¥è¯¢æ¨¡æ¿åˆ—è¡¨" tabindex="-1">æŸ¥è¯¢æ¨¡æ¿åˆ—è¡¨ <a class="header-anchor" href="#æŸ¥è¯¢æ¨¡æ¿åˆ—è¡¨" aria-label="Permalink to &quot;æŸ¥è¯¢æ¨¡æ¿åˆ—è¡¨&quot;">â€‹</a></h3><p>ç¼–å†™<code>com.sl.ms.carriage.service.impl.CarriageServiceImpl</code>å®ç°ç±»ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Service</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CarriageServiceImpl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ServiceImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CarriageMapper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CarriageEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CarriageService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageDTO </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">saveOrUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">carriageDto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CarriageDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageDTO </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">compute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(WaybillDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">waybillDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageEntity </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findByTemplateType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Integer </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">templateType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(templateType, CarriageConstant.ECONOMIC_ZONE)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SLException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageExceptionEnum.METHOD_CALL_ERROR);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        LambdaQueryWrapper&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CarriageEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; queryWrapper </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Wrappers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lambdaQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageEntity.class)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageEntity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getTemplateType, templateType)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageEntity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getTransportType, CarriageConstant.REGULAR_FAST);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getOne</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(queryWrapper);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æŸ¥è¯¢åˆ—è¡¨ï¼Œéœ€è¦æŒ‰ç…§åˆ›å»ºæ—¶é—´å€’åºæ’åºï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CarriageDTO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ„é€ æŸ¥è¯¢æ¡ä»¶ï¼ŒæŒ‰åˆ›å»ºæ—¶é—´å€’åº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        LambdaQueryWrapper&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CarriageEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; queryWrapper </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Wrappers.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CarriageEntity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lambdaQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">orderByDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageEntity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getCreated);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æŸ¥è¯¢æ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CarriageEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; list </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(queryWrapper);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // å°†ç»“æœè½¬æ¢ä¸ºDTOç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> list.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageUtils</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">toDTO).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">collect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Collectors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š</p><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>å¦‚æœå·¥ç¨‹ä¸­ä¸å­˜åœ¨testç›®å½•ï¼Œéœ€è¦å…ˆåˆ›å»ºtestç›®å½•å†ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š <img src="`+u+'" alt="image.png" loading="lazy"><img src="'+b+'" alt="image.png" loading="lazy"></p></div><p><img src="'+B+`" alt="image-20220803165615460.png" loading="lazy"></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.service;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.constant.CarriageConstant;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.dto.CarriageDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.entity.CarriageEntity;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.junit.jupiter.api.Test;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.test.context.SpringBootTest;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.annotation.Resource;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.junit.jupiter.api.Assertions.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SpringBootTest</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CarriageServiceTest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageService carriageService;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> saveOrUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CarriageDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; list </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.carriageService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (CarriageDTO carriageDTO </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> list) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carriageDTO);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> compute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findByTemplateType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CarriageEntity carriageEntity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.carriageService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findByTemplateType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageConstant.SAME_CITY);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carriageEntity);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æµ‹è¯•ç»“æœï¼š <img src="`+v+'" alt="image-20220803165931427.png" loading="lazy"> ä¹Ÿå¯ä»¥åŸºäºswaggeræµ‹è¯•ï¼š</p><p>urlåœ°å€ï¼š<a href="http://127.0.0.1:18094/doc.html" target="_blank" rel="noreferrer">http://127.0.0.1:18094/doc.html</a></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»æŸ¥è¯¢åˆ°äº†æ•°æ®ï¼š</p><p><img src="'+T+'" alt="image-20220803170150014.png" loading="lazy"></p><p>æ•´åˆåˆ°åå°ç®¡ç†ç³»ç»Ÿä¸­ï¼š</p><p><img src="'+f+'" alt="image-20220806102317871.png" loading="lazy"></p><h3 id="æ–°å¢æˆ–æ›´æ–°" tabindex="-1">æ–°å¢æˆ–æ›´æ–° <a class="header-anchor" href="#æ–°å¢æˆ–æ›´æ–°" aria-label="Permalink to &quot;æ–°å¢æˆ–æ›´æ–°&quot;">â€‹</a></h3><h4 id="æ•´ä½“æµç¨‹" tabindex="-1">æ•´ä½“æµç¨‹ <a class="header-anchor" href="#æ•´ä½“æµç¨‹" aria-label="Permalink to &quot;æ•´ä½“æµç¨‹&quot;">â€‹</a></h4><p><img src="'+O+`" alt="" loading="lazy"></p><p>æµç¨‹è¯´æ˜ï¼š</p><ul><li>æ ¹æ®ä¼ å…¥çš„CarriageDTOå¯¹è±¡å‚æ•°è¿›è¡ŒæŸ¥è¯¢æ¨¡æ¿ï¼Œå¹¶ä¸”åˆ¤æ–­æ˜¯å¦ä¸ºç»æµåŒº</li><li>å¦‚æœæ˜¯éç»æµåŒºäº’å¯„ï¼Œéœ€è¦è¿›ä¸€æ­¥åˆ¤æ–­æ¨¡æ¿æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºæ–°å¢æ“ä½œï¼Œå¦‚æœæ˜¯æ–°å¢æ“ä½œå°±æŠ›å‡ºå¼‚å¸¸ï¼Œå…¶ä»–æƒ…å†µéƒ½å¯ä»¥è¿›è¡Œè½åº“</li><li>å¦‚æœæ˜¯ç»æµåŒºäº’å¯„ï¼Œéœ€è¦åˆ¤æ–­å…³è”åŸå¸‚æ˜¯å¦é‡å¤ï¼Œå¦‚æœé‡å¤æŠ›å‡ºå¼‚å¸¸ï¼Œå¦åˆ™è¿›è¡Œè½åº“æ“ä½œ<div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>â“æ¨¡æ¿ä¸ºä»€ä¹ˆä¸èƒ½é‡å¤ï¼Ÿ å› ä¸ºè¿è´¹çš„è®¡ç®—æ˜¯é€šè¿‡æ¨¡æ¿è¿›è¡Œçš„ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªæ¨¡æ¿ï¼Œè¯¥åŸºäºå“ªä¸ªæ¨¡æ¿è®¡ç®—å‘¢ï¼Ÿæ‰€ä»¥æ¨¡æ¿æ˜¯ä¸èƒ½é‡å¤çš„ã€‚</p></div></li></ul><h4 id="ä»£ç å®ç°" tabindex="-1">ä»£ç å®ç° <a class="header-anchor" href="#ä»£ç å®ç°" aria-label="Permalink to &quot;ä»£ç å®ç°&quot;">â€‹</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageDTO </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">saveOrUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageDTO carriageDto) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        log.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ–°å¢è¿è´¹æ¨¡æ¿ --&gt; {}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, carriageDto);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //æ€è·¯ï¼šé¦–å…ˆæ ¹æ®æ¡ä»¶æŸ¥è¯¢è¿è´¹æ¨¡æ¿ï¼Œåˆ¤æ–­æ¨¡æ¿æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ç›´æ¥æ–°å¢</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //å¦‚æœå­˜åœ¨ï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºç»æµåŒºäº’å¯„ï¼Œå¦‚æœä¸æ˜¯ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœæ˜¯ï¼Œéœ€è¦è¿›ä¸€æ­¥åˆ¤æ–­æ‰€å…³è”çš„åŸå¸‚æ˜¯å¦é‡å¤</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //å¦‚æœé‡å¤ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœä¸é‡å¤è¿›è¡Œæ–°å¢æˆ–æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        LambdaQueryWrapper&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CarriageEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; queryWrapper </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Wrappers.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CarriageEntity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lambdaQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageEntity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getTemplateType, carriageDto.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTemplateType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageEntity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getTransportType, CarriageConstant.REGULAR_FAST);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //æŸ¥è¯¢åˆ°æ¨¡æ¿åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CarriageEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; carriageList </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(queryWrapper);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">notEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carriageDto.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTemplateType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), CarriageConstant.ECONOMIC_ZONE)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // éç»æµåŒºäº’å¯„çš„æƒ…å†µä¸‹ï¼Œéœ€è¦åˆ¤æ–­æŸ¥è¯¢çš„æ¨¡æ¿æ˜¯å¦ä¸ºç©º</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // å¦‚æœä¸ä¸ºç©ºå¹¶ä¸”å…¥å‚çš„å‚æ•°idä¸ºç©ºï¼Œè¯´æ˜æ˜¯æ–°å¢æ“ä½œï¼Œéç»æµåŒºåªèƒ½æœ‰ä¸€ä¸ªæ¨¡æ¿ï¼Œéœ€è¦æŠ›å‡ºå¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isNotEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carriageList) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carriageDto.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // æ–°å¢æ“ä½œï¼Œæ¨¡æ¿é‡å¤ï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SLException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageExceptionEnum.NOT_ECONOMIC_ZONE_REPEAT);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //æ–°å¢æˆ–æ›´æ–°éç»æµåŒºæ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">saveOrUpdateCarriage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carriageDto);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //åˆ¤æ–­æ¨¡æ¿æ‰€å…³è”çš„åŸå¸‚æ˜¯å¦æœ‰é‡å¤</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //æŸ¥è¯¢å…¶ä»–æ¨¡æ¿ä¸­æ‰€æœ‰çš„ç»æµåŒºåˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; associatedCityList </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StreamUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carriageList)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                //æ’é™¤æ‰è‡ªå·±ï¼Œæ£€æŸ¥ä¸å…¶ä»–æ¨¡æ¿æ˜¯å¦å­˜åœ¨å†²çª</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carriageEntity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">notEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carriageEntity.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), carriageDto.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                //è·å–å…³è”åŸå¸‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageEntity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getAssociatedCity)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                //å°†å…³è”åŸå¸‚æŒ‰ç…§é€—å·åˆ†å‰²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(associatedCity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StrUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(associatedCity, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;,&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                //å°†ä¸Šé¢å¾—åˆ°çš„é›†åˆå±•å¼€ï¼Œå¾—åˆ°å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flatMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(StreamUtil</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">of)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                //æ”¶é›†åˆ°é›†åˆä¸­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">collect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Collectors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //æŸ¥çœ‹å½“å‰æ–°å¢ç»æµåŒºæ˜¯å¦å­˜åœ¨é‡å¤ï¼Œå–äº¤é›†æ¥åˆ¤æ–­æ˜¯å¦é‡å¤</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Collection&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; intersection </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CollUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">intersection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(associatedCityList, carriageDto.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAssociatedCityList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (CollUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isNotEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(intersection)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //æœ‰é‡å¤</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SLException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageExceptionEnum.ECONOMIC_ZONE_CITY_REPEAT);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //æ–°å¢æˆ–æ›´æ–°ç»æµåŒºæ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">saveOrUpdateCarriage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carriageDto);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><h4 id="æµ‹è¯•" tabindex="-1">æµ‹è¯• <a class="header-anchor" href="#æµ‹è¯•" aria-label="Permalink to &quot;æµ‹è¯•&quot;">â€‹</a></h4><p>ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageService carriageService;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> saveOrUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CarriageDTO carriageDTO </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CarriageDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        carriageDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTemplateType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        carriageDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTransportType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        carriageDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAssociatedCityList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Arrays.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">asList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        carriageDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setFirstWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        carriageDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setContinuousWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        carriageDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setLightThrowingCoefficient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CarriageDTO dto </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.carriageService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">saveOrUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carriageDTO);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dto);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><h3 id="è¿è´¹è®¡ç®—" tabindex="-1">è¿è´¹è®¡ç®— <a class="header-anchor" href="#è¿è´¹è®¡ç®—" aria-label="Permalink to &quot;è¿è´¹è®¡ç®—&quot;">â€‹</a></h3><h4 id="æ•´ä½“æµç¨‹-1" tabindex="-1">æ•´ä½“æµç¨‹ <a class="header-anchor" href="#æ•´ä½“æµç¨‹-1" aria-label="Permalink to &quot;æ•´ä½“æµç¨‹&quot;">â€‹</a></h4><p><img src="`+_+`" alt="" loading="lazy"></p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>è¯´æ˜ï¼š</p><ul><li>è¿è´¹æ¨¡æ¿ä¼˜å…ˆçº§ï¼šåŒåŸ&gt;çœå†…&gt;ç»æµåŒºäº’å¯„&gt;è·¨çœ</li><li>å°†ä½“ç§¯è½¬åŒ–æˆé‡é‡ï¼Œä¸é‡é‡æ¯”è¾ƒï¼Œå–å¤§å€¼</li></ul></div><h4 id="æŸ¥æ‰¾æ¨¡æ¿" tabindex="-1">æŸ¥æ‰¾æ¨¡æ¿ <a class="header-anchor" href="#æŸ¥æ‰¾æ¨¡æ¿" aria-label="Permalink to &quot;æŸ¥æ‰¾æ¨¡æ¿&quot;">â€‹</a></h4><p>åœ¨ä¸Šè¿°çš„æµç¨‹å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œè®¡ç®—è¿è´¹çš„ç¬¬ä¸€æ­¥é€»è¾‘å°±æ˜¯éœ€è¦æŸ¥æ‰¾åˆ°å¯¹åº”çš„è¿è´¹æ¨¡æ¿ï¼Œå¦åˆ™ä¸èƒ½è¿›è¡Œè®¡ç®—ï¼Œå¦‚ä½•å®ç°æ¯”è¾ƒå¥½å‘¢ï¼Œæˆ‘ä»¬è¿™é‡Œé‡‡ç”¨ã€è´£ä»»é“¾ã€‘æ¨¡å¼è¿›è¡Œä»£ç ç¼–å†™ã€‚ ä¹‹æ‰€ä»¥é‡‡ç”¨ã€è´£ä»»é“¾ã€‘æ¨¡å¼ï¼Œæ˜¯å› ä¸ºåœ¨æŸ¥æ‰¾æ¨¡æ¿æ—¶ï¼Œä¸åŒçš„æ¨¡æ¿å¤„ç†é€»è¾‘ä¸åŒï¼Œå¹¶ä¸”è¿™äº›é€»è¾‘ç»„æˆäº†ä¸€æ¡å¤„ç†é“¾ï¼Œæœ‰å¼€å¤´æœ‰ç»“å°¾ï¼Œåªè¦èƒ½æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æ¨¡æ¿å³ç»“æŸã€‚</p><p>é¦–å…ˆï¼Œå®šä¹‰è¿è´¹æ¨¡æ¿å¤„ç†é“¾ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.handler;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.dto.WaybillDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.entity.CarriageEntity;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * è¿è´¹æ¨¡æ¿å¤„ç†é“¾çš„æŠ½è±¡å®šä¹‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbstractCarriageChainHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AbstractCarriageChainHandler nextHandler;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * æ‰§è¡Œè¿‡æ»¤æ–¹æ³•ï¼Œé€šè¿‡è¾“å…¥å‚æ•°æŸ¥æ‰¾è¿è´¹æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> waybillDTO</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è¾“å…¥å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è¿è´¹æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> abstract</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageEntity </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(WaybillDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">waybillDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * æ‰§è¡Œä¸‹ä¸€ä¸ªå¤„ç†å™¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> waybillDTO</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     è¾“å…¥å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> carriageEntity</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ä¸Šä¸ªhandlerå¤„ç†å¾—åˆ°çš„å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageEntity </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doNextHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(WaybillDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">waybillDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, CarriageEntity </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">carriageEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (nextHandler </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> carriageEntity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //å¦‚æœä¸‹æ¸¸Handlerä¸ºç©º æˆ– ä¸Šä¸ªHandlerå·²ç»æ‰¾åˆ°è¿è´¹æ¨¡æ¿å°±è¿”å›</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> carriageEntity;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nextHandler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * è®¾ç½®ä¸‹æ¸¸Handler</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> nextHandler</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ä¸‹æ¸¸Handler</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setNextHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AbstractCarriageChainHandler </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">nextHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.nextHandler </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nextHandler;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ä¸‹é¢é’ˆå¯¹ä¸åŒçš„æ¨¡æ¿ç­–ç•¥ç¼–å†™å…·ä½“çš„å®ç°ç±»ï¼ŒåŒåŸå¯„ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.handler;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.constant.CarriageConstant;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.dto.WaybillDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.entity.CarriageEntity;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.service.CarriageService;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.transport.common.util.ObjectUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.core.annotation.Order;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Component;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.annotation.Resource;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * åŒåŸå¯„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Order</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å®šä¹‰é¡ºåº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SameCityChainHandler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbstractCarriageChainHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageService carriageService;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageEntity </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(WaybillDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">waybillDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CarriageEntity carriageEntity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getReceiverCityId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), waybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSenderCityId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //åŒåŸ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            carriageEntity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.carriageService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findByTemplateType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageConstant.SAME_CITY);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doNextHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO, carriageEntity);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>çœå†…å¯„ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.handler;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.base.api.common.AreaFeign;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.constant.CarriageConstant;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.dto.WaybillDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.entity.CarriageEntity;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.service.CarriageService;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.transport.common.util.ObjectUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.core.annotation.Order;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Component;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.annotation.Resource;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * çœå†…å¯„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Order</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å®šä¹‰é¡ºåº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SameProvinceChainHandler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbstractCarriageChainHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageService carriageService;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AreaFeign areaFeign;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageEntity </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(WaybillDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">waybillDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CarriageEntity carriageEntity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // è·å–æ”¶å¯„ä»¶åœ°å€çœä»½id</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Long receiverProvinceId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.areaFeign.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getReceiverCityId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParentId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Long senderProvinceId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.areaFeign.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSenderCityId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParentId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(receiverProvinceId, senderProvinceId)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //çœå†…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            carriageEntity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.carriageService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findByTemplateType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageConstant.SAME_PROVINCE);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doNextHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO, carriageEntity);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ç»æµåŒºäº’å¯„ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.handler;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cn.hutool.core.util.ArrayUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cn.hutool.core.util.EnumUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.baomidou.mybatisplus.core.toolkit.Wrappers;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.base.api.common.AreaFeign;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.constant.CarriageConstant;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.dto.WaybillDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.enums.EconomicRegionEnum;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.entity.CarriageEntity;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.service.CarriageService;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.transport.common.util.ObjectUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.core.annotation.Order;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Component;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.annotation.Resource;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.LinkedHashMap;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * ç»æµåŒºäº’å¯„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Order</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å®šä¹‰é¡ºåº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EconomicZoneChainHandler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbstractCarriageChainHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageService carriageService;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AreaFeign areaFeign;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageEntity </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(WaybillDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">waybillDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CarriageEntity carriageEntity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // è·å–æ”¶å¯„ä»¶åœ°å€çœä»½id</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Long receiverProvinceId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.areaFeign.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getReceiverCityId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParentId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Long senderProvinceId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.areaFeign.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSenderCityId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParentId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //è·å–ç»æµåŒºåŸå¸‚é…ç½®æšä¸¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        LinkedHashMap&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EconomicRegionEnum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; EconomicRegionMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EnumUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getEnumMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(EconomicRegionEnum.class);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        EconomicRegionEnum economicRegionEnum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (EconomicRegionEnum regionEnum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EconomicRegionMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">values</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //è¯¥ç»æµåŒºæ˜¯å¦å…¨éƒ¨åŒ…å«æ”¶å‘ä»¶çœid</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ArrayUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">containsAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(regionEnum.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), receiverProvinceId, senderProvinceId);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (result) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                economicRegionEnum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> regionEnum;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isNotEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(economicRegionEnum)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //æ ¹æ®ç±»å‹ç¼–ç æŸ¥è¯¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            LambdaQueryWrapper&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CarriageEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; queryWrapper </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Wrappers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lambdaQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageEntity.class)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageEntity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getTemplateType, CarriageConstant.ECONOMIC_ZONE)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageEntity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getTransportType, CarriageConstant.REGULAR_FAST)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">like</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageEntity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getAssociatedCity, economicRegionEnum.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            carriageEntity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.carriageService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getOne</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(queryWrapper);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doNextHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO, carriageEntity);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>è·¨çœå¯„ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.handler;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.constant.CarriageConstant;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.dto.WaybillDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.entity.CarriageEntity;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.service.CarriageService;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.core.annotation.Order;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Component;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.annotation.Resource;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * è·¨çœ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Order</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å®šä¹‰é¡ºåº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TransProvinceChainHandler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbstractCarriageChainHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageService carriageService;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageEntity </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(WaybillDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">waybillDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CarriageEntity carriageEntity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.carriageService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findByTemplateType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CarriageConstant.TRANS_PROVINCE);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doNextHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO, carriageEntity);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ç»„è£…å¤„ç†é“¾ï¼ŒæŒ‰ç…§<code>@Order</code>æ³¨è§£ä¸­çš„å€¼ï¼Œç”±å°åˆ°å¤§æ’åºã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.handler;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cn.hutool.core.collection.CollUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.dto.WaybillDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.entity.CarriageEntity;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.transport.common.exception.SLException;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Component;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.annotation.PostConstruct;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.annotation.Resource;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * æŸ¥æ‰¾è¿è´¹æ¨¡æ¿å¤„ç†é“¾ @Orderæ³¨è§£</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CarriageChainHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * åˆ©ç”¨Springæ³¨å…¥ç‰¹æ€§ï¼ŒæŒ‰ç…§ @Order ä»å°åˆ°è¾¾æ’åºæ³¨å…¥åˆ°é›†åˆä¸­</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">AbstractCarriageChainHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; chainHandlers;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AbstractCarriageChainHandler firstHandler;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * ç»„è£…å¤„ç†é“¾</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PostConstruct</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> constructChain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (CollUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chainHandlers)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SLException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;not found carriage chain handler!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //å¤„ç†é“¾ä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        firstHandler </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chainHandlers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chainHandlers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chainHandlers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                //æœ€åä¸€ä¸ªå¤„ç†é“¾èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                chainHandlers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNextHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                //è®¾ç½®ä¸‹æ¸¸èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                chainHandlers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNextHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chainHandlers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageEntity </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findCarriage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(WaybillDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">waybillDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //ä»ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> firstHandler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æµ‹è¯•ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.handler;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.domain.dto.WaybillDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.carriage.entity.CarriageEntity;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.junit.jupiter.api.Test;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.test.context.SpringBootTest;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.annotation.Resource;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SpringBootTest</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CarriageChainHandlerTest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageChainHandler carriageChainHandler;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findCarriage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        WaybillDTO waybillDTO </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> WaybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">builder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">senderCityId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//åŒ—äº¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">receiverCityId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">161793L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//ä¸Šæµ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">volume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CarriageEntity carriage </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.carriageChainHandler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findCarriage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carriage);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æ³¨å…¥çš„å¤„ç†é“¾é›†åˆå¯¹è±¡ï¼š <img src="`+x+'" alt="image.png" loading="lazy"> æµ‹è¯•ç»“æœï¼ŒæŸ¥è¯¢åˆ°è·¨çœçš„æ¨¡æ¿ï¼Œç»“æœç¬¦åˆé¢„æœŸï¼š <img src="'+w+`" alt="image.png" loading="lazy"></p><h4 id="è®¡ç®—è¿è´¹" tabindex="-1">è®¡ç®—è¿è´¹ <a class="header-anchor" href="#è®¡ç®—è¿è´¹" aria-label="Permalink to &quot;è®¡ç®—è¿è´¹&quot;">â€‹</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageDTO </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">compute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(WaybillDTO waybillDTO) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //æ ¹æ®å‚æ•°æŸ¥æ‰¾è¿è´¹æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CarriageEntity carriage </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.carriageChainHandler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findCarriage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //è®¡ç®—é‡é‡ï¼Œç¡®ä¿æœ€å°é‡é‡ä¸º1kg</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> computeWeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getComputeWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO, carriage);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //è®¡ç®—è¿è´¹ï¼Œé¦–é‡ + ç»­é‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> expense </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> carriage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getFirstWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((computeWeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> carriage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContinuousWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //ä¿ç•™ä¸€ä½å°æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        expense </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NumberUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">round</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(expense, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doubleValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //å°è£…è¿è´¹å’Œè®¡ç®—é‡é‡åˆ°DTOï¼Œå¹¶è¿”å›</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CarriageDTO carriageDTO </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CarriageUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carriage);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        carriageDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setExpense</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(expense);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        carriageDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setComputeWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(computeWeight);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> carriageDTO;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * æ ¹æ®ä½“ç§¯å‚æ•°ä¸å®é™…é‡é‡è®¡ç®—è®¡è´¹é‡é‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> waybillDTO</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è¿è´¹è®¡ç®—å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> carriage</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   è¿è´¹æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è®¡è´¹é‡é‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> double</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getComputeWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(WaybillDTO waybillDTO, CarriageEntity carriage) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //è®¡ç®—ä½“ç§¯ï¼Œå¦‚æœä¼ å…¥ä½“ç§¯ä¸éœ€è¦è®¡ç®—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Integer volume </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> waybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getVolume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(volume)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                //é•¿*å®½*é«˜è®¡ç®—ä½“ç§¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                volume </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> waybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMeasureLong</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> waybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMeasureWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> waybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMeasureHigh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                //è®¡ç®—å‡ºé”™è®¾ç½®ä½“ç§¯ä¸º0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                volume </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // è®¡ç®—ä½“ç§¯é‡é‡ï¼Œä½“ç§¯ / è½»æŠ›ç³»æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        BigDecimal volumeWeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NumberUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(volume, carriage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getLightThrowingCoefficient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //å–å¤§å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> computeWeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NumberUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(volumeWeight.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doubleValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), NumberUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">round</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doubleValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //è®¡ç®—ç»­é‡ï¼Œè§„åˆ™ï¼šä¸æ»¡1kgï¼ŒæŒ‰1kgè®¡è´¹ï¼›10kgä»¥ä¸‹ç»­é‡ä»¥0.1kgè®¡é‡ä¿ç•™1ä½å°æ•°ï¼›10-100kgç»­é‡ä»¥0.5kgè®¡é‡ä¿ç•™1ä½å°æ•°ï¼›100kgä»¥ä¸Šå››èˆäº”å…¥å–æ•´</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (computeWeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (computeWeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> computeWeight;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ä¸¾ä¾‹ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 108.4kgæŒ‰ç…§108kgæ”¶è´¹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 108.5kgæŒ‰ç…§109kgæ”¶è´¹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 108.6kgæŒ‰ç…§109kgæ”¶è´¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (computeWeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NumberUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">round</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(computeWeight, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doubleValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //0.5ä¸ºä¸€ä¸ªè®¡ç®—å•ä½ï¼Œä¸¾ä¾‹ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 18.8kgæŒ‰ç…§19æ”¶è´¹ï¼Œ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 18.4kgæŒ‰ç…§18.5kgæ”¶è´¹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 18.1kgæŒ‰ç…§18.5kgæ”¶è´¹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 18.6kgæŒ‰ç…§19æ”¶è´¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> integer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NumberUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">round</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(computeWeight, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, RoundingMode.DOWN).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">intValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (NumberUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sub</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(computeWeight, integer) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> integer;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (NumberUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sub</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(computeWeight, integer) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NumberUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(integer, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NumberUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(integer, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><h4 id="æµ‹è¯•-1" tabindex="-1">æµ‹è¯• <a class="header-anchor" href="#æµ‹è¯•-1" aria-label="Permalink to &quot;æµ‹è¯•&quot;">â€‹</a></h4><p>å¯ä»¥é€šè¿‡å•å…ƒæµ‹è¯•æˆ–è€…swaggeræµ‹è¯•ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> compute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        WaybillDTO waybillDTO </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WaybillDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        waybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setReceiverCityId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7363L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å¤©æ´¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        waybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setSenderCityId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//åŒ—äº¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        waybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//é‡é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        waybillDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setVolume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">125000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//ä½“ç§¯</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CarriageDTO compute </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.carriageService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">compute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(waybillDTO);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(compute);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p><img src="`+q+'" alt="image-20220804192343311.png" loading="lazy"><img src="'+S+`" alt="image-20220804192405639.png" loading="lazy"> å¯ä»¥çœ‹åˆ°å·²ç»å¾—åˆ°è®¡ç®—ç»“æœã€‚</p><h4 id="å¼‚å¸¸" tabindex="-1">å¼‚å¸¸ <a class="header-anchor" href="#å¼‚å¸¸" aria-label="Permalink to &quot;å¼‚å¸¸&quot;">â€‹</a></h4><p>å¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹å¼‚å¸¸ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2022-08-04</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 19</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:27:01.712 - [http-nio-18094-exec-6] - ERROR - c.s.t.common.handler.GlobalExceptionHandler - å…¶ä»–æœªçŸ¥å¼‚å¸¸ </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">feign.RetryableException:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Connection refused: connect executing GET http://sl-express-ms-base/area/72975</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> feign.FeignException.errorExecuting</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FeignException.java:268</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> feign.SynchronousMethodHandler.executeAndDecode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SynchronousMethodHandler.java:129</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> feign.SynchronousMethodHandler.invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SynchronousMethodHandler.java:89</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> feign.ReflectiveFeign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$FeignInvocationHandler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReflectiveFeign.java:100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.sun.proxy.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$Proxy120</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Unknown</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.sl.ms.carriage.service.impl.CarriageServiceImpl.findEconomicCarriage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CarriageServiceImpl.java:234</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>ç”±äºåœ¨è®¡ç®—æœåŠ¡ä¸­ä½¿ç”¨baseå¾®æœåŠ¡ï¼Œä½†æ˜¯101æœºå™¨çš„baseæœåŠ¡æ²¡æœ‰å¯åŠ¨ï¼Œä¼šå¯¼è‡´å¦‚ä¸Šå¼‚å¸¸ï¼Œå°†baseå¯åŠ¨å³å¯ã€‚</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å¯åŠ¨å‘½ä»¤</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start sl-express-ms-base-service</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æŸ¥çœ‹æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs -f sl-express-ms-base-service</span></span></code></pre></div><h4 id="æµ‹è¯•ä¸¾ä¾‹" tabindex="-1">æµ‹è¯•ä¸¾ä¾‹ <a class="header-anchor" href="#æµ‹è¯•ä¸¾ä¾‹" aria-label="Permalink to &quot;æµ‹è¯•ä¸¾ä¾‹&quot;">â€‹</a></h4><p>**ä¸¾ä¾‹1ï¼š**è·¨çœå¯„ï¼ˆä¸è¶³1kgï¼‰ ä»åŒ—äº¬å¯„åˆ°ä¸Šæµ·ä¸€ä»¶ç‰©å“ï¼Œç‰©å“é‡é‡0.8åƒå…‹ï¼Œ1ç«‹æ–¹å˜ç±³ï¼ˆé•¿<em>å®½</em>é«˜ï¼š1cm<em>1cm</em>1cmï¼‰ï¼š è®¡ç®—ï¼š é‡é‡ï¼šä¸è¶³1åƒå…‹æŒ‰ç…§ä¸€åƒå…‹è®¡ç®— ä½“ç§¯ï¼šè·¨çœè½»æŠ›ç³»æ•°ä¸º12000ï¼Œ1ç«‹æ–¹å˜ç±³è®¡ç®—åˆ™ä¸ºï¼š1/12000 å¯¹æ¯”é‡é‡å’Œä½“ç§¯ï¼Œå–å¤§å€¼ æŒ‰ç…§1å…¬æ–¤æ¥è®¡ç®—ï¼Œåˆ™è¿è´¹ä¸ºè·¨çœå¯„è¿è´¹ï¼Œ18å…ƒ</p><hr><p>**ä¸¾ä¾‹2ï¼š**è·¨çœå¯„(è¶…è¿‡ 1kg) ä»åŒ—äº¬å¯„åˆ°ä¸Šæµ·ä¸€ä»¶ç‰©å“ï¼Œç‰©å“é‡é‡1.8åƒå…‹ï¼Œ1ç«‹æ–¹å˜ç±³ï¼ˆé•¿<em>å®½</em>é«˜ï¼š1cm<em>1cm</em>1cmï¼‰ï¼š è®¡ç®—ï¼š é‡é‡ï¼š1.8åƒå…‹ ä½“ç§¯ï¼šè·¨çœè½»æŠ›ç³»æ•°ä¸º12000ï¼Œ1ç«‹æ–¹å˜ç±³è®¡ç®—åˆ™ä¸ºï¼š1/12000 å¯¹æ¯”é‡é‡å’Œä½“ç§¯ï¼Œå–å¤§å€¼ æŒ‰ç…§1.8å…¬æ–¤æ¥è®¡ç®—è¿è´¹ï¼Œåˆ™è¿è´¹ä¸ºè·¨çœå¯„è¿è´¹ï¼Œ 1å…¬æ–¤ï¼ˆé¦–é‡ï¼‰+0.8å…¬æ–¤ï¼ˆç»­é‡ï¼‰ æ ¹æ®è¿è´¹è®¡ç®—è§„åˆ™ï¼Œ10å…¬æ–¤ä»¥ä¸‹ä»¥0.1ä¸ºç»­é‡å•ä½ï¼Œåˆ™ é¦–é‡+ç»­é‡=1<em>18ï¼ˆé¦–é‡ä»·æ ¼ï¼‰+0.8</em>5=18+4=22å…ƒ</p><hr><p>**ä¸¾ä¾‹3ï¼š**è·¨çœå¯„ï¼ˆæŒ‰ä½“ç§¯è®¡è´¹ï¼‰ ä»åŒ—äº¬å¯„åˆ°ä¸Šæµ·ä¸€ä»¶ç‰©å“ï¼Œç‰©å“é‡é‡3.8åƒå…‹ï¼Œ125000ç«‹æ–¹å˜ç±³ï¼ˆé•¿<em>å®½</em>é«˜ï¼š50cm<em>50cm</em>50cmï¼‰ï¼š è®¡ç®—ï¼š é‡é‡ï¼š3.8åƒå…‹=3ï¼ˆé¦–é‡ï¼‰+0.8ï¼ˆç»­é‡ï¼‰ ä½“ç§¯ï¼šè·¨çœè½»æŠ›ç³»æ•°ä¸º12000ï¼Œ125000ç«‹æ–¹å˜ç±³ï¼š125000/12000=10.41 å¯¹æ¯”é‡é‡å’Œä½“ç§¯ï¼Œå–å¤§å€¼10.41 æ ¹æ®è¿è´¹è®¡ç®—è§„åˆ™ï¼Œ10-100å…¬æ–¤ä»¥0.5ä¸ºè®¡é‡å•ä½ï¼Œåˆ™10.41ä¸º10.5 é¦–é‡+ç»­é‡=1<em>18ï¼ˆé¦–é‡ä»·æ ¼ï¼‰+9.5</em>5=18+47.5=65.5å…ƒ</p><hr><p>**ä¸¾ä¾‹4ï¼š**åŒåŸå¯„ï¼ˆæŒ‰ä½“ç§¯è®¡è´¹ï¼‰ ä»åŒ—äº¬ä¸œåŸå¯„åˆ°åŒ—äº¬è¥¿åŸä¸€ä»¶ç‰©å“ï¼Œç‰©å“é‡é‡3.8kgï¼Œ125000ç«‹æ–¹å˜ç±³ï¼ˆé•¿<em>å®½</em>é«˜ï¼š50cm<em>50cm</em>50cmï¼‰ï¼š è®¡ç®—ï¼š é‡é‡ï¼š3.8kg=1kgï¼ˆé¦–é‡ï¼‰+2.8kgï¼ˆç»­é‡ï¼‰ ä½“ç§¯ï¼šåŒåŸè½»æŠ›ç³»æ•°ä¸º12000ï¼Œæ¢ç®—æˆé‡é‡125000ç«‹æ–¹å˜ç±³ï¼š125000/12000=10.41kg å¯¹æ¯”é‡é‡ï¼ˆ3.8kgï¼‰å’Œä½“ç§¯ï¼ˆ10.41kgï¼‰ï¼Œå–å¤§å€¼10.41kg æ ¹æ®è¿è´¹è®¡ç®—è§„åˆ™ï¼Œ10-100kgä»¥0.5kgä¸ºè®¡é‡å•ä½ï¼Œåˆ™10.41kgä¸º10.5kg é¦–é‡+ç»­é‡=1kg<em>12å…ƒï¼ˆé¦–é‡ä»·æ ¼ï¼‰+9.5kg</em>2å…ƒ(ç»­é‡ä»·æ ¼)=12+19=31å…ƒ</p><hr><p>**ä¸¾ä¾‹5ï¼š**ç»æµåŒºäº’å¯„ï¼ˆæŒ‰ä½“ç§¯è®¡è´¹ï¼‰ ä»åŒ—äº¬å¯„åˆ°å¤©æ´¥ä¸€ä»¶ç‰©å“ï¼Œç‰©å“é‡é‡3.8kgï¼Œ125000ç«‹æ–¹å˜ç±³ï¼ˆé•¿<em>å®½</em>é«˜ï¼š50cm<em>50cm</em>50cmï¼‰ï¼š è®¡ç®—ï¼š é‡é‡ï¼š3.8kg=1kgï¼ˆé¦–é‡ï¼‰+2.8kgï¼ˆç»­é‡ï¼‰ ä½“ç§¯ï¼šç»æµåŒºäº’å¯„ï¼ˆäº¬æ´¥ç¿¼ï¼‰è½»æŠ›ç³»æ•°ä¸º6000ï¼Œæ¢ç®—æˆä½“ç§¯125000ç«‹æ–¹å˜ç±³ï¼š125000/6000=20.83kg å¯¹æ¯”é‡é‡(3.8kg)å’Œä½“ç§¯(20.83kg)ï¼Œå–å¤§å€¼20.83kg æ ¹æ®è¿è´¹è®¡ç®—è§„åˆ™ï¼Œ10-100kgä»¥0.5kgä¸ºè®¡é‡å•ä½ï¼Œåˆ™20.83ä¸º21kg é¦–é‡+ç»­é‡=1<em>12å…ƒï¼ˆé¦–é‡ä»·æ ¼ï¼‰+20</em>5å…ƒ(ç»­é‡ä»·æ ¼)=12+100=112å…ƒ</p><hr><p>**ä¸¾ä¾‹6ï¼š**çœå†…å¯„ï¼ˆæŒ‰é‡é‡è®¡è´¹ï¼‰ ä»çŸ³å®¶åº„å¯„åˆ°ç§¦çš‡å²›ä¸€ä»¶ç‰©å“ï¼Œç‰©å“é‡é‡3.8kgï¼Œ5000ç«‹æ–¹å˜ç±³ï¼ˆé•¿<em>å®½</em>é«˜ï¼š50cm<em>10cm</em>10cmï¼‰ï¼š è®¡ç®—ï¼š é‡é‡ï¼š3.8kg=1kgï¼ˆé¦–é‡ï¼‰+2.8kgï¼ˆç»­é‡ï¼‰ ä½“ç§¯ï¼šçœå†…å¯„è½»æŠ›ç³»æ•°ä¸º8000ï¼Œæ¢ç®—æˆä½“ç§¯5000ç«‹æ–¹å˜ç±³ï¼š5000/6000=0.8kg å¯¹æ¯”é‡é‡(3.8kg)å’Œä½“ç§¯(0.8kg)ï¼Œå–å¤§å€¼3.8kg æ ¹æ®è¿è´¹è®¡ç®—è§„åˆ™ï¼Œ10kgä»¥ä¸‹ä»¥0.1kgä¸ºè®¡é‡å•ä½ï¼Œåˆ™3.8kgä¸º3.8kg é¦–é‡+ç»­é‡=1<em>12å…ƒï¼ˆé¦–é‡ä»·æ ¼ï¼‰+2.8</em>3å…ƒ(ç»­é‡ä»·æ ¼)=12+8.4=20.4å…ƒ</p><h3 id="éƒ¨ç½²" tabindex="-1">éƒ¨ç½² <a class="header-anchor" href="#éƒ¨ç½²" aria-label="Permalink to &quot;éƒ¨ç½²&quot;">â€‹</a></h3><p>å·²ç»å°†è¯¥æœåŠ¡çš„éƒ¨ç½²è„šæœ¬å†™åˆ°Jenkinsä¸­ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</p><p><img src="`+N+'" alt="image-20220805213036091.png" loading="lazy"></p><p>éƒ¨ç½²æˆåŠŸåè¿›è¡Œæµ‹è¯•ï¼Œç»“æœä¸æœ¬åœ°ä¸€æ ·ã€‚</p><h3 id="ç”¨æˆ·ç«¯æµ‹è¯•" tabindex="-1">ç”¨æˆ·ç«¯æµ‹è¯• <a class="header-anchor" href="#ç”¨æˆ·ç«¯æµ‹è¯•" aria-label="Permalink to &quot;ç”¨æˆ·ç«¯æµ‹è¯•&quot;">â€‹</a></h3><p>ç”¨æˆ·ä¸‹å•æ—¶ï¼Œéœ€è¦æ ¹æ®æ”¶å‘åœ°å€è®¡ç®—è¿è´¹ï¼Œæ‰€ä»¥éœ€è¦å°†ç”¨æˆ·ç«¯è¿è¡Œèµ·æ¥è¿›è¡ŒåŠŸèƒ½æµ‹è¯•ã€‚ ç”¨æˆ·ç«¯çš„éƒ¨ç½²å‚è€ƒ<a href="https://www.yuque.com/docs/share/90dee639-d6a5-48c7-a644-4829db1e47ae" target="_blank" rel="noreferrer">ã€Šå‰ç«¯éƒ¨ç½²æ–‡æ¡£ã€‹</a>ã€‚</p><p>éœ€è¦å¯åŠ¨å¦‚ä¸‹æ‰€éœ€è¦çš„æœåŠ¡ï¼Œè¿›è¡Œæµ‹è¯•ï¼š <img src="'+L+'" alt="image.png" loading="lazy"></p><p>å¦‚æœå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼Œæ˜¯å› ä¸º <code>sl-express-ms-oms-service</code> æœåŠ¡æ²¡æœ‰å¯åŠ¨ã€‚</p><p><img src="'+W+'" alt="image.png" loading="lazy"></p><p>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="'+j+'" alt="image.png" loading="lazy"></p><h2 id="ç»ƒä¹ " tabindex="-1">ç»ƒä¹  <a class="header-anchor" href="#ç»ƒä¹ " aria-label="Permalink to &quot;ç»ƒä¹ &quot;">â€‹</a></h2><p>éœ€æ±‚ï¼šè®¡ç®—è¿è´¹çš„ç¬¬ä¸€æ­¥å°±æ˜¯æ ¹æ®å‚æ•°æŸ¥è¯¢è¿è´¹æ¨¡æ¿ï¼Œè€Œè¿™ä¸ªåŠ¨ä½œä¼šè®¿é—®æ•°æ®åº“ï¼Œå¹¶ä¸”æ˜¯æ¯”è¾ƒé¢‘ç¹çš„ï¼Œç„¶è€Œè¿è´¹æ¨¡æ¿çš„å˜æ›´å¹¶ä¸é¢‘ç¹ï¼Œéœ€è¦å¯ä»¥å°†è¿è´¹æ¨¡æ¿ç¼“å­˜èµ·æ¥ï¼Œä»¥æé«˜æ•ˆç‡ã€‚</p><p>æç¤ºï¼š</p><ul><li>éœ€è¦å¼•å…¥redisç›¸å…³çš„ä¾èµ–</li><li>å¢åŠ redisç›¸å…³çš„é…ç½®</li><li>ç¼–ç å®ç°ç¼“å­˜ç›¸å…³é€»è¾‘</li></ul><h2 id="é¢è¯•è¿ç¯é—®" tabindex="-1">é¢è¯•è¿ç¯é—® <a class="header-anchor" href="#é¢è¯•è¿ç¯é—®" aria-label="Permalink to &quot;é¢è¯•è¿ç¯é—®&quot;">â€‹</a></h2><div class="info custom-block"><p class="custom-block-title">INFO</p><p>é¢è¯•å®˜é—®ï¼š</p><ul><li>ä½ ä»¬çš„è¿è´¹æ˜¯æ€ä¹ˆè®¡ç®—çš„ï¼Ÿä½“ç§¯å’Œé‡é‡æ€ä¹ˆè®¡ç®—ï¼Œåˆ°åº•ä»¥å“ªä¸ªä¸ºå‡†ï¼Ÿ</li><li>è¯¦ç»†èŠèŠä½ ä»¬çš„è¿è´¹æ¨¡æ¿æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</li><li>æœ‰æ²¡æœ‰é’ˆå¯¹è¿è´¹è®¡ç®—åšä»€ä¹ˆä¼˜åŒ–ï¼Ÿ</li></ul></div>',128);function I(s,P,M,z,V,G){const p=n("ArticleMetadata"),k=n("ClientOnly");return h(),e("div",null,[H,r(k,null,{default:E(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(h(),y(p,{key:0,article:s.$frontmatter},null,8,["article"])):c("",!0)]}),_:1}),U])}const Z=t(R,[["render",I]]);export{Y as __pageData,Z as default};
