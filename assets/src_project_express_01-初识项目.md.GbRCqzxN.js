import{_ as e,E as n,c as k,J as r,w as E,m as t,a as d,V as g,o as l,b as y,e as o}from"./chunks/framework.syB9hai_.js";const c="/cswiki/assets/1665994390645-292d9d08-3927-4a96-8d4a-0c8a653d0b45-20240312102620684.THr-NoC-.png",F="/cswiki/assets/1665996673705-67f5f038-4e74-4205-8cfc-ee8dd1b4ee66-20240312102619067.BaU0f0Te.jpeg",m="/cswiki/assets/1666843467766-309e2f8f-1fc0-4f05-ba11-3142f542929c-20240312102627697.ePrmKaqq.png",u="/cswiki/assets/1665997407045-5b9ee5fe-d30b-4cec-a5a9-599f5a8ee6bd-20240312102620326.dls-0l_L.jpeg",A="/cswiki/assets/1665997873162-a4c9ea61-f71e-4111-862e-efa01fd35e7b-20240312102620594.g9HzrVag.jpeg",D="/cswiki/assets/1672389615739-d11e9b27-5241-49e4-bd52-2374f32a38be-20240312102619337.QX2-TegE.jpeg",b="/cswiki/assets/1667813584952-24320691-7837-4c72-97c1-2d99b7da71fe-20240312102619390.mWIl9f9K.jpeg",f="/cswiki/assets/1666145111077-c453ef4e-3165-4085-8b70-f38c82be3d1a-20240312102619636.Mf4zw9Jk.png",C="/cswiki/assets/1666145242663-e0a704ba-dcfa-4f99-a25f-1b7a3ec5f119-20240312102619747.3yzSWVuI.png",B="/cswiki/assets/1666145268551-72b01391-9f65-4a87-90c5-23cb3ffecaa6-20240312102619953.wJy7SYd2.png",v="/cswiki/assets/1666147847509-b0623617-3ea2-4293-b9a0-7ba0dc51e076-20240312102620494.pNr4E9YL.png",x="/cswiki/assets/1666147783779-ced836d1-62c2-4fac-aa26-9cf6e5180138-20240312102620696.iaK57rr3.png",w="/cswiki/assets/1666148205970-20236142-d3aa-455a-8b18-0b5438d6b4e5-20240312102620872.DXlglrEG.png",q="/cswiki/assets/1666148251950-460e944c-26a7-47d2-819f-6bb03022d98b-20240312102620714._hPj9w3F.png",_="/cswiki/assets/1666148843502-dbfb5e33-0aec-43be-992a-1005cf84d63d-20240312102621423.ID6_gwZS.png",T="/cswiki/assets/1666148927871-7a8bfa02-3a6f-4c9a-86f8-ae2355750ee1-20240312102621634.j8K3f7w6.png",S="/cswiki/assets/1666149092451-d7eb65a3-f0dc-4a9e-b1b3-147a265d126f-20240312102622464.QkKEoxUZ.png",O="/cswiki/assets/1666149148556-d9866b4c-746e-470d-a536-ef4e8298a9d8-20240312102621019.PUzum40r.png",j="/cswiki/assets/1666149017437-ff6a070b-8562-4daa-8876-67e72b0f8554-20240312102621233.eKrFDbIc.png",P="/cswiki/assets/1673680992033-4e0d2021-7318-4667-8243-b980711e2cdf.u6PC2baB.png",R="/cswiki/assets/1673681441709-cd4f06cb-b65f-45c0-a9e4-da18b0da2a0d.-9eE5m7N.png",z="/cswiki/assets/1673681517364-16df33a4-9a48-405d-be13-2c9214ee8028.BhedKvGq.png",I="/cswiki/assets/1673681584167-010c4de4-a89a-4db1-8913-c77b7bfb302c.TH8Q-H17.png",U="/cswiki/assets/1673681630034-08d98831-7274-4cab-a0e8-826ca34e62bf.mNT1Ez5H.png",M="/cswiki/assets/1673681710302-70138a00-4dc0-44ba-90d4-fcb2d7226ed4.pwgb5D9P.png",G="/cswiki/assets/1673681799739-d8cccc7a-2d0f-4d99-9ed5-4a2e5eadeffc.mNo7mkYa.png",N="/cswiki/assets/1673681882850-4e26eb0c-532c-499e-8d70-56b1b05c4fe4.WE65oG8n.png",L="/cswiki/assets/1673681922716-5a9002a3-4cf4-4048-b9ae-85d76445bf68.ytDLNqPo.png",H="/cswiki/assets/1668339834117-bce9f84f-3716-4807-8b9d-fb05c8f57479-20240312102622944.W5YunrUp.jpeg",V="/cswiki/assets/1666004497851-777b646d-7019-45ec-bf88-6add87d7ac95.RC2CQOpV.png",W="/cswiki/assets/1666004677962-4ae83c79-8dde-409c-b87a-321113980a57.ZIpjwLlW.png",K="/cswiki/assets/1666251505172-046baf07-c207-4bbd-b8cc-a9bb5191605f.d64cuVKG.png",J="/cswiki/assets/1666099328254-3ef3aaea-3625-4746-9bce-4de51e18d11e-20240312102623583.UHdPp_OV.png",Y="/cswiki/assets/1666252164143-a74f35fc-6c41-41fe-832f-d6366a92d20d.0_x0PgCA.png",Q="/cswiki/assets/1666252520245-0c60cae3-0033-4ba0-9f4b-0a85b784b396.fR2Dt3hK.png",X="/cswiki/assets/1666252464036-4912fcb9-df39-4b29-8c84-8ff6cef27272.s0W1bw8u.png",Z="/cswiki/assets/1666252575158-2aaebfc1-0039-46a4-ac3d-1e1161543253.0OaO-SHF.png",$="/cswiki/assets/1666252651737-41297cfc-bbf2-4151-9d23-d0a309f17fe5.t6ypFsN5.png",ss="/cswiki/assets/1666252699199-a5b921f6-3edd-4a5a-a188-928b3b9dbac8.e9_amxjk.png",is="/cswiki/assets/1666253052325-87925e01-138c-4633-8594-fda6c564327a.x5B-K9oV.png",as="/cswiki/assets/1666007637689-dd449a6a-4dab-4b24-9908-f4bc5b4aad6b.tkv-AkzR.png",ns="/cswiki/assets/1666007654827-955e1cba-cfef-41c1-a2e2-3ca73232f24a.gWjOFzYT.png",ts="/cswiki/assets/1667827609764-eba4105e-341d-4866-8cdd-dc54a59251b7.FY2NW7Nc.png",ls="/cswiki/assets/1666007665915-2c652140-6472-4a9e-ac3f-c1cf77aefc7e.K1Tsl9XV.png",hs="/cswiki/assets/1666007677419-776caa3e-6378-434c-acbf-49f0a8c58614.DO0Dw8jH.png",ps="/cswiki/assets/1666007688480-f46fcc43-e911-4fa7-aa92-01b063e62948.JxuuQfxa.png",es="/cswiki/assets/1666057155954-b5f2346f-1ce9-47d3-a953-1030e55bd743.hKwjKyzB.png",ks="/cswiki/assets/1666271250310-08a996fb-1b5c-450c-9a8f-5ec1425e7745.E7QKlnY8.png",rs="/cswiki/assets/1666057311886-c7516890-51dd-4cfb-a3d5-f211a6715942.Qlea9BKN.png",Es="/cswiki/assets/1666057329815-5a88c5f3-e8e4-49b3-b9e3-8391548a4464.8qIcZUQU.png",ds="/cswiki/assets/8a57e6729921b0ddcb659a114ed9d633-20240312102625313.ocxROWys.svg",gs="/cswiki/assets/1671072914178-081939c0-98fc-419c-b091-60cae7e2bd5e.jXBZMFKE.png",ys="/cswiki/assets/1673000387771-a3fdf43e-a487-4696-b281-98a623724d4a.ol8sA4aW.png",os="/cswiki/assets/1673005349696-52501b13-a69c-4ae8-8594-ef42657a877d.0NG6w0p4.png",cs="/cswiki/assets/1666277077045-79bd2d07-3ea1-4e4a-9db5-b4107ee293b6.KsmrXbM4.png",Fs="/cswiki/assets/1666277369985-40b129ad-b269-4bf3-bcf0-64e2367811c2.AeXq4eY6.png",ms="/cswiki/assets/1666276029943-8150b0c3-7a00-4725-8da2-ba68400e839d.0xv9rT1D.png",us="/cswiki/assets/1666276115483-983cb826-348a-44fe-9b9b-ac175f6e5905.FqSRDaiI.png",As="/cswiki/assets/1666276219995-cbf6e779-4bb3-4256-ad1b-d603f9aa68a0._ACpDFuZ.png",Ds="/cswiki/assets/1666276282928-ee4a4c72-9587-4b2a-a8f2-712449a3222f.l7wWaKLP.png",bs="/cswiki/assets/1666276303877-9b46a698-6684-40ac-b6b1-e34d8f387488.zBWQ4WUy.png",fs="/cswiki/assets/1666276525767-767f1096-f85c-46bb-bd96-33cf16404a71.kuiHo9X_.png",Cs="/cswiki/assets/1666276504615-b4bcb37b-0e5c-4744-b49d-a28d74aea880.xlqooMrs.png",Bs="/cswiki/assets/1666276749051-87770590-a7b7-4fe7-b07b-0be22694fea6.-VJ82AES.png",vs="/cswiki/assets/1666060443196-1c23a711-5ff8-45d5-8d58-8293818876ed.EHA2vfZX.png",xs="/cswiki/assets/1666060453073-bc03811a-b0eb-461d-9135-008f4cd56eec.pXPMqkRK.png",ws="/cswiki/assets/1666060479867-168b48e4-2076-4ab4-a334-a0c6e988aa40.pHgk9bB6.png",qs="/cswiki/assets/1666060555697-30fc6e10-92fc-40c6-8b01-b44e5d6f74e2.wwVt8zyA.png",_s="/cswiki/assets/1660810019036-a7f8a82f-f14d-4c73-b03a-e959991dbcb9._kw43ekg.gif",Ts="/cswiki/assets/93e665920cbae23c15b75940115d20b3.hYZTTsR2.svg",Ss="/cswiki/assets/1671450361623-0b1d7cba-382b-4b1b-9def-3475cfd57021.Rna7q1GI.jpeg",Os="/cswiki/assets/2be8c02d10efadc6e633250642bba57a.PDb8yBJ9.svg",js="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfoAAABQCAYAAADx5bd1AAAOMUlEQVR4nO3dvW6jShsH8L9fHcnkEtJbSsMpQwe1pZWirHwHdNBESpMoFxAdNxE0LtkrsE4UaWVql0553FhMnVzCupu3wF/gr8HGxh7/f1KKTYB5Zhh4jJmZrUkpJUrw/f0NALi+vi7jcERERFSC/1UdABERER0OEz0REZHGmOiJiIg0xkRPRESkMSZ6IiIijTHRExERaYyJnoiISGNM9ERERBpjoj+6GL5hwAlF1YHQyWHfUKd3W8W+AcNwoGn16MiY6I9MhK+IYKH1o1F1KHRi2DfUbWur0DFwdXU1+2HSpEvGRH9UAm9PA8B9wYNm9/LQMWD4cdVhnDF9+0b5trfVQ3+MP3/+pD///QPruAESnZS/qg7gkojQRQQL7cdm1aHQiWHfUHcJbdXsjDHuVB0F6YKJ/mgEfncHgPvOJzbKYd9Qx7YiKoqJ/ljiNzwNLLQjfZ9CaEfsG+rYVkSF8R39UQiEr5H6+1chEPoOHMPIDCZy/BBxHMLJDCxKRx+vG3AU+4bygCQRh3AWBjEZzqTM0Idh+Mi/gRehM9v2+bOG2q+fmQFQ8+OEm6sbh/AdJ7OP4/gI4+Vgp/UxDAdhHMN35v/2YwEgbbvZcdaOG8huN98+xIpiV9b56upqPupbxEvlqo392tY3qju/mRjPoq3KU6RP5mOMc9eu4/hpO4lw9vtV7b3LAMLl6yF333Cm1wVdNFmSr68v+fX1Vdbh9NLzpGEY0uupbWvXbekFPZkkC79PEtkLPGnX67Jet2WQ5PZLAmmv+r3i33ve5Li97AZJL5iU6clN4Qd2XdaVKpgv15Z125O9pfr0pGfXpb3qmEkak2EYs78ngS3rdVvadl3W7SBtu8l2y4foSa9en5S7UHCSpPHUbYVzlR7DDhKZTM9ZL5Hp0RL19lDtG5Wd3zNsq7xtbbdUzA59Mt1z8vcgc+3O6hwUiKNIzAvXQ/48pWWnbU+Xi4n+4CY3MjtQ2HRdYspvU3aiT2/E6+9f3kESfRLYaVJev4UM7BU3qUk7ZcubJqTs8XpefjuFxNLzVn+Yym4kvczNdTn27bfWon3j2Of3TNtqaVf1pLlzn5RbroFpnz1gol8Xd/ohePP1S3pjoj+0Ak8hy0mpgDKe+OxAJslun/yLJ/otyWce2PJNamVd5k+N2d1zcSklJpVzsfqDRSFFnlCrOL/n2lZ5yklzjz6p0FbTb50Ok+h37xukP03f0c/fa2772fxucn/hawR5+w+2zwQS+IgA66aaocTNzhjDlxFc18y9w/UPs9BI/IEILu62tUvzDi4ifJR0ksRoCFgtbFuTpnnnAtHH1r5htX5g1zOm3jf2t8v5vbi22qNPTttq09iBxo1ZSphERWk66r6JzniMyqehxj6eP2tw/31QuMGld1uzokQPAI1mB/1mttWEiPHmGnBaQ/Q1mM8kRgPUPj/x99Wzwta3GAmgeYhqF+ob5Sh6fi+5rYoSowGA1uaNGjewMDxKPESLNE30pyH+iCBv24WeQoYHu1vuptFoohO14Zgm/JsxOmc+q6lxY0HetjDsV5s0dukbh7Dp/LKt1DVuLGzN4WIEhY8DRKXT9Kv7EyBCpDOBVG+STdy5wGB0glNhGg9oWUBU1vfngPpX8qpfpypq/GjBGnTxu8pmLtw3DmzN+b24ttqjTzZuTGDQ3fiaK/6ISgmTqCgm+gOJ354wsIo9hTQf27Cie2xeMl7stK68+N3FYM3fYt/YMtc9xmiwefxA8dePTTy2LUSv4YY51Om8aav9iNIe5hoPeHEHeHI3lQsgnswtP0CS26VvbHOQ86tpW623R59sdtC2Bnh6W3NdTj6wEFWBif4QJhd14cFHjQdE7y6iewd+mL1hCDFdiMNE12xjmP8OfXpTfssuPiJEuqiM28XG/9ij9vk8Wdgjd4sTAqFzj8hqI9rwjr5556L26yecxbiFmC08YhjOUiJoPPTxbnZhrig3jdtE13wvfWxAszOelRvGYqm9Qt+BcT+E234s/y3KHn2jivN7lm21h3365EP/He7wfmkBIBH7cMwnmO02/3MdqkZZw/c5vW4uXZzE230qUdKTgWfPFsEwDCNdDMYLsouWLO8oA8+e7WMYhrSnC2hkFtXIzkWeTo9KpuXaC+Xa6eI9amEH0lvYd1p+EPQ2tkW633Lc+cVdprEubjevy8Jc7YWpT4vb56dNrSp3Wt/V8c7L2PSzaarZfn2juvN7Pm2VznPfVm6+n6jUd12fzJffy1279nTtgLXT3HaNebmN83Vaf73QJalJKWUZHxi+v78BANfX12Uc7nyJEI75BLT1GKVOJWLfUKdjW4kQjtlFa9jnf8hDR8VR9yVL35W6eOeVTDnsG+q0bCuOuqeK8ImeiOgIROjA7LYw7j9UHQpdGA7GIyI6KIE4dGA+Ae8RkzwdHxM9EVFpVi2//TdeRy0Mh/1TWguLLgi/uiciItIYn+iJiIg0xkRPRESkMSZ6IiIijTHRExERaYyJnoiISGNM9ERERBpjoiciItIYEz0REZHGmOiJiIg0xkRPRESkMSZ6IiIijTHRExERaYyJnoiISGNM9ERERBpjoiciItIYEz0REZHGmOiPLoZvGHBCUXUgdHLYN9SxrYhUMdEfmQhfEcFC60ej6lDoxLBvqDuPthKIfQeOYeDq6mr24zjOmX9AEfAndTIMB2ddlQvBRH9UAm9PA8B9wcMp3592EDoGDD+uOowzpm/fKN95tFXomLiPTLwMx/jz58/sp9/vo3/KgW/VQGc8xp///oFVdSikhIn+iEToIoKF9mOz6lDoxLBvqDuLthIhugML7WEHzXPO6aSFv6oO4HII/O4OAPf9pJ9CqArsG+rOpK3ECAOYeDnlGOliMNEfS/yGp4GFdnTCTyFUDfYNdWwrosL41f1RCISvkfo7RSEQ5gbxGIYDxw8RxyGczACYeOPAmNjPHmPTwBkRh3Cche2dSZmhD8PwkX8DL0Jntu3zZw21Xz8zg47mxwk3VzcO4TtObsCSjzBeDnZaH8NwEMYxfGf+bz8WANK2mx1n7biB7Hbz7UOsKHZlna+uruaDqkS8VK7aGKVtfaO685uJ8Szaqqxyd6svYn++/c9fqNV+4eeK62HVQLzKYp7uvXPfmO7v5/Zfff1SRWRJvr6+5NfXV1mH00vPk4ZhSK+ntq1dt6UX9GSSLPw+SWQv8KRdr8t63ZZBktsvCaS96veKf+95k+P2shskvWBSpic3hR/YdVlXqmC+XFvWbU/2lurTk55dl/aqYyZpTIZhzP6eBLas121p23VZt4O07SbbLR+iJ716fVLuQsFJksZTtxXOVXoMO0hkMj1nvUSmR0vU20O1b1R2fs+wrfYqt4z6prFuu2ZOJead+8akz9mTmDK3q5635tqjKjDRH9zk4rQDhU3XJab8NmUn+vRGsbZchZvWLok+Cew0Ka/fQgZ2etPL7ZjegDLlTW922eP1vPx2Coml563+MJXdSHqTDxsrP6jIZEO9crEo941jn98zbaudyy2rvnLvRH+8mPe49qfX4ZprOP3wvUsbUNmY6A+twFPIclIqoIwnPjuQSbL9lrtK8US/5QYzD2z5ZrGyLvMnoezuubgUb9Tbz8XqDxaFFHlCreL8nmtb7VpuafWVeyf6Y8a887W/Z5+k49H0Hf38vea2H5X3T/sIXyPI23+wfSaQwEcEWDfVDNNtdsYYvozgumbuPZ1/mAUx4g9EcHG3rV2ad3AR4aOkkyRGQ8BqYds6K807F4g+tvYNq/UDu54x9b6xv13Ory5tpVpu2fXdxzFjPvq1T0en6aj7JjrjMTpVhxH7eP6swf33QeGiTa8os6JEDwCNZgf9ZrbVhIjx5hpwWsMzX+QjJUYD1D4/8ffVs8LWtxgJHGYedKG+UY6i5/fS2upk6ltAWTFfwrV/yTRN9Kch/oggb9uFnkKGp3D3WNBoNNGJ2nBME/7NGJ0zn9XUuLEgb1sY9o+XYFfZpW8cwqbze2ltdSr1LeKQMet27V8yTb+6PwEiRDoTSPUCbOLOBQajE/yurPGAlgVEZX1/Dqh/Ja/6Fb+ixo8WrEEXv6ts5sJ948DWnN9La6uTqG9BB4/5ENc+HR0T/YHEb08YWMWeQpqPbVjRPTYvGS92Wlde/O5isOZvsW9smeseYzTYPH7gxiwUDoAmHtsWotdwwxzqdN601X5EaQ8TjQe8uAM8uZvKBRBP5g8f4Aa6S9/Y5iDnV9O2WusE6lvYnjGXce3T6WOiP4TJU0jhwUeNB0TvLqJ7B36YTeRCTP8nLBNds41h/nu06QX/ll1QQ4h0URm3i43/AUXt8xmO4yMWuTuBEAide0RWG9GG93TNOxe1Xz/hLMYtxGwxHMNwlm4yjYc+3s0uzBXlpnGb6Jrvpb8fbHbGs3LDWCy1V+g7MO6HcNuP5b9F2aNvVHF+z7Kt9lBpfXe0b8z7Xvt0Bsoavs/pdXPpAhTe7lOJkp4MPHu2KIxhGOliMF6QXRBjeUcZePZsH8MwpD1dRGNhkZn8XOTp1JtkWq69UK6dLt6jFnYgvYV9p+UHQW9jW6T7LcedX8BjGuvidvO6LMw/XpjWtLh9fnbRqnKn9V0d77yMTT+bpl7t1zeqO7/n01b7l7tbfdN549vKXT1FsLqYd+sby/FmpxJu+zsdW01KKcv4wPD9/Q0AuL6+LuNw50uEcMwnoM2RqpTDvqGObUVUGo66L1n6rtTFO29OlMO+oY5tRVQePtETERFpjIPxiIiINMZET0REpDEmeiIiIo0x0RMREWmMiZ6IiEhjTPREREQaY6InIiLSGBM9ERGRxpjoiYiINMZET0REpDEmeiIiIo0x0RMREWns/4T06CAseRyFAAAAAElFTkSuQmCC",Ps="/cswiki/assets/1671505640679-63b187ac-0205-49b1-99e7-82487b0263c1.HZOWXHJl.png",Rs="/cswiki/assets/1671506553051-4e1b8737-e8ec-47a5-9ce9-da026b44c767.AS5ptAq2.png",Ks=JSON.parse('{"title":"åˆå§‹é¡¹ç›®","description":"","frontmatter":{},"headers":[],"relativePath":"src/project/express/01-åˆè¯†é¡¹ç›®.md","filePath":"src/project/express/01-åˆè¯†é¡¹ç›®.md","lastUpdated":1730648753000}'),zs={name:"src/project/express/01-åˆè¯†é¡¹ç›®.md"},Is=t("h1",{id:"åˆå§‹é¡¹ç›®",tabindex:"-1"},[d("åˆå§‹é¡¹ç›® "),t("a",{class:"header-anchor",href:"#åˆå§‹é¡¹ç›®","aria-label":'Permalink to "åˆå§‹é¡¹ç›®"'},"â€‹")],-1),Us=g('<nav class="table-of-contents"><ul><li><a href="#åˆå§‹é¡¹ç›®">åˆå§‹é¡¹ç›®</a><ul><li><a href="#è¯¾ç¨‹å®‰æ’">è¯¾ç¨‹å®‰æ’</a></li><li><a href="#åœºæ™¯è¯´æ˜">åœºæ™¯è¯´æ˜</a></li><li><a href="#é¡¹ç›®ä»‹ç»">é¡¹ç›®ä»‹ç»</a><ul><li><a href="#å…¬å¸ä»‹ç»">å…¬å¸ä»‹ç»</a></li><li><a href="#ç»„ç»‡æ¶æ„">ç»„ç»‡æ¶æ„</a></li><li><a href="#äº§å“è¯´æ˜">äº§å“è¯´æ˜</a></li></ul></li><li><a href="#ç‰©æµè¡Œä¸š">ç‰©æµè¡Œä¸š</a></li><li><a href="#ç³»ç»Ÿæ¶æ„">ç³»ç»Ÿæ¶æ„</a></li><li><a href="#åŠŸèƒ½æ¼”ç¤º">åŠŸèƒ½æ¼”ç¤º</a><ul><li><a href="#éœ€æ±‚æ–‡æ¡£">éœ€æ±‚æ–‡æ¡£</a></li><li><a href="#åŠŸèƒ½æ¶æ„">åŠŸèƒ½æ¶æ„</a></li><li><a href="#ä¸šåŠ¡æµç¨‹">ä¸šåŠ¡æµç¨‹</a></li><li><a href="#ç”¨æˆ·ç«¯">ç”¨æˆ·ç«¯</a></li><li><a href="#å¿«é€’å‘˜ç«¯">å¿«é€’å‘˜ç«¯</a></li><li><a href="#å¸æœºç«¯">å¸æœºç«¯</a></li><li><a href="#åå°ç®¡ç†ç³»ç»Ÿ">åå°ç®¡ç†ç³»ç»Ÿ</a></li></ul></li><li><a href="#å¼€å‘ç¯å¢ƒ">å¼€å‘ç¯å¢ƒ</a><ul><li><a href="#å¼€å‘æ¨¡å¼">å¼€å‘æ¨¡å¼</a></li><li><a href="#å›¢é˜Ÿåˆ†å·¥">å›¢é˜Ÿåˆ†å·¥</a></li><li><a href="#è½¯ä»¶ç¯å¢ƒ">è½¯ä»¶ç¯å¢ƒ</a><ul><li><a href="#å¯¼å…¥è™šæ‹Ÿæœº">å¯¼å…¥è™šæ‹Ÿæœº</a></li><li><a href="#é…ç½®æœ¬æœºhosts">é…ç½®æœ¬æœºhosts</a></li><li><a href="#æœåŠ¡åˆ—è¡¨">æœåŠ¡åˆ—è¡¨</a></li><li><a href="#é…ç½®mavenç§æœ">é…ç½®Mavenç§æœ</a></li><li><a href="#æœåŠ¡ç‰ˆæœ¬">æœåŠ¡ç‰ˆæœ¬</a></li></ul></li></ul></li><li><a href="#å¼€å‘ä»»åŠ¡">å¼€å‘ä»»åŠ¡</a><ul><li><a href="#ä»»åŠ¡æè¿°">ä»»åŠ¡æè¿°</a><ul><li><a href="#éƒ¨ç½²åå°ç®¡ç†ç³»ç»Ÿ">éƒ¨ç½²åå°ç®¡ç†ç³»ç»Ÿ</a></li><li><a href="#éƒ¨ç½²åç«¯æœåŠ¡">éƒ¨ç½²åç«¯æœåŠ¡</a></li><li><a href="#æµ‹è¯•">æµ‹è¯•</a></li></ul></li><li><a href="#æ‹‰å–ä»£ç ">æ‹‰å–ä»£ç </a></li><li><a href="#æƒé™ç®¡å®¶">æƒé™ç®¡å®¶</a></li><li><a href="#æµ‹è¯•ç”¨æˆ·ç™»å½•">æµ‹è¯•ç”¨æˆ·ç™»å½•</a><ul><li><a href="#ä¾èµ–è¯´æ˜">ä¾èµ–è¯´æ˜</a></li><li><a href="#è§£è¯»é…ç½®">è§£è¯»é…ç½®</a></li><li><a href="#æµ‹è¯•-1">æµ‹è¯•</a></li></ul></li><li><a href="#é˜…è¯»é‰´æƒä»£ç ">é˜…è¯»é‰´æƒä»£ç </a><ul><li><a href="#æ•´ä½“æµç¨‹">æ•´ä½“æµç¨‹</a></li><li><a href="#tokengatewayfilter">TokenGatewayFilter</a></li><li><a href="#authfilter">AuthFilter</a></li><li><a href="#ç®¡ç†å‘˜æ ¡éªŒå®ç°">ç®¡ç†å‘˜æ ¡éªŒå®ç°</a></li></ul></li><li><a href="#è§£å†³bug">è§£å†³bug</a><ul><li><a href="#å®ç°">å®ç°</a></li><li><a href="#æµ‹è¯•-2">æµ‹è¯•</a></li><li><a href="#éƒ¨ç½²">éƒ¨ç½²</a></li></ul></li></ul></li><li><a href="#è¯¾åç»ƒä¹ ">è¯¾åç»ƒä¹ </a><ul><li><a href="#ç»ƒä¹ ä¸€-å¿«é€’å‘˜çš„é‰´æƒ">ç»ƒä¹ ä¸€ï¼šå¿«é€’å‘˜çš„é‰´æƒ</a></li><li><a href="#ç»ƒä¹ äºŒ-å¸æœºç«¯çš„é‰´æƒ">ç»ƒä¹ äºŒï¼šå¸æœºç«¯çš„é‰´æƒ</a></li></ul></li><li><a href="#è¯¾ç¨‹å®‰æ’-1">è¯¾ç¨‹å®‰æ’</a></li><li><a href="#ç½‘å…³åŠŸèƒ½">ç½‘å…³åŠŸèƒ½</a><ul><li><a href="#å•tokenå­˜åœ¨çš„é—®é¢˜">å•tokenå­˜åœ¨çš„é—®é¢˜</a></li><li><a href="#åŒtokenä¸‰éªŒè¯">åŒtokenä¸‰éªŒè¯</a></li><li><a href="#ç”¨æˆ·ç«¯tokenæ ¡éªŒä¸é‰´æƒ">ç”¨æˆ·ç«¯tokenæ ¡éªŒä¸é‰´æƒ</a><ul><li><a href="#å¾®ä¿¡å°ç¨‹åºç™»å½•æµç¨‹">å¾®ä¿¡å°ç¨‹åºç™»å½•æµç¨‹</a></li><li><a href="#åŸºæœ¬æµç¨‹">åŸºæœ¬æµç¨‹</a></li><li><a href="#ç½‘å…³æ ¡éªŒ">ç½‘å…³æ ¡éªŒ</a></li><li><a href="#æµ‹è¯•-3">æµ‹è¯•</a></li></ul></li></ul></li><li><a href="#é¢è¯•è¿ç¯é—®">é¢è¯•è¿ç¯é—®</a></li></ul></li></ul></nav><h2 id="è¯¾ç¨‹å®‰æ’" tabindex="-1">è¯¾ç¨‹å®‰æ’ <a class="header-anchor" href="#è¯¾ç¨‹å®‰æ’" aria-label="Permalink to &quot;è¯¾ç¨‹å®‰æ’&quot;">â€‹</a></h2><ul><li>äº†è§£ç¥é¢†ç‰©æµ</li><li>äº†è§£ç‰©æµè¡Œä¸š</li><li>äº†è§£é¡¹ç›®çš„æŠ€æœ¯æ¶æ„</li><li>äº†è§£é¡¹ç›®çš„ä¸šåŠ¡åŠŸèƒ½</li><li>é¡¹ç›®åŠŸèƒ½æ¼”ç¤º</li><li>æ­å»ºå¼€å‘ç¯å¢ƒ</li><li>åŸºäºç°æœ‰ä»£ç è¿›è¡Œbugä¿®å¤</li><li>é˜…è¯»å·²æœ‰çš„ä»£ç </li></ul><h2 id="åœºæ™¯è¯´æ˜" tabindex="-1">åœºæ™¯è¯´æ˜ <a class="header-anchor" href="#åœºæ™¯è¯´æ˜" aria-label="Permalink to &quot;åœºæ™¯è¯´æ˜&quot;">â€‹</a></h2><p>ç°åœ¨çš„ä½ ï¼Œå·²ç»å­¦ä¹ äº†ç›®å‰æœ€ä¸»æµçš„ç³»ç»Ÿæ¶æ„æŠ€æœ¯ã€Šå¾®æœåŠ¡æŠ€æœ¯æ ˆã€‹ï¼Œå¹¶ä¸”å‘¢ä¹Ÿæ‹¿åˆ°äº†æ»¡æ„çš„offerï¼Œå…¥èŒäº†ä¸€å®¶ç‰©æµå…¬å¸ï¼Œå…¬å¸åå«ï¼šç¥é¢†ç‰©æµå…¬å¸ã€‚</p><p>ç°åœ¨ä½ çš„å¿ƒæƒ…è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæ—¢å¼€å¿ƒåˆæ‹…å¿ƒï¼Œå¼€å¿ƒæ˜¯è¿™ä¸ªofferä½ å¾ˆæ»¡æ„ï¼Œæ‹…å¿ƒçš„æ˜¯ï¼Œå¬æœ‹å‹è¯´ç‰©æµè¡Œä¸šçš„é¡¹ç›®ä¸šåŠ¡éå¸¸å¤æ‚ï¼ŒæŠ€æœ¯æ¶‰åŠçš„ä¹Ÿæ¯”è¾ƒå¤šï¼Œè€Œè‡ªå·±ä»æ¥æ²¡æœ‰æ¥è§¦è¿‡ç‰©æµé¡¹ç›®ï¼Œå°±æ‹…å¿ƒè‡ªå·±èƒ½ä¸èƒ½Holdå¾—ä½ï¼Ÿä¸‡ä¸€â€¦â€¦</p><p>ä¸ç”¨è¿‡äºæ‹…å¿ƒï¼Œæœ¬å¥—è¯¾ç¨‹å°±æ˜¯å¸¦ç€ä½ ä¸€ç‚¹ç‚¹çš„äº†è§£é¡¹ç›®ï¼Œç«™åˆ°ä¸€ä¸ªæ–°äººçš„è§’åº¦æ¥çœ‹å¾…è¿™ä¸ªé¡¹ç›®ï¼Œä»£ç ä»å“ªé‡Œæ‹‰å–ï¼Ÿå¼€å‘è§„èŒƒæ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›ç¯å¢ƒï¼Ÿé¡¹ç›®ä¸šåŠ¡æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ â€¦â€¦</p><p><img src="'+c+'" alt="image-20220725211508122.png" loading="lazy"></p><h2 id="é¡¹ç›®ä»‹ç»" tabindex="-1">é¡¹ç›®ä»‹ç» <a class="header-anchor" href="#é¡¹ç›®ä»‹ç»" aria-label="Permalink to &quot;é¡¹ç›®ä»‹ç»&quot;">â€‹</a></h2><p>ç¥é¢†ç‰©æµæ˜¯ä¸€ä¸ªåŸºäºå¾®æœåŠ¡æ¶æ„ä½“ç³»çš„**ã€ç”Ÿäº§çº§ã€‘**ç‰©æµé¡¹ç›®ç³»ç»Ÿï¼Œè¿™å¯èƒ½æ˜¯ç›®å‰ä½ èƒ½å­¦ä¹ åˆ°çš„æœ€æ¥è¿‘ä¼ä¸šçœŸå®åœºæ™¯çš„é¡¹ç›®è¯¾ç¨‹ï¼Œå…¶ä¸šåŠ¡å®Œæ•´åº¦ã€çœŸå®åº¦ã€å¤æ‚åº¦ä¼šè®©ä½ æ„Ÿåˆ°æƒŠè®¶ï¼Œåœ¨è¿™é‡Œä½ ä¼šå­¦ä¹ åˆ°æœ€æ ¸å¿ƒçš„ç‰©æµè°ƒåº¦ç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥å­¦ä¹ åˆ°åœ¨å¤æ‚çš„å¾®æœåŠ¡æ¶æ„ä½“ç³»ä¸‹å¼€å‘ä»¥åŠç›¸å…³é—®é¢˜çš„è§£å†³ã€‚å­¦å®Œåä½ çš„æ”¶è·ä¼šå¾ˆâ€œå“‡å¡â€ã€‚</p><h3 id="å…¬å¸ä»‹ç»" tabindex="-1">å…¬å¸ä»‹ç» <a class="header-anchor" href="#å…¬å¸ä»‹ç»" aria-label="Permalink to &quot;å…¬å¸ä»‹ç»&quot;">â€‹</a></h3><p>å…¬å¸ä»2019å¹´å¼€å§‹ä¸šåŠ¡å¿«é€Ÿæ‰©å¼ ï¼Œç½‘ç‚¹æ•°é‡ä»138å®¶æ‰©å±•è‡³540å®¶ï¼Œè½¦è¾†ä»170å°å¢é•¿åˆ°800å°ã€‚åŒæ—¶ï¼ŒåŸæœ‰çš„ç³»ç»Ÿéå¸¸ç®€å•ï¼Œæ¯”å¦‚è½¦è¾†çš„è°ƒåº¦é äººå·¥æ“ä½œã€æ‰€æœ‰çš„è´§ç‰©åˆ†æ‹£ä¾é äººå‘˜ï¼Œæ ¸å¿ƒè®¢å•æ•°æ®æ‰‹åŠ¨å½•å…¥ï¼Œäººæ•ˆéå¸¸ä½ã€‚</p><p>éšç€ä¸šåŠ¡ä¸æ–­æ¼”è¿›ï¼ŒæŠ€æœ¯çš„ä¸æ–­æå‡ï¼ŒåŸæœ‰è¿è¾“ç®¡ç†ç³»ç»Ÿå·²æ— æ³•æ»¡è¶³ç°æœ‰å¿«é€Ÿæ‰©å±•ä¸‹çš„ä¸šåŠ¡éœ€æ±‚ï¼Œä½†é’ˆå¯¹ç°æœ‰ç³»ç»Ÿè¯„ä¼°åå‘ç°ï¼Œç³»ç»Ÿå‡çº§æˆæœ¬è¿œé«˜äºé‡æ–°ç ”å‘ã€‚</p><p>å› æ­¤ï¼Œå…¬å¸å†³å®šåŸºäºç°æœ‰ä¸šåŠ¡ä½“ç³»è¿›è¡Œé‡æ–°æ„å»ºï¼Œæ‰“é€ ä¸€å¥—æ–°çš„TMSè¿è¾“ç³»ç»Ÿï¼Œç›´æ¥æ›´æ›¿åŸæœ‰ç³»ç»Ÿã€‚ä¸šåŠ¡ä¾§é‡äºå±•ç¤ºè½¦è¾†è°ƒç ”ã€çº¿è·¯è§„åˆ’ç­‰æ ¸å¿ƒä¸šåŠ¡æµç¨‹ï¼Œæ“ä½œæ™ºèƒ½åŒ–ï¼Œå¤§å¹…åº¦æå‡äººæ•ˆåŠç®¡æ§æ•ˆç‡ã€‚</p><h3 id="ç»„ç»‡æ¶æ„" tabindex="-1">ç»„ç»‡æ¶æ„ <a class="header-anchor" href="#ç»„ç»‡æ¶æ„" aria-label="Permalink to &quot;ç»„ç»‡æ¶æ„&quot;">â€‹</a></h3><p><img src="'+F+'" alt="" loading="lazy"></p><p>Javaå¼€å‘äººå‘˜æ‰€åœ¨çš„ä¸€çº§éƒ¨é—¨ä¸ºä¿¡æ¯ä¸­å¿ƒï¼Œä¸»è¦è´Ÿè´£é›†å›¢æ–°ç³»ç»Ÿçš„ç ”å‘ã€ç»´æŠ¤ã€æ›´æ–°è¿­ä»£ã€‚ä¿¡æ¯ä¸­å¿ƒä¸‹è®¾3ä¸ª2çº§éƒ¨é—¨ï¼Œäº§å“éƒ¨ã€è¿ç»´éƒ¨ä»¥åŠå¼€å‘éƒ¨é—¨ï¼Œå¼€å‘éƒ¨é—¨æ€»è®¡42äººï¼ŒæŒ‰ç…§ä»¥ä¸šåŠ¡çº¿åˆ’åˆ†ä¸º4ä¸ªç»„ã€TMSé¡¹ç›®ç»„ä¹‹å¤–ã€WMSé¡¹ç›®ç»„ã€OMSé¡¹ç›®ã€CRMç»„ã€‚</p><p>TMS(Transportation Management System è¿è¾“ç®¡ç†ç³»ç»Ÿ) é¡¹ç›®ç»„ç›®å‰å…±8äººï¼Œå…¶ä¸­å‰ç«¯3äººï¼Œåç«¯5äººã€‚åç«¯äººå‘˜æ ¹æ®ä»¥ä¸‹åŠŸèƒ½æ¨¡å—æ‹†åˆ†è¿›è¡Œä»»åŠ¡åˆ†é…ï¼Œå®é™…ä¸šåŠ¡ä¸­ä¹Ÿä¸å¯èƒ½æ˜¯ä¸€äººåŒ…æ‰“å¤©ä¸‹ï¼Œåˆ†å·¥åˆä½œæ‰æ˜¯å¸¸æ€åŒ–æ“ä½œã€‚</p><h3 id="äº§å“è¯´æ˜" tabindex="-1">äº§å“è¯´æ˜ <a class="header-anchor" href="#äº§å“è¯´æ˜" aria-label="Permalink to &quot;äº§å“è¯´æ˜&quot;">â€‹</a></h3><p>ç¥é¢†ç‰©æµç³»ç»Ÿç±»ä¼¼é¡ºä¸°é€Ÿè¿ï¼Œæ˜¯å‘Cç«¯ç”¨æˆ·æä¾›å¿«é€’æœåŠ¡çš„ç³»ç»Ÿã€‚ç«å“æœ‰ï¼šé¡ºä¸°ã€ä¸­é€šã€åœ†é€šã€äº¬ä¸œå¿«é€’ç­‰ã€‚é¡¹ç›®äº§å“ä¸»è¦æœ‰4ç«¯äº§å“ï¼š</p><ul><li>ç”¨æˆ·ç«¯ï¼šåŸºäºå¾®ä¿¡å°ç¨‹åºå¼€å‘ï¼Œå¤–éƒ¨å®¢æˆ·ä½¿ç”¨ï¼Œå¯ä»¥å¯„ä»¶ã€æŸ¥è¯¢ç‰©æµä¿¡æ¯ç­‰ã€‚</li><li>å¿«é€’å‘˜ç«¯ï¼šåŸºäºå®‰å“å¼€å‘çš„æ‰‹æœºAPPï¼Œå…¬å¸å†…éƒ¨çš„å¿«é€’å‘˜ä½¿ç”¨ï¼Œå¯ä»¥æ¥æ”¶å–æ´¾ä»¶ä»»åŠ¡ç­‰ã€‚</li><li>å¸æœºç«¯ï¼šåŸºäºå®‰å“å¼€å‘çš„æ‰‹æœºAPPï¼Œå…¬å¸å†…éƒ¨çš„å¸æœºä½¿ç”¨ï¼Œå¯ä»¥æ¥æ”¶è¿è¾“ä»»åŠ¡ã€ä¸ŠæŠ¥ä½ç½®ä¿¡æ¯ç­‰ã€‚</li><li>åå°ç³»ç»Ÿç®¡ç†ï¼šåŸºäºvueå¼€å‘ï¼ŒPCç«¯ä½¿ç”¨ï¼Œå…¬å¸å†…éƒ¨ç®¡ç†å‘˜ç”¨æˆ·ä½¿ç”¨ï¼Œå¯ä»¥è¿›è¡ŒåŸºç¡€æ•°æ®ç»´æŠ¤ã€è®¢å•ç®¡ç†ã€è¿å•ç®¡ç†ç­‰ã€‚</li></ul><h2 id="ç‰©æµè¡Œä¸š" tabindex="-1">ç‰©æµè¡Œä¸š <a class="header-anchor" href="#ç‰©æµè¡Œä¸š" aria-label="Permalink to &quot;ç‰©æµè¡Œä¸š&quot;">â€‹</a></h2><p>ä»å¹¿åº¦ä¸Šæ¥è¯´ï¼Œç‰©æµç³»ç»Ÿå¯ä»¥ç†è§£ä¸ºç”±å¤šä¸ªå­ç³»ç»Ÿç»„æˆï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥ä¸€èˆ¬ç»¼åˆå‹ç‰©æµç³»ç»Ÿä¸¾ä¾‹ï¼Œåœ¨æ•´ä½“æ¡†æ¶ä¸Šå¯ä»¥åˆ†ä¸ºä»“å‚¨ç³»ç»ŸWMSã€è¿é…ç³»ç»ŸTMSã€å•æ®ç³»ç»ŸOMSå’Œè®¡è´¹ç³»ç»ŸBMSã€‚</p><p>è¿™å››å¤§ç³»ç»Ÿæœ¬è´¨ä¸Šè§£å†³äº†ç‰©æµè¡Œä¸šçš„å››å¤§æ ¸å¿ƒé—®é¢˜ï¼šæ€ä¹ˆå­˜æ”¾ã€æ€ä¹ˆè¿é€ã€æ€ä¹ˆè·Ÿè¿›ã€æ€ä¹ˆç»“ç®—ã€‚</p><p>ç¥é¢†ç‰©æµç³»ç»Ÿï¼Œæ˜¯TMSè¿é…ç³»ç»Ÿï¼Œæœ¬è´¨ä¸Šè§£å†³çš„æ˜¯æ€æ ·è¿é€çš„é—®é¢˜ã€‚</p><p><img src="'+m+'" alt="image.png" loading="lazy"></p><h2 id="ç³»ç»Ÿæ¶æ„" tabindex="-1">ç³»ç»Ÿæ¶æ„ <a class="header-anchor" href="#ç³»ç»Ÿæ¶æ„" aria-label="Permalink to &quot;ç³»ç»Ÿæ¶æ„&quot;">â€‹</a></h2><p><strong>ç³»ç»Ÿæ¶æ„</strong></p><p><img src="'+u+'" alt="" loading="lazy"></p><p><strong>æŠ€æœ¯æ¶æ„</strong></p><p><img src="'+A+'" alt="" loading="lazy"></p><h2 id="åŠŸèƒ½æ¼”ç¤º" tabindex="-1">åŠŸèƒ½æ¼”ç¤º <a class="header-anchor" href="#åŠŸèƒ½æ¼”ç¤º" aria-label="Permalink to &quot;åŠŸèƒ½æ¼”ç¤º&quot;">â€‹</a></h2><h3 id="éœ€æ±‚æ–‡æ¡£" tabindex="-1">éœ€æ±‚æ–‡æ¡£ <a class="header-anchor" href="#éœ€æ±‚æ–‡æ¡£" aria-label="Permalink to &quot;éœ€æ±‚æ–‡æ¡£&quot;">â€‹</a></h3><p>ä¸‹é¢å°†æ¼”ç¤ºå››ç«¯çš„ä¸»è¦åŠŸèƒ½ï¼Œæ›´å¤šçš„åŠŸèƒ½å…·ä½“æŸ¥çœ‹å„ç«¯çš„éœ€æ±‚æ–‡æ¡£ã€‚</p><table><thead><tr><th>ç”¨æˆ·ç«¯</th><th><a href="https://share.lanhuapp.com/#/invite?sid=qx01hbI7" target="_blank" rel="noreferrer">https://share.lanhuapp.com/#/invite?sid=qx01hbI7</a> å¯†ç : UxGE</th></tr></thead><tbody><tr><td>å¿«é€’å‘˜ç«¯</td><td><a href="https://share.lanhuapp.com/#/invite?sid=qxe42Dya" target="_blank" rel="noreferrer">https://share.lanhuapp.com/#/invite?sid=qxe42Dya</a> å¯†ç : Nomz</td></tr><tr><td>å¸æœºç«¯</td><td><a href="https://share.lanhuapp.com/#/invite?sid=qX0NEmro" target="_blank" rel="noreferrer">https://share.lanhuapp.com/#/invite?sid=qX0NEmro</a> å¯†ç : yrzZ</td></tr><tr><td>ç®¡ç†ç«¯</td><td><a href="https://share.lanhuapp.com/#/invite?sid=qX0axVem" target="_blank" rel="noreferrer">https://share.lanhuapp.com/#/invite?sid=qX0axVem</a> å¯†ç : fh3i</td></tr></tbody></table><h3 id="åŠŸèƒ½æ¶æ„" tabindex="-1">åŠŸèƒ½æ¶æ„ <a class="header-anchor" href="#åŠŸèƒ½æ¶æ„" aria-label="Permalink to &quot;åŠŸèƒ½æ¶æ„&quot;">â€‹</a></h3><img src="'+D+'" style="zoom:50%;"><h3 id="ä¸šåŠ¡æµç¨‹" tabindex="-1">ä¸šåŠ¡æµç¨‹ <a class="header-anchor" href="#ä¸šåŠ¡æµç¨‹" aria-label="Permalink to &quot;ä¸šåŠ¡æµç¨‹&quot;">â€‹</a></h3><p><img src="'+b+'" alt="" loading="lazy"></p><div class="info custom-block"><p class="custom-block-title">æµç¨‹è¯´æ˜ï¼š</p><ul><li>ç”¨æˆ·åœ¨**ã€ç”¨æˆ·ç«¯ã€‘**ä¸‹å•åï¼Œç”Ÿæˆè®¢å•</li><li>ç³»ç»Ÿä¼šæ ¹æ®è®¢å•ç”Ÿæˆ**ã€å–ä»¶ä»»åŠ¡ã€‘<strong>ï¼Œå¿«é€’å‘˜ä¸Šé—¨å–ä»¶åæˆåŠŸåç”Ÿæˆ</strong>ã€è¿å•ã€‘**</li><li>ç”¨æˆ·å¯¹è®¢å•è¿›è¡Œæ”¯ä»˜ï¼Œä¼šäº§ç”Ÿ**ã€äº¤æ˜“å•ã€‘**</li><li>å¿«ä»¶å¼€å§‹è¿è¾“ï¼Œä¼šç»å†èµ·å§‹è¥ä¸šéƒ¨ã€åˆ†æ‹£ä¸­å¿ƒã€è½¬è¿ä¸­å¿ƒã€åˆ†æ‹£ä¸­å¿ƒã€ç»ˆç‚¹è¥ä¸šéƒ¨ä¹‹é—´çš„è½¬è¿è¿è¾“ï¼Œåœ¨æ­¤æœŸé—´ä¼šæœ‰å¤šä¸ª**ã€è¿è¾“ä»»åŠ¡ã€‘**</li><li>åˆ°è¾¾ç»ˆç‚¹ç½‘ç‚¹åï¼Œç³»ç»Ÿä¼šç”Ÿæˆ**ã€æ´¾ä»¶ä»»åŠ¡ã€‘**ï¼Œå¿«é€’å‘˜è¿›è¡Œæ´¾ä»¶ä½œä¸š</li><li>æœ€åï¼Œç”¨æˆ·å°†è¿›è¡Œç­¾æ”¶æˆ–æ‹’æ”¶æ“ä½œ</li></ul></div><h3 id="ç”¨æˆ·ç«¯" tabindex="-1">ç”¨æˆ·ç«¯ <a class="header-anchor" href="#ç”¨æˆ·ç«¯" aria-label="Permalink to &quot;ç”¨æˆ·ç«¯&quot;">â€‹</a></h3><p>åŠŸèƒ½æ¼”ç¤ºæ“ä½œè§†é¢‘åˆ—è¡¨ï¼š</p><table><thead><tr><th>ä¸‹å•æ“ä½œ</th><th><a href="https://yjy-slwl-oss.oss-cn-hangzhou.aliyuncs.com/0c8fc60a-2cf5-4140-9592-124cb3352fd0.mp4" target="_blank" rel="noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></th></tr></thead><tbody><tr><td>å–æ¶ˆè®¢å•</td><td><a href="https://yjy-slwl-oss.oss-cn-hangzhou.aliyuncs.com/efd2553b-69ab-4ec1-ad71-f0fd27c84165.mp4" target="_blank" rel="noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></td></tr><tr><td>åœ°å€ç°¿</td><td><a href="https://yjy-slwl-oss.oss-cn-hangzhou.aliyuncs.com/1fcbdd1e-70bc-461c-9b0e-60ec75edbabb.mp4" target="_blank" rel="noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></td></tr></tbody></table><p><img src="'+f+'" alt="image.png" loading="lazy"></p><p><img src="'+C+'" alt="image.png" loading="lazy"></p><p><img src="'+B+'" alt="image.png" loading="lazy"></p><h3 id="å¿«é€’å‘˜ç«¯" tabindex="-1">å¿«é€’å‘˜ç«¯ <a class="header-anchor" href="#å¿«é€’å‘˜ç«¯" aria-label="Permalink to &quot;å¿«é€’å‘˜ç«¯&quot;">â€‹</a></h3><p>åŠŸèƒ½æ¼”ç¤ºæ“ä½œè§†é¢‘åˆ—è¡¨ï¼š</p><table><thead><tr><th>æ´¾ä»¶æ“ä½œæµç¨‹</th><th><a href="https://yjy-slwl-oss.oss-cn-hangzhou.aliyuncs.com/7bb3000d-69b8-473f-9d6b-d391b8c28a9f.mp4" target="_blank" rel="noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></th></tr></thead><tbody><tr><td>å–ä»¶æ“ä½œæµç¨‹</td><td><a href="https://yjy-slwl-oss.oss-cn-hangzhou.aliyuncs.com/7767cda8-8e83-4c5c-a976-634815ec0a10.mp4" target="_blank" rel="noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></td></tr><tr><td>å…¨éƒ¨å–æ´¾æ“ä½œæµç¨‹</td><td><a href="https://outin-ffd84744973f11eb806300163e038793.oss-cn-beijing.aliyuncs.com/sv/605f258-1844feb861d/605f258-1844feb861d.mp4" target="_blank" rel="noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></td></tr><tr><td>æœç´¢æ“ä½œæµç¨‹</td><td><a href="https://outin-ffd84744973f11eb806300163e038793.oss-cn-beijing.aliyuncs.com/sv/60a0b1bf-1845000a4d0/60a0b1bf-1845000a4d0.mp4" target="_blank" rel="noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></td></tr><tr><td>æ¶ˆæ¯æ“ä½œæµç¨‹</td><td><a href="https://outin-ffd84744973f11eb806300163e038793.oss-cn-beijing.aliyuncs.com/sv/38c12638-18450c563db/38c12638-18450c563db.mp4" target="_blank" rel="noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></td></tr></tbody></table><p><img src="'+v+'" alt="image.png" loading="lazy"><img src="'+x+'" alt="image.png" loading="lazy"><img src="'+w+'" alt="image.png" loading="lazy"><img src="'+q+'" alt="image.png" loading="lazy"></p><h3 id="å¸æœºç«¯" tabindex="-1">å¸æœºç«¯ <a class="header-anchor" href="#å¸æœºç«¯" aria-label="Permalink to &quot;å¸æœºç«¯&quot;">â€‹</a></h3><p><a href="https://outin-ffd84744973f11eb806300163e038793.oss-cn-beijing.aliyuncs.com/sv/4ffdd092-184501a12ff/4ffdd092-184501a12ff.mp4" target="_blank" rel="noreferrer">ç‚¹å‡»æŸ¥çœ‹æ¼”ç¤ºè§†é¢‘</a><img src="'+_+'" alt="image.png" loading="lazy"><img src="'+T+'" alt="image.png" loading="lazy"><img src="'+S+'" alt="image.png" loading="lazy"><img src="'+O+'" alt="image.png" loading="lazy"><img src="'+j+'" alt="image.png" loading="lazy"></p><h3 id="åå°ç®¡ç†ç³»ç»Ÿ" tabindex="-1">åå°ç®¡ç†ç³»ç»Ÿ <a class="header-anchor" href="#åå°ç®¡ç†ç³»ç»Ÿ" aria-label="Permalink to &quot;åå°ç®¡ç†ç³»ç»Ÿ&quot;">â€‹</a></h3><p>åŠŸèƒ½æ¼”ç¤ºæ“ä½œè§†é¢‘åˆ—è¡¨ï¼š</p><table><thead><tr><th>å»ºç«‹æœºæ„</th><th><a href="https://yjy-slwl-oss.oss-cn-hangzhou.aliyuncs.com/44443260-b57f-41f8-a1f2-22c44b1c16c1.mp4" target="_blank" rel="noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></th></tr></thead><tbody><tr><td>æ–°å»ºå‘˜å·¥</td><td><a href="https://yjy-slwl-oss.oss-cn-hangzhou.aliyuncs.com/ab24e727-9c1f-458c-a8c3-b2d3cbfce46d.mp4" target="_blank" rel="noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></td></tr><tr><td>ç»˜åˆ¶ä½œä¸šèŒƒå›´</td><td><a href="https://yjy-slwl-oss.oss-cn-hangzhou.aliyuncs.com/9a1e3679-38eb-4585-b41b-7d9277dc1da0.mp4" target="_blank" rel="noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></td></tr><tr><td>æ–°å»ºçº¿è·¯</td><td><a href="https://yjy-slwl-oss.oss-cn-hangzhou.aliyuncs.com/cd62d82c-7910-4df0-835b-08854ecb0e79.mp4" target="_blank" rel="noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></td></tr><tr><td>å¯ç”¨è½¦è¾†</td><td><a href="https://yjy-slwl-oss.oss-cn-hangzhou.aliyuncs.com/5d8adc94-201f-43ee-8ef1-7906e5d8f272.mp4" target="_blank" rel="noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></td></tr></tbody></table><p><img src="'+P+'" alt="image.png" loading="lazy"></p><p><img src="'+R+'" alt="image.png" loading="lazy"></p><p><img src="'+z+'" alt="image.png" loading="lazy"></p><p><img src="'+I+'" alt="image.png" loading="lazy"></p><p><img src="'+U+'" alt="image.png" loading="lazy"></p><p><img src="'+M+'" alt="image.png" loading="lazy"></p><p><img src="'+G+'" alt="image.png" loading="lazy"></p><p><img src="'+N+'" alt="image.png" loading="lazy"></p><p><img src="'+L+'" alt="image.png" loading="lazy"></p><h2 id="å¼€å‘ç¯å¢ƒ" tabindex="-1">å¼€å‘ç¯å¢ƒ <a class="header-anchor" href="#å¼€å‘ç¯å¢ƒ" aria-label="Permalink to &quot;å¼€å‘ç¯å¢ƒ&quot;">â€‹</a></h2><h3 id="å¼€å‘æ¨¡å¼" tabindex="-1">å¼€å‘æ¨¡å¼ <a class="header-anchor" href="#å¼€å‘æ¨¡å¼" aria-label="Permalink to &quot;å¼€å‘æ¨¡å¼&quot;">â€‹</a></h3><p>åœ¨ç¥é¢†ç‰©æµå¼€å‘å›¢é˜Ÿä¸­ï¼Œé‡‡ç”¨äº†åˆ†ç»„åä½œå¼€å‘çš„æ¨¡å¼ï¼Œæ•´ä¸ªå¼€å‘å›¢é˜Ÿåˆ†ä¸º5ä¸ªå°ç»„ï¼Œæ¯ä¸ªå°ç»„4~5äººï¼Œä¸åŒçš„åˆ†ç»„è´Ÿè´£ä¸åŒçš„å¾®æœåŠ¡ã€‚</p><p>å¼€å‘ç¯å¢ƒåˆ†ä¸ºæœ¬åœ°å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿæˆç¯å¢ƒï¼š</p><ul><li>**æœ¬åœ°å¼€å‘ç¯å¢ƒï¼š**è‡ªå·±çš„ç”µè„‘ç¯å¢ƒ</li><li>**æµ‹è¯•ç¯å¢ƒï¼š**åœ¨å†…ç½‘ä¸­æ­å»ºçš„ä¸€å¥—å¤§å®¶éƒ½å¯ä»¥è®¿é—®ä½¿ç”¨çš„ç¯å¢ƒ</li><li>**ç”Ÿæˆç¯å¢ƒï¼š**æœ€ç»ˆç»™ç”¨æˆ·ä½¿ç”¨çš„ç¯å¢ƒ</li></ul><h3 id="å›¢é˜Ÿåˆ†å·¥" tabindex="-1">å›¢é˜Ÿåˆ†å·¥ <a class="header-anchor" href="#å›¢é˜Ÿåˆ†å·¥" aria-label="Permalink to &quot;å›¢é˜Ÿåˆ†å·¥&quot;">â€‹</a></h3><p>ç›®å‰ç¥é¢†ç‰©æµé¡¹ç›®æ‹¥æœ‰<strong>19</strong>ä¸ªå¾®æœåŠ¡ï¼Œ<strong>1</strong>ä¸ªç½‘å…³ï¼Œ<strong>1</strong>ä¸ªparentå·¥ç¨‹ï¼Œ<strong>2</strong>ä¸ªå…¬å…±ä¾èµ–å·¥ç¨‹ï¼Œè¿™äº›å·¥ç¨‹ç”±ä¸Šè¿°çš„<strong>5</strong>ä¸ªå°ç»„å…±åŒç»´æŠ¤å¼€å‘ã€‚</p><p><strong>æ–°å…¥èŒçš„ä½ ï¼ŒåŠ å…¥åˆ°äº†å¼€å‘ä¸€ç»„ã€‚</strong></p><table><thead><tr><th>å¼€å‘ç»„/è´Ÿè´£æ¨¡å—</th><th>å¼€å‘ä¸€ç»„</th><th>å¼€å‘äºŒç»„</th><th>å¼€å‘ä¸‰ç»„</th><th>å¼€å‘å››ç»„</th><th>å¼€å‘äº”ç»„</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><a href="http://git.sl-express.com/sl/sl-express-parent.git" target="_blank" rel="noreferrer">sl-express-parent</a></td><td>â—</td><td></td><td></td><td></td><td></td><td>çˆ¶å·¥ç¨‹</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-common.git" target="_blank" rel="noreferrer">sl-express-common</a></td><td>â—</td><td></td><td></td><td></td><td></td><td>é€šç”¨å·¥ç¨‹</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-mq.git" target="_blank" rel="noreferrer">sl-express-mq</a></td><td>â—</td><td></td><td></td><td></td><td></td><td>ç»Ÿä¸€æ¶ˆæ¯ä»£ç </td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-gateway.git" target="_blank" rel="noreferrer">sl-express-gateway</a></td><td>â—</td><td></td><td></td><td></td><td></td><td>ç½‘å…³</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-base-service.git" target="_blank" rel="noreferrer">sl-express-ms-base</a></td><td>â—</td><td></td><td></td><td></td><td></td><td>åŸºç¡€å¾®æœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-carriage-service.git" target="_blank" rel="noreferrer">sl-express-ms-carriage</a></td><td></td><td>â—</td><td></td><td></td><td></td><td>è¿è´¹å¾®æœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-courier-service.git" target="_blank" rel="noreferrer">sl-express-ms-courier</a></td><td></td><td>â—</td><td></td><td></td><td></td><td>å¿«é€’å‘˜å¾®æœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-dispatch-service.git" target="_blank" rel="noreferrer">sl-express-ms-dispatch</a></td><td></td><td></td><td>â—</td><td></td><td></td><td>è°ƒåº¦å¾®æœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-driver-service.git" target="_blank" rel="noreferrer">sl-express-ms-driver</a></td><td></td><td></td><td></td><td>â—</td><td></td><td>å¸æœºå¾®æœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-oms-service.git" target="_blank" rel="noreferrer">sl-express-ms-oms</a></td><td></td><td>â—</td><td></td><td></td><td></td><td>è®¢å•å¾®æœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-service-scope-service.git" target="_blank" rel="noreferrer">sl-express-ms-service-scope</a></td><td></td><td></td><td></td><td>â—</td><td></td><td>æœåŠ¡èŒƒå›´å¾®æœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-sms-service.git" target="_blank" rel="noreferrer">sl-express-ms-sms</a></td><td></td><td></td><td></td><td>â—</td><td></td><td>çŸ­ä¿¡å¾®æœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-track-service.git" target="_blank" rel="noreferrer">sl-express-ms-track</a></td><td></td><td>â—</td><td></td><td></td><td></td><td>è½¨è¿¹å¾®æœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-trade-service.git" target="_blank" rel="noreferrer">sl-express-ms-trade</a></td><td></td><td></td><td>â—</td><td></td><td></td><td>æ”¯ä»˜å¾®æœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-transport-service.git" target="_blank" rel="noreferrer">sl-express-ms-transport</a></td><td></td><td></td><td>â—</td><td></td><td></td><td>è·¯çº¿å¾®æœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-transport-info-service.git" target="_blank" rel="noreferrer">sl-express-ms-transport-info</a></td><td></td><td></td><td>â—</td><td></td><td></td><td>ç‰©æµä¿¡æ¯å¾®æœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-user-service.git" target="_blank" rel="noreferrer">sl-express-ms-user</a></td><td></td><td></td><td></td><td></td><td>â—</td><td>ç”¨æˆ·å¾®æœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-web-courier.git" target="_blank" rel="noreferrer">sl-express-ms-web-courier</a></td><td></td><td>â—</td><td></td><td></td><td></td><td>å¿«é€’å‘˜webæœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-web-customer.git" target="_blank" rel="noreferrer">sl-express-ms-web-customer</a></td><td></td><td></td><td></td><td></td><td>â—</td><td>ç”¨æˆ·webæœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-web-driver.git" target="_blank" rel="noreferrer">sl-express-ms-web-driver</a></td><td></td><td></td><td></td><td>â—</td><td></td><td>å¸æœºwebæœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-web-manager.git" target="_blank" rel="noreferrer">sl-express-ms-web-manager</a></td><td></td><td></td><td></td><td></td><td>â—</td><td>åå°webæœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-work-service.git" target="_blank" rel="noreferrer">sl-express-ms-work</a></td><td></td><td></td><td>â—</td><td></td><td></td><td>è¿å•å¾®æœåŠ¡</td></tr><tr><td><a href="http://git.sl-express.com/sl/sl-express-ms-search-service.git" target="_blank" rel="noreferrer">sl-express-ms-search</a></td><td></td><td></td><td></td><td></td><td>â—</td><td>æœç´¢å¾®æœåŠ¡</td></tr></tbody></table><div class="info custom-block"><p class="custom-block-title">æ€è€ƒï¼šæ˜¯å¦éœ€è¦æŠŠæ‰€æœ‰çš„å·¥ç¨‹ä»£ç éƒ½æ‹‰å–åˆ°æœ¬åœ°è¿›è¡Œç¼–è¯‘è¿è¡Œï¼Ÿ</p><p>ä¸éœ€è¦çš„ã€‚ä½ åªéœ€è¦å°†è‡ªå·±å°†è¦è´Ÿè´£çš„å¼€å‘ä»»åŠ¡ç›¸å…³çš„ä»£ç æ‹‰å–åˆ°æœ¬åœ°è¿›è¡Œå¼€å‘å³å¯ï¼Œå…¶ä»–çš„æœåŠ¡éƒ½å¯ä»¥è°ƒç”¨æµ‹è¯•ç¯å¢ƒæ­£åœ¨è¿è¡Œçš„æœåŠ¡ã€‚</p><p>å¦å¤–ï¼Œä½ æœ‰å¯èƒ½æ˜¯æ²¡æœ‰æƒé™æ‹‰å–åˆ°å…¶ä»–å¼€å‘ç»„çš„ä»£ç çš„ã€‚</p></div><br><p>å¾®æœåŠ¡é—´è°ƒç”¨å…³ç³»å¦‚ä¸‹ï¼š <img src="'+H+'" alt="" loading="lazy"></p><blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œå››ä¸ªç«¯çš„è¯·æ±‚éƒ½ä¼šç»Ÿä¸€è¿›å…¥ç½‘å…³ï¼Œå†åˆ†å‘åˆ°å¯¹åº”çš„å››ä¸ªwebå¾®æœåŠ¡ï¼Œå†ç”±webå¾®æœåŠ¡è¯·æ±‚å…¶ä»–å¾®æœåŠ¡å®Œæˆä¸šåŠ¡ã€‚</p></blockquote><p><a href="https://sl-express.itheima.net/#/zh-cn/modules/%E7%A5%9E%E9%A2%86%E7%89%A9%E6%B5%81%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB" target="_blank" rel="noreferrer">æŸ¥çœ‹å¾®æœåŠ¡é—´çš„ä¾èµ–å…³ç³»</a></p><h3 id="è½¯ä»¶ç¯å¢ƒ" tabindex="-1">è½¯ä»¶ç¯å¢ƒ <a class="header-anchor" href="#è½¯ä»¶ç¯å¢ƒ" aria-label="Permalink to &quot;è½¯ä»¶ç¯å¢ƒ&quot;">â€‹</a></h3><p>ä¸ºäº†æ¨¡æ‹Ÿä¼ä¸šä¸­çš„å¼€å‘ç¯å¢ƒï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡VMwareå¯¼å…¥linuxè™šæ‹Ÿæœºï¼Œè¯¥è™šæ‹Ÿæœºä¸­å·²ç»å®‰è£…äº†è¯¾ç¨‹ä¸­æ‰€éœ€è¦çš„å„ç§ç¯å¢ƒï¼ŒåŒ…æ‹¬ï¼Œgitã€mavenç§æœã€Jenkinsã€MySQLã€RabbitMQç­‰ã€‚</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>å…³äºJDKç‰ˆæœ¬çš„è¯´æ˜ï¼šç¥é¢†ç‰©æµé¡¹ç›®ä½¿ç”¨çš„JDKç‰ˆæœ¬ä¸º11ï¼Œéœ€è¦åŒå­¦ä»¬ç»Ÿä¸€ä¸‹ç¯å¢ƒï¼ŒJDK11çš„å®‰è£…åŒ…åœ¨èµ„æ–™ä¸­æœ‰æä¾›ã€‚</p><p>ç›®å½•ï¼šèµ„æ–™\\è½¯ä»¶åŒ…\\jdk-11.0.15.1_windows-x64_bin.exe</p></div><blockquote><p>ğŸ””å…³é—­æœ¬åœ°å¼€å‘ç¯å¢ƒçš„é˜²ç«å¢™ï¼ˆå¾ˆé‡è¦ï¼ï¼‰</p></blockquote><h4 id="å¯¼å…¥è™šæ‹Ÿæœº" tabindex="-1">å¯¼å…¥è™šæ‹Ÿæœº <a class="header-anchor" href="#å¯¼å…¥è™šæ‹Ÿæœº" aria-label="Permalink to &quot;å¯¼å…¥è™šæ‹Ÿæœº&quot;">â€‹</a></h4><p>å…·ä½“å‚è€ƒæ–‡æ¡£ï¼š<a href="https://www.yuque.com/zhangzhijun-91vgw/xze2gr/gav9r8x8kvd2eyxg" target="_blank" rel="noreferrer">è™šæ‹Ÿæœºå¯¼å…¥æ‰‹å†Œ</a></p><div class="danger custom-block"><p class="custom-block-title">æ³¨æ„ï¼šåªè¦æŒ‰ç…§æ–‡æ¡£å¯¼å…¥è™šæ‹Ÿæœºå³å¯ï¼Œå…¶ä»–è½¯ä»¶æ— éœ€è‡ªå·±å®‰è£…ï¼Œéƒ½å·²ç»å®‰è£…äº†ï¼Œå¹¶ä¸”å¼€æœºè‡ªå¯ã€‚</p></div><p><img src="'+V+`" alt="image-20220728162541120.png" loading="lazy"></p><p>é€šè¿‡dpså‘½ä»¤å¯ä»¥æŸ¥è¯¢ä¸Šè¿°åˆ—è¡¨ï¼Œdpsæ˜¯è‡ªå®šä¹‰å‘½ä»¤ã€‚</p><p>è‡ªå®šä¹‰å‘½ä»¤æ–¹æ³•å¦‚ä¸‹ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å¢åŠ å¦‚ä¸‹å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;docker ps --format &quot;table{{.ID}}\\t{{.Names}}\\t{{.Status}}\\t{{.Ports}}&quot;&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ä¿å­˜é€€å‡º</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ç”Ÿæ•ˆ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span></span></code></pre></div><h4 id="é…ç½®æœ¬æœºhosts" tabindex="-1">é…ç½®æœ¬æœºhosts <a class="header-anchor" href="#é…ç½®æœ¬æœºhosts" aria-label="Permalink to &quot;é…ç½®æœ¬æœºhosts&quot;">â€‹</a></h4><p>åœ¨æœ¬æœºhostsæ–‡ä»¶ä¸­è®¾ç½®å¦‚ä¸‹é…ç½®ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.150.101</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git.sl-express.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.150.101</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> maven.sl-express.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.150.101</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenkins.sl-express.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.150.101</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> auth.sl-express.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.150.101</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rabbitmq.sl-express.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.150.101</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nacos.sl-express.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.150.101</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> neo4j.sl-express.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.150.101</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xxl-job.sl-express.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.150.101</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> eaglemap.sl-express.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.150.101</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seata.sl-express.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.150.101</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> skywalking.sl-express.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.150.101</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> api.sl-express.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.150.101</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin.sl-express.com</span></span></code></pre></div><p>æ‰“å¼€æµè§ˆå™¨æµ‹è¯•ï¼š<a href="http://git.sl-express.com/" target="_blank" rel="noreferrer">http://git.sl-express.com/</a><img src="`+W+`" alt="image-20220728164743695.png" loading="lazy"></p><p>çœ‹åˆ°è¿™ä¸ªé¡µé¢å°±è¯´æ˜hostså·²ç»ç”Ÿæ•ˆã€‚ï¼ˆä¹Ÿå¯ä»¥å†è¯•è¯•å…¶ä»–çš„ï¼Œæ¯”å¦‚ï¼šmavenç§æœã€jenkinsç­‰ï¼‰</p><h4 id="æœåŠ¡åˆ—è¡¨" tabindex="-1">æœåŠ¡åˆ—è¡¨ <a class="header-anchor" href="#æœåŠ¡åˆ—è¡¨" aria-label="Permalink to &quot;æœåŠ¡åˆ—è¡¨&quot;">â€‹</a></h4><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>è¯´æ˜ï¼šå¦‚æœé€šè¿‡åŸŸåè®¿é—®ï¼Œæ— éœ€è®¾ç½®ç«¯å£ã€‚</p></div><table><thead><tr><th>åç§°</th><th>åœ°å€</th><th>ç”¨æˆ·å/å¯†ç </th><th>ç«¯å£</th></tr></thead><tbody><tr><td>git</td><td><a href="http://git.sl-express.com/" target="_blank" rel="noreferrer">http://git.sl-express.com/</a></td><td>sl/sl123</td><td>10880</td></tr><tr><td>maven</td><td><a href="http://maven.sl-express.com/nexus/" target="_blank" rel="noreferrer">http://maven.sl-express.com/nexus/</a></td><td>admin/admin123</td><td>8081</td></tr><tr><td>jenkins</td><td><a href="http://jenkins.sl-express.com/" target="_blank" rel="noreferrer">http://jenkins.sl-express.com/</a></td><td>root/123</td><td>8090</td></tr><tr><td>æƒé™ç®¡å®¶</td><td><a href="http://auth.sl-express.com/api/authority/static/index.html" target="_blank" rel="noreferrer">http://auth.sl-express.com/api/authority/static/index.html</a></td><td>admin/123456</td><td>8764</td></tr><tr><td>RabbitMQ</td><td><a href="http://rabbitmq.sl-express.com/" target="_blank" rel="noreferrer">http://rabbitmq.sl-express.com/</a></td><td>sl/sl321</td><td>15672</td></tr><tr><td>MySQL</td><td>-</td><td>root/123</td><td>3306</td></tr><tr><td>nacos</td><td><a href="http://nacos.sl-express.com/nacos/" target="_blank" rel="noreferrer">http://nacos.sl-express.com/nacos/</a></td><td>nacos/nacos</td><td>8848</td></tr><tr><td>neo4j</td><td><a href="http://neo4j.sl-express.com/browser/" target="_blank" rel="noreferrer">http://neo4j.sl-express.com/browser/</a></td><td>neo4j/neo4j123</td><td>7474</td></tr><tr><td>xxl-job</td><td><a href="http://xxl-job.sl-express.com/xxl-job-admin" target="_blank" rel="noreferrer">http://xxl-job.sl-express.com/xxl-job-admin</a></td><td>admin/123456</td><td>28080</td></tr><tr><td>EagleMap</td><td><a href="http://eaglemap.sl-express.com/" target="_blank" rel="noreferrer">http://eaglemap.sl-express.com/</a></td><td>eagle/eagle</td><td>8484</td></tr><tr><td>seata</td><td><a href="http://seata.sl-express.com/" target="_blank" rel="noreferrer">http://seata.sl-express.com/</a></td><td>seata/seata</td><td>7091</td></tr><tr><td>Gateway</td><td><a href="http://api.sl-express.com/" target="_blank" rel="noreferrer">http://api.sl-express.com/</a></td><td>-</td><td>9527</td></tr><tr><td>admin</td><td><a href="http://admin.sl-express.com/" target="_blank" rel="noreferrer">http://admin.sl-express.com/</a></td><td>-</td><td>80</td></tr><tr><td>skywalking</td><td><a href="http://skywalking.sl-express.com/" target="_blank" rel="noreferrer">http://skywalking.sl-express.com/</a></td><td>-</td><td>48080</td></tr><tr><td>Redis</td><td>-</td><td>123321</td><td>6379</td></tr><tr><td>MongoDB</td><td>-</td><td>sl/123321</td><td>27017</td></tr></tbody></table><h4 id="é…ç½®mavenç§æœ" tabindex="-1">é…ç½®Mavenç§æœ <a class="header-anchor" href="#é…ç½®mavenç§æœ" aria-label="Permalink to &quot;é…ç½®Mavenç§æœ&quot;">â€‹</a></h4><p>åœ¨æœ¬åœ°çš„mavenï¼ˆå»ºè®®ç‰ˆæœ¬ä¸º3.6.xï¼‰é…ç½®ä¸­é…ç½®ä¸Šè¿°çš„ç§æœï¼Œé…ç½®æ–‡ä»¶å‚è€ƒå¦‚ä¸‹ï¼š settings.xmlæ–‡ä»¶ï¼š</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;?</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">settings</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        xmlns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        xmlns:xsi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        xsi:schemaLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- æœ¬åœ°ä»“åº“ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">localRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;F:\\maven\\repository&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">localRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- é…ç½®ç§æœä¸­deployçš„è´¦å· --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">servers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;sl-releases&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;deployment&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;deployment123&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;sl-snapshots&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;deployment&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;deployment123&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">servers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- ä½¿ç”¨é˜¿é‡Œäº‘mavené•œåƒï¼Œæ’é™¤ç§æœèµ„æºåº“ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">mirrors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">mirror</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mirror&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">mirrorOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;central,jcenter,!sl-releases,!sl-snapshots&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">mirrorOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mirror&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;https://maven.aliyun.com/nexus/content/groups/public&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">mirror</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">mirrors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">profiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">profile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;sl&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            &lt;!-- é…ç½®é¡¹ç›®deployçš„åœ°å€ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">altReleaseDeploymentRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    sl-releases::default::http://maven.sl-express.com/nexus/content/repositories/releases/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">altReleaseDeploymentRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">altSnapshotDeploymentRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    sl-snapshots::default::http://maven.sl-express.com/nexus/content/repositories/snapshots/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">altSnapshotDeploymentRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            &lt;!-- é…ç½®é¡¹ç›®ä¸‹è½½ä¾èµ–çš„ç§æœåœ°å€ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">repositories</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">repository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;sl-releases&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;http://maven.sl-express.com/nexus/content/repositories/releases/&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">releases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;true&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">releases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">snapshots</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;false&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">snapshots</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">repository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">repository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;sl-snapshots&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;http://maven.sl-express.com/nexus/content/repositories/snapshots/&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">releases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;false&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">releases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">snapshots</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;true&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">snapshots</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">repository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">repositories</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">profile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">profiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">activeProfiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         &lt;!-- æ¿€æ´»é…ç½® --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">activeProfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;sl&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">activeProfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">activeProfiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">settings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h4 id="æœåŠ¡ç‰ˆæœ¬" tabindex="-1">æœåŠ¡ç‰ˆæœ¬ <a class="header-anchor" href="#æœåŠ¡ç‰ˆæœ¬" aria-label="Permalink to &quot;æœåŠ¡ç‰ˆæœ¬&quot;">â€‹</a></h4><table><thead><tr><th><strong>æœåŠ¡å</strong></th><th><strong>ç‰ˆæœ¬å·</strong></th></tr></thead><tbody><tr><td>sl-express-parent</td><td>1.4</td></tr><tr><td>sl-express-common</td><td>1.2-SNAPSHOT</td></tr><tr><td>å…¶ä»–å¾®æœåŠ¡</td><td>1.1-SNAPSHOT</td></tr></tbody></table><h2 id="å¼€å‘ä»»åŠ¡" tabindex="-1">å¼€å‘ä»»åŠ¡ <a class="header-anchor" href="#å¼€å‘ä»»åŠ¡" aria-label="Permalink to &quot;å¼€å‘ä»»åŠ¡&quot;">â€‹</a></h2><h3 id="ä»»åŠ¡æè¿°" tabindex="-1">ä»»åŠ¡æè¿° <a class="header-anchor" href="#ä»»åŠ¡æè¿°" aria-label="Permalink to &quot;ä»»åŠ¡æè¿°&quot;">â€‹</a></h3><p>æ¥ä¸‹æ¥æ˜¯ä½ åŠ å…¥åˆ°å¼€å‘ä¸€ç»„åæ¥åˆ°çš„ç¬¬ä¸€ä¸ªä»»åŠ¡ï¼Œå…·ä½“å†…å®¹æ˜¯ï¼š åå°ç®¡ç†ç³»ç»Ÿåªå…è®¸ç®¡ç†å‘˜ç™»å½•ï¼Œéç®¡ç†å‘˜ï¼ˆå¸æœºæˆ–å¿«é€’å‘˜ï¼‰æ˜¯æ²¡æœ‰æƒé™ç™»å½•çš„ï¼Œç°åœ¨çš„æƒ…å†µæ˜¯ï¼Œä»»ä½•è§’è‰²çš„äººéƒ½èƒ½ç™»å½•åˆ°åå°ç®¡ç†ç³»ç»Ÿï¼Œåº”è¯¥æ˜¯å½“éç®¡ç†å‘˜ç™»å½•æ—¶éœ€è¦æç¤ºæ²¡æœ‰æƒé™ã€‚ è¿™ä¸ªå¯ä»¥ç®—æ˜¯ä¸€ä¸ªbugä¿®å¤çš„å·¥ä½œã€‚æ¥ä¸‹æ¥ï¼Œä½ éœ€è¦æ€è€ƒä¸‹ï¼Œè¯¥å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>è§£å†³æ­¥éª¤ï¼š</p><ul><li>å…ˆç¡®å®šé‰´æƒå·¥ä½œæ˜¯åœ¨å“ªé‡Œå®Œæˆçš„ <ul><li>é€šè¿‡å‰é¢çš„ç³»ç»Ÿæ¶æ„ï¼Œå¯ä»¥å¾—çŸ¥æ˜¯åœ¨ç½‘å…³ä¸­å®Œæˆçš„</li></ul></li><li>æ‹‰å–åˆ°ç½‘å…³çš„ä»£ç </li><li>é˜…è¯»é‰´æƒçš„ä¸šåŠ¡é€»è¾‘</li><li>äº†è§£æƒé™ç³»ç»Ÿ</li><li>åŠ¨æ‰‹ç¼–ç è§£å†³é—®é¢˜</li><li>éƒ¨ç½²ï¼ŒåŠŸèƒ½æµ‹è¯•</li></ul><h4 id="éƒ¨ç½²åå°ç®¡ç†ç³»ç»Ÿ" tabindex="-1">éƒ¨ç½²åå°ç®¡ç†ç³»ç»Ÿ <a class="header-anchor" href="#éƒ¨ç½²åå°ç®¡ç†ç³»ç»Ÿ" aria-label="Permalink to &quot;éƒ¨ç½²åå°ç®¡ç†ç³»ç»Ÿ&quot;">â€‹</a></h4><p>åå°ç®¡ç†ç³»ç»Ÿçš„éƒ¨ç½²æ˜¯ä½¿ç”¨101æœºå™¨çš„Jenkinséƒ¨ç½²çš„ï¼Œå…·ä½“å‚è€ƒ<a href="https://www.yuque.com/zhangzhijun-91vgw/xze2gr/rhyie35xipdqk9dg" target="_blank" rel="noreferrer">å‰ç«¯éƒ¨ç½²æ–‡æ¡£</a>ã€‚éƒ¨ç½²å®Œæˆåï¼Œå°±å¯ä»¥çœ‹åˆ°ç™»å½•é¡µé¢ã€‚ åœ°å€ï¼š<a href="http://admin.sl-express.com/" target="_blank" rel="noreferrer">http://admin.sl-express.com/</a><img src="`+K+'" alt="image.png" loading="lazy"> å¯ä»¥çœ‹åˆ°è¿™ä¸ªé¡µé¢æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œåªæ˜¯æ²¡æœ‰è·å–åˆ°éªŒè¯ç ï¼Œæ˜¯å› ä¸ºéªŒè¯ç çš„è·å–æ˜¯éœ€è¦åç«¯æœåŠ¡æ”¯æ’‘çš„ï¼Œç›®å‰å¹¶æ²¡æœ‰å¯åŠ¨åç«¯æœåŠ¡ã€‚</p><h4 id="éƒ¨ç½²åç«¯æœåŠ¡" tabindex="-1">éƒ¨ç½²åç«¯æœåŠ¡ <a class="header-anchor" href="#éƒ¨ç½²åç«¯æœåŠ¡" aria-label="Permalink to &quot;éƒ¨ç½²åç«¯æœåŠ¡&quot;">â€‹</a></h4><p>åç«¯æœåŠ¡éœ€è¦å¯åŠ¨å¦‚ä¸‹å‡ ä¸ªæœåŠ¡ï¼š <img src="'+J+'" alt="" loading="lazy"> ç›®å‰ï¼Œåªå¯åŠ¨äº†<code>itcast-auth-server</code>ï¼Œå…¶ä»–å‡æœªå¯åŠ¨ï¼š <img src="'+Y+'" alt="image.png" loading="lazy"> æ‰€ä»¥éœ€è¦åœ¨Jenkinsä¸­ï¼Œä¾æ¬¡å¯åŠ¨è¿™å‡ ä¸ªæœåŠ¡ï¼Œç±»ä¼¼å¦‚ä¸‹æ„å»ºï¼ˆéœ€è¦æ‰¾åˆ°å¯¹åº”çš„æ„å»ºä»»åŠ¡è¿›è¡Œæ„å»ºï¼‰ï¼š <img src="'+Q+'" alt="image.png" loading="lazy"> å¯åŠ¨å®Œæˆï¼š <img src="'+X+'" alt="image.png" loading="lazy"> åœ¨nacosä¸­å·²ç»å®Œæˆäº†æœåŠ¡çš„æ³¨å†Œï¼š <img src="'+Z+'" alt="image.png" loading="lazy"></p><h4 id="æµ‹è¯•" tabindex="-1">æµ‹è¯• <a class="header-anchor" href="#æµ‹è¯•" aria-label="Permalink to &quot;æµ‹è¯•&quot;">â€‹</a></h4><p>åˆ·æ–°åå°ç®¡ç†ç³»ç»Ÿé¡µé¢ï¼Œå³å¯æˆåŠŸçœ‹åˆ°éªŒè¯ç ï¼Œè¯´æ˜æ‰€éœ€è¦çš„æœåŠ¡å·²ç»å¯åŠ¨å®Œæˆäº†ã€‚ <img src="'+$+'" alt="image.png" loading="lazy"> ä½¿ç”¨é»˜è®¤è´¦å·ï¼Œshenlingadmin/123456 å³å¯å®Œæˆç™»å½•ï¼š <img src="'+ss+'" alt="image.png" loading="lazy"></p><p>ä½¿ç”¨éç®¡ç†å‘˜è´¦å·è¿›è¡Œæµ‹è¯•ï¼Œä¾‹å¦‚ï¼šgzsj/123456 ï¼ˆå¸æœºè´¦å·ï¼‰ æˆ– hdkdy001/123456 ï¼ˆå¿«é€’å‘˜è´¦å·ï¼‰ è¿›è¡Œæµ‹è¯•ï¼Œå‘ç°ä¾ç„¶æ˜¯å¯ä»¥ç™»å½•çš„ã€‚ <img src="'+is+'" alt="image.png" loading="lazy"> è¿™æ ·ï¼Œè¿™ä¸ªé—®é¢˜å°±é‡ç°äº†ã€‚</p><h3 id="æ‹‰å–ä»£ç " tabindex="-1">æ‹‰å–ä»£ç  <a class="header-anchor" href="#æ‹‰å–ä»£ç " aria-label="Permalink to &quot;æ‹‰å–ä»£ç &quot;">â€‹</a></h3><p>æ‹‰å–ä»£ç æ­¥éª¤ï¼š</p><ul><li>åœ¨æœ¬åœ°åˆ›å»º sl-express æ–‡ä»¶å¤¹ï¼Œè¯¥ç›®å½•å­˜æ”¾é¡¹ç›®è¯¾ç¨‹æœŸé—´æ‰€æœ‰çš„ä»£ç </li><li>å¯åŠ¨ideaï¼Œæ‰“å¼€è¯¥ç›®å½• <img src="'+as+'" alt="image-20220728213318073.png" loading="lazy"></li><li>ç™»å½• <a href="http://git.sl-express.com/" target="_blank" rel="noreferrer">git</a> æœåŠ¡ï¼Œæ‰¾åˆ° sl-express-gateway å·¥ç¨‹ï¼Œæ‹·è´åœ°å€ï¼Œåœ¨ideaä¸­æ‹‰å–ä»£ç ï¼ˆæ³¨æ„å­˜å‚¨è·¯å¾„ï¼‰ <img src="'+ns+'" alt="image-20220728213450406.png" loading="lazy"><img src="'+ts+'" alt="image.png" loading="lazy"></li><li>æ‹‰å–åˆ°ä»£ç åï¼Œè®¾ç½®jdkç‰ˆæœ¬ä¸º11 <img src="'+ls+'" alt="image-20220728213637258.png" loading="lazy"></li><li>æ·»åŠ modulesï¼Œå°†sl-express-gatewayåŠ å…¥è¿›æ¥ <img src="'+hs+'" alt="image-20220728213945708.png" loading="lazy"></li><li>æˆåŠŸæ‹‰å–ä»£ç  <img src="'+ps+`" alt="image-20220728214019842.png" loading="lazy"></li><li>è¯´æ˜ï¼šè¯¥å·¥ç¨‹ä¼šä¾èµ– sl-express-parentï¼Œæ­¤mavenä¾èµ–æ˜¯é€šè¿‡<a href="http://maven.sl-express.com/nexus/" target="_blank" rel="noreferrer">ç§æœ</a>æ‹‰å–åˆ°çš„ã€‚</li></ul><h3 id="æƒé™ç®¡å®¶" tabindex="-1">æƒé™ç®¡å®¶ <a class="header-anchor" href="#æƒé™ç®¡å®¶" aria-label="Permalink to &quot;æƒé™ç®¡å®¶&quot;">â€‹</a></h3><p>åœ¨ç¥é¢†ç‰©æµé¡¹ç›®ä¸­ï¼Œå¿«é€’å‘˜ã€å¸æœºã€ç®¡ç†äººå‘˜éƒ½æ˜¯åœ¨æƒé™ç®¡å®¶ä¸­è¿›è¡Œç®¡ç†çš„ï¼Œæ‰€ä»¥ä»–ä»¬çš„ç™»å½•éƒ½æ˜¯éœ€è¦å¯¹æ¥æƒé™ç®¡å®¶å®Œæˆçš„ã€‚</p><p>å…·ä½“æƒé™ç®¡å®¶çš„ä»‹ç»è¯´æ˜å‚è§ï¼š<a href="https://www.yuque.com/zhangzhijun-91vgw/xze2gr/pseyizoo073plvox" target="_blank" rel="noreferrer">æƒé™ç®¡å®¶ä½¿ç”¨è¯´æ˜</a></p><h3 id="æµ‹è¯•ç”¨æˆ·ç™»å½•" tabindex="-1">æµ‹è¯•ç”¨æˆ·ç™»å½• <a class="header-anchor" href="#æµ‹è¯•ç”¨æˆ·ç™»å½•" aria-label="Permalink to &quot;æµ‹è¯•ç”¨æˆ·ç™»å½•&quot;">â€‹</a></h3><p>å‰é¢å·²ç»äº†è§£äº†æƒé™ç®¡å®¶ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†åŸºäºæƒé™ç®¡å®¶åœ¨<code>sl-express-gateway</code>ä¸­è¿›è¡Œæµ‹è¯•ç”¨æˆ·çš„ç™»å½•ä»¥åŠå¯¹äºtokençš„æ ¡éªŒã€‚</p><h4 id="ä¾èµ–è¯´æ˜" tabindex="-1">ä¾èµ–è¯´æ˜ <a class="header-anchor" href="#ä¾èµ–è¯´æ˜" aria-label="Permalink to &quot;ä¾èµ–è¯´æ˜&quot;">â€‹</a></h4><p>å¯¹æ¥æƒé™ç®¡å®¶éœ€è¦å¼•å…¥ä¾èµ–ï¼š</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.itheima.em.auth&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;itcast-auth-spring-boot-starter&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>è¯¥ä¾èµ–å·²ç»å¯¼å…¥ï¼Œå¹¶ä¸”åœ¨parentä¸­æŒ‡å®šäº†ç‰ˆæœ¬å·ã€‚</p><p>è¯¥ä¾èµ–å·²ç»ä¸Šä¼ åˆ°mavenä¸­å¤®ä»“åº“ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½ï¼Œåœ°å€ï¼š<a href="https://mvnrepository.com/artifact/com.itheima.em.auth/itcast-auth-spring-boot-starter" target="_blank" rel="noreferrer">https://mvnrepository.com/artifact/com.itheima.em.auth/itcast-auth-spring-boot-starter</a></p></div><h4 id="è§£è¯»é…ç½®" tabindex="-1">è§£è¯»é…ç½® <a class="header-anchor" href="#è§£è¯»é…ç½®" aria-label="Permalink to &quot;è§£è¯»é…ç½®&quot;">â€‹</a></h4><p>åœ¨bootstrap-local.ymlé…ç½®æ–‡ä»¶ä¸­é…ç½®äº†nacosé…ç½®ä¸­å¿ƒï¼Œä¸€äº›å‚æ•°å­˜æ”¾åˆ°äº†nacosä¸­ï¼Œè¿™äº›å‚æ•°ä¸€èˆ¬éƒ½æ˜¯ä¸åŒç¯å¢ƒä¸ä¸€æ ·é…ç½®çš„ã€‚</p><p>sl-express-gateway.propertieså¦‚ä¸‹ï¼š</p><div class="language-properties vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æƒé™ç³»ç»Ÿçš„é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">authority.host</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 192.168.150.101</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">authority.port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 8764</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">authority.timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 10000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#åº”ç”¨id</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">authority.applicationId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 981194468570960001</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#è§’è‰²id</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">role.manager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 986227712144197857,989278284569131905,996045142395786081,996045927523359809</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å¿«é€’å‘˜è§’è‰²</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">role.courier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 989559057641637825</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å¸æœºè§’è‰²</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">role.driver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 989559028277315009</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#RSAå…¬é’¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sl.jwt.public-key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDC6of/EqnM2008gRpFAJJd3iGF5o6P6SuJOcKq4iJQ+62EF4WKGIGQunJjPwVNQFqDuT7ko9bRFZNnMba9A5GrFELtAK7tzO9l19JgFcCBQoU3J6ehPCCunRKz52qJuzS0yiJp0dbB2i6cb7mSCftwZavmcpzhsBaOGQd23AnAmQIDAQAB</span></span></code></pre></div><p>å…¶ä¸­applicationIdã€è§’è‰²idéƒ½æ˜¯éœ€è¦åœ¨æƒé™ç³»ç»Ÿä¸­æ‰¾åˆ°ã€‚</p><p><img src="`+es+'" alt="image.png" loading="lazy"></p><p>è§’è‰²idéœ€è¦åœ¨æ•°æ®åº“è¡¨ä¸­æŸ¥è¯¢ï¼Œè¡¨ä¸ºï¼šitcast_auth.itcast_auth_role <img src="'+ks+`" alt="image.png" loading="lazy"></p><h4 id="æµ‹è¯•-1" tabindex="-1">æµ‹è¯• <a class="header-anchor" href="#æµ‹è¯•-1" aria-label="Permalink to &quot;æµ‹è¯•&quot;">â€‹</a></h4><p>æµ‹è¯•ç”¨ä¾‹åœ¨AuthTemplateTestä¸­ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> testLogin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //ç™»å½•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Result&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LoginDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.authTemplate.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">opsForLogin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;shenlingadmin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;123456&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tokenä¸ºï¼š&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> token);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        UserDTO user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userä¿¡æ¯ï¼š&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //æŸ¥è¯¢è§’è‰²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Result&lt;List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; resultRole </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AuthTemplateFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">opsForRole</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findRoleByUserId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(resultRole);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>tokenæ ¡éªŒæµ‹è¯•ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> checkToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;xxx.xx.xxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//ä¸Šé¢æ–¹æ³•ä¸­ç”Ÿæˆçš„token</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        AuthUserInfoDTO authUserInfo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tokenCheckService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parserToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(authUserInfo);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(JSONUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toJsonStr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(authUserInfo));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>**è¯´æ˜ï¼š**æƒé™ç®¡å®¶ç”Ÿæˆçš„tokené‡‡ç”¨çš„æ˜¯RSAéå¯¹ç§°åŠ å¯†æ–¹å¼ï¼Œé¡¹ç›®ä¸­é…ç½®çš„å…¬é’¥ä¸€å®šè¦ä¸æƒé™ç³»ç»Ÿä¸­ä½¿ç”¨çš„å…¬é’¥ä¸€è‡´ï¼Œå¦åˆ™ä¼šå‡ºç°æ— æ³•æ ¡éªŒtokençš„æƒ…å†µã€‚</p></div><p><img src="`+rs+'" alt="image-20220729185656492.png" loading="lazy"> é¡¹ç›®ä¸­çš„å…¬é’¥æ–‡ä»¶ï¼š <img src="'+Es+'" alt="image-20220729185825534.png" loading="lazy"></p><h3 id="é˜…è¯»é‰´æƒä»£ç " tabindex="-1">é˜…è¯»é‰´æƒä»£ç  <a class="header-anchor" href="#é˜…è¯»é‰´æƒä»£ç " aria-label="Permalink to &quot;é˜…è¯»é‰´æƒä»£ç &quot;">â€‹</a></h3><h4 id="æ•´ä½“æµç¨‹" tabindex="-1">æ•´ä½“æµç¨‹ <a class="header-anchor" href="#æ•´ä½“æµç¨‹" aria-label="Permalink to &quot;æ•´ä½“æµç¨‹&quot;">â€‹</a></h4><p>é¦–å…ˆéœ€è¦æ˜ç¡®çš„ä¸€ç‚¹æ˜¯å››ä¸ªç»ˆç«¯éƒ½æ˜¯é€šè¿‡<code>sl-express-gateway</code>è¿›è¡ŒéªŒè¯ä¸é‰´æƒçš„ï¼Œä¸‹é¢ä»¥ç®¡ç†å‘˜è¯·æ±‚æµç¨‹ä¸ºä¾‹ï¼Œå…¶ä»–çš„æµç¨‹ç±»ä¼¼ã€‚ <img src="'+ds+`" alt="" loading="lazy">#### è‡ªå®šä¹‰è¿‡æ»¤å™¨ ä¸åŒç»ˆç«¯è¿›å…¥Gatewayçš„è¯·æ±‚è·¯å¾„æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¹¶ä¸”ä¸åŒçš„ç»ˆç«¯å¯¹äºtokençš„æ ¡éªŒå’Œé‰´æƒé€»è¾‘æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥éœ€è¦åœ¨ç½‘å…³ä¸­å¯¹äºå„ä¸ªç»ˆç«¯åˆ›å»ºä¸åŒçš„è¿‡æ»¤å™¨æ¥å®ç°ã€‚ è¯·æ±‚è·¯å¾„å¦‚ä¸‹ï¼š</p><ul><li>å¿«é€’å‘˜ç«¯ï¼š<code>/courier/**</code></li><li>ç”¨æˆ·ç«¯ï¼š<code>/customer/**</code></li><li>å¸æœºç«¯ï¼š<code>/driver/**</code></li><li>ç®¡ç†ç«¯ï¼š<code>/manager/**</code></li></ul><p>å…·ä½“çš„é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9527</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  tomcat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    uri-encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">UTF-8</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    threads</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      min-spare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nacos</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nacos</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      server-addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">192.168.150.101:8848</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      discovery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ecae68ba-7b43-4473-a980-4ddeb6157bdc</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        ip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">192.168.150.1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ecae68ba-7b43-4473-a980-4ddeb6157bdc</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    gateway</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      globalcors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        cors-configurations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &#39;[/**]&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            allowed-origin-patterns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            allowed-headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            allow-credentials</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            allowed-methods</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">GET</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">POST</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DELETE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">PUT</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">OPTION</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      discovery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        locator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #è¡¨æ˜gatewayå¼€å¯æœåŠ¡æ³¨å†Œå’Œå‘ç°çš„åŠŸèƒ½ï¼Œå¹¶ä¸”spring cloud gatewayè‡ªåŠ¨æ ¹æ®æœåŠ¡å‘ç°ä¸ºæ¯ä¸€ä¸ªæœåŠ¡åˆ›å»ºäº†ä¸€ä¸ªrouterï¼Œè¿™ä¸ªrouterå°†ä»¥æœåŠ¡åå¼€å¤´çš„è¯·æ±‚è·¯å¾„è½¬å‘åˆ°å¯¹åº”çš„æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      routes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sl-express-ms-web-courier</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          uri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lb://sl-express-ms-web-courier</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          predicates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Path=/courier/**</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">StripPrefix=1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CourierToken</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">AddRequestHeader=X-Request-From, sl-express-gateway</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sl-express-ms-web-customer</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          uri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lb://sl-express-ms-web-customer</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          predicates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Path=/customer/**</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">StripPrefix=1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CustomerToken</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">AddRequestHeader=X-Request-From, sl-express-gateway</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sl-express-ms-web-driver</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          uri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lb://sl-express-ms-web-driver</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          predicates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Path=/driver/**</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">StripPrefix=1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DriverToken</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">AddRequestHeader=X-Request-From, sl-express-gateway</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sl-express-ms-web-manager</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          uri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lb://sl-express-ms-web-manager</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          predicates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Path=/manager/**</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">StripPrefix=1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ManagerToken</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">AddRequestHeader=X-Request-From, sl-express-gateway</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sl-express-ms-trade</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          uri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lb://sl-express-ms-trade</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          predicates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Path=/trade/notify/**</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">StripPrefix=1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">AddRequestHeader=X-Request-From, sl-express-gateway</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">itcast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  authority</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    host</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${authority.host}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #authorityæœåŠ¡åœ°å€,æ ¹æ®å®é™…æƒ…å†µæ›´æ”¹</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${authority.port}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #authorityæœåŠ¡ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${authority.timeout}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #httpè¯·æ±‚çš„è¶…æ—¶æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    public-key-file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">auth/pub.key</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    applicationId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${authority.applicationId}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#è§’è‰²id</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">role</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  manager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${role.manager}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  courier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${role.courier}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  driver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${role.driver}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">sl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  noAuthPaths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/courier/login/account</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/courier/swagger-ui.html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/courier/webjars/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/courier/swagger-resources</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/courier/v2/api-docs</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/courier/doc.html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/customer/user/login</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/customer/user/refresh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/customer/swagger-ui.html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/customer/webjars/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/customer/swagger-resources</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/customer/v2/api-docs</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/customer/doc.html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/driver/login/account</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/driver/swagger-ui.html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/driver/webjars/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/driver/swagger-resources</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/driver/v2/api-docs</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/driver/doc.html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/manager/login</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/manager/webjars/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/manager/swagger-resources</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/manager/v2/api-docs</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/manager/doc.html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/manager/captcha</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  jwt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    public-key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${sl.jwt.user-secret-key}</span></span></code></pre></div><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®äº†æ³¨å†Œä¸­å¿ƒã€corsè·¨åŸŸã€è‡ªå®šä¹‰è¿‡æ»¤å™¨ã€è‡ªå®šä¹‰é…ç½®ã€ç™½åå•è·¯å¾„ç­‰ä¿¡æ¯ã€‚ å…¶ä¸­ï¼Œè‡ªå®šä¹‰è¿‡æ»¤å™¨é…ç½®äº†4ä¸ªï¼Œä¸å¤„ç†ç±»å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p><ul><li>CourierToken <strong>-&gt;</strong> com.sl.gateway.filter.CourierTokenGatewayFilterFactory</li><li>CustomerToken <strong>-&gt;</strong> com.sl.gateway.filter.CustomerTokenGatewayFilterFactory</li><li>DriverToken **-&gt; **com.sl.gateway.filter.DriverTokenGatewayFilterFactory</li><li>ManagerToken **-&gt; **com.sl.gateway.filter.ManagerTokenGatewayFilterFactory</li></ul><p>åœ¨GatewayFilterFactoryä¸­ï¼Œç»§æ‰¿AbstractGatewayFilterFactoryç±»ï¼Œå®ç°GatewayFilterFactoryæ¥å£ä¸­çš„apply()æ–¹æ³•ï¼Œè¿”å›GatewayFilterå¯¹è±¡ï¼Œå³å¯åœ¨filter()æ–¹æ³•ä¸­å®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ã€‚ <img src="`+gs+`" alt="image.png" loading="lazy"> å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼Œåœ¨è‡ªå®šä¹‰<code>TokenGatewayFilter</code>ç±»ä¸­å®Œæˆã€‚</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p><strong>â“æ€è€ƒï¼š</strong> å››ä¸ªç»ˆç«¯éƒ½å…±ç”¨<code>TokenGatewayFilter</code>ç±»ï¼Œè€Œå„ä¸ªç»ˆç«¯çš„æ ¡éªŒé€»è¾‘æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p></div><h4 id="tokengatewayfilter" tabindex="-1">TokenGatewayFilter <a class="header-anchor" href="#tokengatewayfilter" aria-label="Permalink to &quot;TokenGatewayFilter&quot;">â€‹</a></h4><p><code>TokenGatewayFilter</code>è¿‡æ»¤å™¨æ˜¯æ•´ä¸ªé¡¹ç›®ä¸­çš„æ ¡éªŒ/ é‰´æƒæµç¨‹çš„å…·ä½“å®ç°ï¼Œç”±äºå­˜åœ¨ä¸åŒçš„ç»ˆç«¯ï¼Œå¯¼è‡´å…·ä½“çš„æ ¡éªŒå’Œé‰´æƒé€»è¾‘ä¸ä¸€æ ·ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡è‡ªå®šä¹‰æ¥å£<code>AuthFilter</code>å®ç°ï¼Œä¹Ÿå°±æ˜¯4ä¸ªç«¯çš„<code>TokenGatewayFilterFactory</code>åŒæ—¶ä¹Ÿéœ€è¦å®ç°<code>AuthFilter</code>æ¥å£ã€‚</p><p>åœ¨å‘ä¸‹æ¸¸æœåŠ¡è½¬å‘è¯·æ±‚æ—¶ï¼Œä¼šæºå¸¦2ä¸ªå¤´ä¿¡æ¯ï¼Œåˆ†åˆ«æ˜¯userInfoå’Œtokenï¼Œä¹Ÿå°±æ˜¯ä¼šå°†ç”¨æˆ·ä¿¡æ¯å’Œtokenä¼ é€’ä¸‹å»ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.gateway.filter;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cn.hutool.core.util.ObjectUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cn.hutool.core.util.StrUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cn.hutool.json.JSONUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.itheima.auth.sdk.dto.AuthUserInfoDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.gateway.config.MyConfig;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.transport.common.constant.Constants;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lombok.extern.slf4j.Slf4j;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.gateway.filter.GatewayFilter;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.gateway.filter.GatewayFilterChain;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.core.Ordered;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.http.HttpStatus;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.web.server.ServerWebExchange;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reactor.core.publisher.Mono;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Slf4j</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TokenGatewayFilter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GatewayFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Ordered</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MyConfig myConfig;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AuthFilter authFilter;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TokenGatewayFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MyConfig </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">myConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, AuthFilter </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">authFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.myConfig </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> myConfig;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.authFilter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authFilter;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Mono&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServerWebExchange </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exchange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, GatewayFilterChain </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //è·å–è¯·æ±‚è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //æŸ¥çœ‹è¯·æ±‚è·¯å¾„æ˜¯å¦åœ¨ç™½åå•ä¸­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (StrUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startWithAny</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path, myConfig.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getNoAuthPaths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //æ— éœ€æ ¡éªŒï¼Œç›´æ¥æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(exchange);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //è·å–headerçš„å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getHeaders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getFirst</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.authFilter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tokenHeaderName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (StrUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //æ²¡æœ‰æƒé™</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStatusCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HttpStatus.UNAUTHORIZED);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setComplete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //æ ¡éªŒtoken</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        AuthUserInfoDTO authUserInfoDTO </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//æ•è·tokenæ ¡éªŒå¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            authUserInfoDTO </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.authFilter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">check</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            log.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä»¤ç‰Œæ ¡éªŒå¤±è´¥ï¼Œtoken = {}, path= {}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, token, path, e);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(authUserInfoDTO)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //tokenå¤±æ•ˆ æˆ– ä¼ªé€ ï¼Œå“åº”401</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStatusCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HttpStatus.UNAUTHORIZED);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setComplete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //é‰´æƒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Boolean result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//æ•è·é‰´æƒå¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.authFilter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token, authUserInfoDTO, path);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            log.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æƒé™æ ¡éªŒå¤±è´¥ï¼Œtoken = {}, path= {}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, token, path, e);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //æ²¡æœ‰æƒé™ï¼Œå“åº”400</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStatusCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HttpStatus.BAD_REQUEST);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setComplete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //å¢åŠ å‚æ•°ï¼Œå‘ä¸‹æ¸¸å¾®æœåŠ¡ä¼ é€’å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mutate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Constants.GATEWAY.USERINFO, JSONUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toJsonStr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(authUserInfoDTO));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mutate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Constants.GATEWAY.TOKEN, token);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //æ ¡éªŒé€šè¿‡æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(exchange);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //æŒ‡å®šäº†æ‹¦æˆªå™¨çš„é¡ºåºï¼Œè®¾ç½®æœ€å°å€¼ç¡®å®šç¬¬ä¸€ä¸ªè¢«æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Integer.MIN_VALUE;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="authfilter" tabindex="-1">AuthFilter <a class="header-anchor" href="#authfilter" aria-label="Permalink to &quot;AuthFilter&quot;">â€‹</a></h4><p>AuthFilteræ˜¯è‡ªå®šä¹‰æ¥å£ï¼Œç”¨äºä¸åŒå®¢æˆ·ç«¯ï¼ˆç”¨æˆ·ç«¯ã€å¸æœºç«¯ã€å¿«é€’å‘˜ç«¯ã€ç®¡ç†ç«¯ï¼‰æ ¡éªŒ/é‰´æƒé€»è¾‘çš„å®ç°ï¼Œè¯¥æ¥å£å®šä¹‰äº†3ä¸ªæ–¹æ³•ï¼š</p><ul><li><code>check()</code>æ–¹æ³•ç”¨äºæ ¡éªŒtoken</li><li><code>auth()</code>æ–¹æ³•ç”¨äºé‰´æƒ</li><li><code>tokenHeaderName()</code>æ–¹æ³•æ˜¯é»˜è®¤å®ç°ï¼Œé»˜è®¤è¯·æ±‚å¤´ä¸­tokenå‚æ•°çš„åä¸ºï¼šAuthorization</li><li>æ‰§è¡Œæµç¨‹æ˜¯å…ˆæ ¡éªŒtokençš„æœ‰æ•ˆæ€§ï¼Œå†è¿›è¡Œé‰´æƒã€‚</li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.gateway.filter;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.itheima.auth.sdk.dto.AuthUserInfoDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.transport.common.constant.Constants;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * é‰´æƒä¸šåŠ¡çš„å›è°ƒï¼Œå…·ä½“é€»è¾‘ç”± GatewayFilterFactory å…·ä½“å®Œæˆ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AuthFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * æ ¡éªŒtoken</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> token</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è¯·æ±‚ä¸­çš„token</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> tokenä¸­æºå¸¦çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    AuthUserInfoDTO </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">check</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * é‰´æƒ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> token</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        è¯·æ±‚ä¸­çš„token</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> authUserInfo</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> tokenä¸­æºå¸¦çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> path</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         å½“å‰è¯·æ±‚çš„è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> æ˜¯å¦é€šè¿‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Boolean </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, AuthUserInfoDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">authUserInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * è¯·æ±‚ä¸­æºå¸¦tokençš„åç§°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> å¤´åç§°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tokenHeaderName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Constants.GATEWAY.AUTHORIZATION;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="ç®¡ç†å‘˜æ ¡éªŒå®ç°" tabindex="-1">ç®¡ç†å‘˜æ ¡éªŒå®ç° <a class="header-anchor" href="#ç®¡ç†å‘˜æ ¡éªŒå®ç°" aria-label="Permalink to &quot;ç®¡ç†å‘˜æ ¡éªŒå®ç°&quot;">â€‹</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.gateway.filter;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.itheima.auth.sdk.dto.AuthUserInfoDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.itheima.auth.sdk.service.TokenCheckService;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.gateway.config.MyConfig;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.gateway.filter.GatewayFilter;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.gateway.filter.factory.AbstractGatewayFilterFactory;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Component;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.annotation.Resource;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * åå°ç®¡ç†å‘˜tokenæ‹¦æˆªå¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ManagerTokenGatewayFilterFactory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbstractGatewayFilterFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AuthFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MyConfig myConfig;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TokenCheckService tokenCheckService;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GatewayFilter </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //ç”±äºå®ç°äº†AuthFilteræ¥å£ï¼Œæ‰€ä»¥å¯ä»¥ä¼ é€’thiså¯¹è±¡åˆ°TokenGatewayFilterä¸­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TokenGatewayFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.myConfig, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AuthUserInfoDTO </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">check</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //æ ¡éªŒtoken</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tokenCheckService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parserToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Boolean </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, AuthUserInfoDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">authUserInfoDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p><strong>ğŸ””åˆ†æï¼š</strong> ç”±äº<code>auth()</code>æ–¹æ³•ç›´æ¥è¿”å›trueï¼Œå¯¼è‡´æ‰€æœ‰è§’è‰²éƒ½èƒ½é€šè¿‡æ ¡éªŒï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰è§’è‰²çš„ç”¨æˆ·éƒ½èƒ½ç™»å½•åˆ°åå°ç®¡ç†ç³»ç»Ÿï¼Œè¿™é‡Œå°±æ˜¯bugåŸå› çš„æ ¹æœ¬æ‰€åœ¨ã€‚</p></div><h3 id="è§£å†³bug" tabindex="-1">è§£å†³bug <a class="header-anchor" href="#è§£å†³bug" aria-label="Permalink to &quot;è§£å†³bug&quot;">â€‹</a></h3><h4 id="å®ç°" tabindex="-1">å®ç° <a class="header-anchor" href="#å®ç°" aria-label="Permalink to &quot;å®ç°&quot;">â€‹</a></h4><div class="info custom-block"><p class="custom-block-title">INFO</p><p><strong>æ€è·¯ï¼š</strong> æƒ³è®©ç®¡ç†å‘˜è§’è‰²çš„ç”¨æˆ·é€šè¿‡ï¼Œè€Œéç®¡ç†å‘˜è§’è‰²ä¸èƒ½é€šè¿‡ï¼Œè¿™é‡Œå°±éœ€è¦å¯¹auth()æ–¹æ³•è¿›è¡Œå®ç°äº†ï¼Œç°åœ¨çš„å®ç°æ˜¯éƒ½è¿”å›trueï¼Œé‚£å½“ç„¶æ˜¯æ‰€æœ‰çš„éƒ½é€šè¿‡äº†ã€‚ æ‰€ä»¥ï¼Œéœ€è¦æŸ¥è¯¢å‡ºå½“å‰ç”¨æˆ·çš„è§’è‰²ï¼ŒæŸ¥çœ‹æ˜¯å¦å…·å¤‡ç®¡ç†å‘˜è§’è‰²ï¼Œå¦‚æœæœ‰å°±æ”¾è¡Œï¼Œå¦åˆ™æ‹’ç»ã€‚</p></div><p>å…·ä½“ä»£ç å®ç°ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.gateway.filter;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cn.hutool.core.collection.CollUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.itheima.auth.factory.AuthTemplateFactory;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.itheima.auth.sdk.AuthTemplate;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.itheima.auth.sdk.dto.AuthUserInfoDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.itheima.auth.sdk.service.TokenCheckService;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.gateway.config.MyConfig;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.beans.factory.annotation.Value;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.gateway.filter.GatewayFilter;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.gateway.filter.factory.AbstractGatewayFilterFactory;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Component;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.annotation.Resource;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.Collection;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * åå°ç®¡ç†å‘˜tokenæ‹¦æˆªå¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ManagerTokenGatewayFilterFactory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbstractGatewayFilterFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AuthFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MyConfig myConfig;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TokenCheckService tokenCheckService;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //è·å–é…ç½®æ–‡ä»¶ä¸­çš„ç®¡ç†å‘˜è§’è‰²id</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\${role.manager}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; managerRoleIds;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GatewayFilter </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //ç”±äºå®ç°äº†AuthFilteræ¥å£ï¼Œæ‰€ä»¥å¯ä»¥ä¼ é€’thiså¯¹è±¡åˆ°TokenGatewayFilterä¸­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TokenGatewayFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.myConfig, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AuthUserInfoDTO </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">check</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //æ ¡éªŒtoken</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tokenCheckService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parserToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Boolean </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, AuthUserInfoDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">authUserInfoDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //è·å–AuthTemplateå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        AuthTemplate authTemplate </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AuthTemplateFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //æŸ¥è¯¢è¯¥ç”¨æˆ·çš„è§’è‰²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; roleIds </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authTemplate.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">opsForRole</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findRoleByUserId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(authUserInfoDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUserId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //å–äº¤é›†ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰äº¤é›†å³å¯åˆ¤æ–­å‡ºæ˜¯å¦æœ‰æƒé™</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Collection&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; intersection </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CollUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">intersection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(roleIds, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.managerRoleIds);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CollUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isNotEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(intersection);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="æµ‹è¯•-2" tabindex="-1">æµ‹è¯• <a class="header-anchor" href="#æµ‹è¯•-2" aria-label="Permalink to &quot;æµ‹è¯•&quot;">â€‹</a></h4><p>æµ‹è¯•åˆ†ä¸¤ç§æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯æ¥å£æµ‹è¯•å’ŒåŠŸèƒ½æµ‹è¯•ï¼Œæˆ‘ä»¬é¦–å…ˆè¿›è¡ŒåŠŸèƒ½æµ‹è¯•ï¼Œç„¶åå†è¿›è¡Œæ¥å£æµ‹è¯•ï¼ˆswaggeræ¥å£ï¼‰ã€‚ æµ‹è¯•æ— è¯¯åï¼Œå¯ä»¥å°†ä»£ç æäº¤åˆ°gitä¸­ã€‚</p><h5 id="åŠŸèƒ½æµ‹è¯•" tabindex="-1">åŠŸèƒ½æµ‹è¯• <a class="header-anchor" href="#åŠŸèƒ½æµ‹è¯•" aria-label="Permalink to &quot;åŠŸèƒ½æµ‹è¯•&quot;">â€‹</a></h5><p>ç”±äºæœ¬åœ°å¯åŠ¨æœåŠ¡åï¼Œä¼šåœ¨nacosä¸­æ³¨å†Œäº†2ä¸ªæœåŠ¡ï¼š <img src="`+ys+`" alt="image.png" loading="lazy"> æ‰€ä»¥éœ€è¦å°†101æœåŠ¡å™¨ä¸Šçš„ç½‘å…³åœæ­¢æ‰å†è¿›è¡Œæµ‹è¯•ã€‚<code>docker stop sl-express-gateway</code> å¦å¤–ï¼Œéœ€è¦ä¿®æ”¹101æœåŠ¡å™¨ä¸Šçš„nginxé…ç½®ï¼Œè®© api.sl-express.com å¯¹åº”çš„æœåŠ¡æŒ‡å‘åˆ°æœ¬åœ°çš„9527ç«¯å£æœåŠ¡ï¼ˆæµ‹è¯•å®Œæˆåå†æ”¹å›æ¥)ã€‚ ä¿®æ”¹nginxé…ç½®ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/src/nginx/conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx.conf</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ç”±äºç›®å‰nginxæ­£åœ¨è¿è¡Œä¸­ï¼Œnginx.confæ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ wq! å‘½ä»¤å¼ºåˆ¶ä¿å­˜</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#é…ç½®ç”Ÿæ•ˆ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reload</span></span></code></pre></div><p>ä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š <img src="`+os+'" alt="image.png" loading="lazy"> ä½¿ç”¨å¸æœºè´¦å·è¿›è¡Œæµ‹è¯•ï¼š <img src="'+cs+'" alt="image.png" loading="lazy"> å¯ä»¥çœ‹åˆ°ï¼Œå¸æœºè´¦å·æ— æ³•ç™»å½•ã€‚ <img src="'+Fs+'" alt="image.png" loading="lazy"></p><h5 id="æ¥å£æµ‹è¯•" tabindex="-1">æ¥å£æµ‹è¯• <a class="header-anchor" href="#æ¥å£æµ‹è¯•" aria-label="Permalink to &quot;æ¥å£æµ‹è¯•&quot;">â€‹</a></h5><p>æµ‹è¯•æ­¥éª¤ï¼š</p><ul><li>é¦–å…ˆï¼Œæµ‹è¯•ç®¡ç†å‘˜çš„ç™»å½•ï¼Œè·å–åˆ°token</li><li>æ¥ç€æµ‹è¯•ç®¡ç†å‘˜è¯·æ±‚æ¥å£èµ„æºï¼ˆæœŸæœ›ç»“æœï¼šæ­£å¸¸è·å–åˆ°æ•°æ®ï¼‰</li><li>æ›´æ¢æˆå¸æœºç”¨æˆ·è¿›è¡Œç™»å½•ï¼Œå¹¶ä¸”æµ‹è¯•è¯·æ±‚æ¥å£èµ„æºï¼ˆæœŸæœ›ç»“æœï¼šå“åº”400ï¼Œæ²¡æœ‰æƒé™ï¼‰</li></ul><p>å°†æœ¬åœ°GatewayæœåŠ¡å¯åŠ¨èµ·æ¥ï¼Œè®¿é—® <a href="http://127.0.0.1:9527/manager/doc.html" target="_blank" rel="noreferrer">http://127.0.0.1:9527/manager/doc.html</a> å³å¯çœ‹åˆ°ã€ç®¡ç†åå°å¾®æœåŠ¡æ¥å£æ–‡æ¡£ã€‘ <img src="'+ms+'" alt="image.png" loading="lazy"> éšä¾¿æµ‹è¯•ä¸ªæ¥å£ï¼Œä¼šå‘ç°å“åº”401ï¼š <img src="'+us+'" alt="image.png" loading="lazy"> æµ‹è¯•ç™»å½•æ¥å£ï¼Œéœ€è¦å…ˆè·å–éªŒè¯ç å†è¿›è¡Œç™»å½•ï¼š <img src="'+As+'" alt="image.png" loading="lazy"> ç™»å½•æˆåŠŸï¼š <img src="'+Ds+'" alt="image.png" loading="lazy"> è·å–åˆ°tokenï¼š <img src="'+bs+'" alt="image.png" loading="lazy"> è®¾ç½®è¯·æ±‚å¤´ï¼šAuthorization <img src="'+fs+'" alt="image.png" loading="lazy"> è¿›è¡ŒåŠŸèƒ½æµ‹è¯•ï¼š <img src="'+Cs+'" alt="image.png" loading="lazy"> æ›´æ¢æˆå¸æœºè´¦æˆ·æµ‹è¯•ï¼š <img src="'+Bs+'" alt="image.png" loading="lazy"> ä¼šå‘ç°ï¼Œæ›´æ¢æˆå¸æœºè´¦æˆ·åä¼šå“åº”400ï¼Œç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚</p><h4 id="éƒ¨ç½²" tabindex="-1">éƒ¨ç½² <a class="header-anchor" href="#éƒ¨ç½²" aria-label="Permalink to &quot;éƒ¨ç½²&quot;">â€‹</a></h4><p>é¡¹ç›®çš„å‘å¸ƒï¼Œæˆ‘ä»¬é‡‡ç”¨JenkinsæŒç»­é›†æˆçš„æ–¹å¼ï¼Œåœ¨æä¾›çš„è™šæ‹Ÿæœºä¸­å·²ç»éƒ¨ç½²å¥½äº†Jenkinsï¼Œæˆ‘ä»¬åªéœ€è¦è¿›è¡Œç®€å•çš„æ“ä½œå³å¯å®Œæˆéƒ¨ç½²ã€‚ ç¬¬ä¸€æ­¥ï¼Œæµè§ˆå™¨æ‰“å¼€ï¼š<a href="http://jenkins.sl-express.com/" target="_blank" rel="noreferrer">http://jenkins.sl-express.com/</a> Â ï¼ˆè´¦å·ï¼šroot/123ï¼‰ ç¬¬äºŒæ­¥ï¼ŒæŒ‰ç…§å¦‚ä¸‹æ•°å­—æ ‡è¯†è¿›è¡Œæ“ä½œ <img src="'+vs+'" alt="image-20220806102651465.png" loading="lazy"> é€‰æ‹©é»˜è®¤å‚æ•°ï¼š <img src="'+xs+'" alt="image-20220806102721738.png" loading="lazy"> ç¬¬ä¸‰æ­¥ï¼ŒæŸ¥çœ‹éƒ¨ç½²æ§åˆ¶å°ï¼Œç‚¹å‡»ã€sl-express-gatewayã€‘è¿›å…¥ä»»åŠ¡è¯¦æƒ…ï¼Œå·¦ä¾§ä¸‹æ–¹æŸ¥çœ‹æ„å»ºå†å²ï¼Œç‚¹å‡»æœ€è¿‘çš„ä¸€ä¸ªæ„å»ºå›¾æ ‡ï¼š <img src="'+ws+'" alt="image-20220801091004278.png" loading="lazy"> çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼Œè¯´æ˜ä»¥åŠéƒ¨ç½²æˆåŠŸã€‚ <img src="'+qs+'" alt="image-20220801091047892.png" loading="lazy"> éƒ¨ç½²æˆåŠŸåï¼Œå¯ä»¥è¿›è¡Œæ­£å¸¸åŠŸèƒ½æµ‹è¯•ã€‚</p><h2 id="è¯¾åç»ƒä¹ " tabindex="-1">è¯¾åç»ƒä¹  <a class="header-anchor" href="#è¯¾åç»ƒä¹ " aria-label="Permalink to &quot;è¯¾åç»ƒä¹ &quot;">â€‹</a></h2><h3 id="ç»ƒä¹ ä¸€-å¿«é€’å‘˜çš„é‰´æƒ" tabindex="-1">ç»ƒä¹ ä¸€ï¼šå¿«é€’å‘˜çš„é‰´æƒ <a class="header-anchor" href="#ç»ƒä¹ ä¸€-å¿«é€’å‘˜çš„é‰´æƒ" aria-label="Permalink to &quot;ç»ƒä¹ ä¸€ï¼šå¿«é€’å‘˜çš„é‰´æƒ&quot;">â€‹</a></h3><p>éš¾åº¦ç³»æ•°ï¼šâ˜…â˜†â˜†â˜†â˜†</p><p>æç¤ºï¼šå¿«é€’å‘˜ç«¯çš„é‰´æƒä¸ç®¡ç†ç«¯çš„é‰´æƒç±»ä¼¼ï¼Œåªæ˜¯è§’è‰²idä¸åŒã€‚å¦‚æœæƒ³è¦é€šè¿‡Appè¿›è¡Œç™»å½•æµ‹è¯•ï¼Œè¯·å‚è€ƒ<a href="https://www.yuque.com/zhangzhijun-91vgw/xze2gr/rhyie35xipdqk9dg" target="_blank" rel="noreferrer">å‰ç«¯éƒ¨ç½²æ–‡æ¡£</a>ã€‚</p><h3 id="ç»ƒä¹ äºŒ-å¸æœºç«¯çš„é‰´æƒ" tabindex="-1">ç»ƒä¹ äºŒï¼šå¸æœºç«¯çš„é‰´æƒ <a class="header-anchor" href="#ç»ƒä¹ äºŒ-å¸æœºç«¯çš„é‰´æƒ" aria-label="Permalink to &quot;ç»ƒä¹ äºŒï¼šå¸æœºç«¯çš„é‰´æƒ&quot;">â€‹</a></h3><p>éš¾åº¦ç³»æ•°ï¼šâ˜…â˜†â˜†â˜†â˜†</p><p>æç¤ºï¼šå¸æœºç«¯çš„é‰´æƒä¸ç®¡ç†ç«¯çš„é‰´æƒç±»ä¼¼ï¼Œåªæ˜¯è§’è‰²idä¸åŒã€‚å¦‚æœæƒ³è¦é€šè¿‡Appè¿›è¡Œç™»å½•æµ‹è¯•ï¼Œè¯·å‚è€ƒ<a href="https://www.yuque.com/zhangzhijun-91vgw/xze2gr/rhyie35xipdqk9dg" target="_blank" rel="noreferrer">å‰ç«¯éƒ¨ç½²æ–‡æ¡£</a>ã€‚</p><h2 id="è¯¾ç¨‹å®‰æ’-1" tabindex="-1">è¯¾ç¨‹å®‰æ’ <a class="header-anchor" href="#è¯¾ç¨‹å®‰æ’-1" aria-label="Permalink to &quot;è¯¾ç¨‹å®‰æ’&quot;">â€‹</a></h2><ul><li>å•tokenå­˜åœ¨çš„é—®é¢˜</li><li>åŒtokenä¸‰éªŒè¯</li><li>ç”¨æˆ·ç«¯tokenæ ¡éªŒä¸é‰´æƒ</li></ul><p><img src="'+_s+'" alt="w.gif" loading="lazy"></p><h2 id="ç½‘å…³åŠŸèƒ½" tabindex="-1">ç½‘å…³åŠŸèƒ½ <a class="header-anchor" href="#ç½‘å…³åŠŸèƒ½" aria-label="Permalink to &quot;ç½‘å…³åŠŸèƒ½&quot;">â€‹</a></h2><h3 id="å•tokenå­˜åœ¨çš„é—®é¢˜" tabindex="-1">å•tokenå­˜åœ¨çš„é—®é¢˜ <a class="header-anchor" href="#å•tokenå­˜åœ¨çš„é—®é¢˜" aria-label="Permalink to &quot;å•tokenå­˜åœ¨çš„é—®é¢˜&quot;">â€‹</a></h3><p>åœ¨å¸æœºç«¯ã€å¿«é€’å‘˜ç«¯å’Œç®¡ç†ç®¡ï¼Œç™»å½•æˆåŠŸåä¼šç”Ÿæˆjwtçš„tokenï¼Œå‰ç«¯å°†æ­¤tokenä¿å­˜èµ·æ¥ï¼Œå½“è¯·æ±‚åç«¯æœåŠ¡æ—¶ï¼Œåœ¨è¯·æ±‚å¤´ä¸­æºå¸¦æ­¤tokenï¼ŒæœåŠ¡ç«¯éœ€è¦å¯¹tokenè¿›è¡Œæ ¡éªŒä»¥åŠé‰´æƒæ“ä½œï¼Œè¿™ç§æ¨¡å¼å°±æ˜¯ã€å•tokenæ¨¡å¼ã€‘ã€‚ è¯¥æ¨¡å¼å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ å…¶å®æ˜¯æœ‰é—®é¢˜çš„ï¼Œä¸»è¦æ˜¯tokenæœ‰æ•ˆæœŸè®¾ç½®é•¿çŸ­çš„é—®é¢˜ï¼Œå¦‚æœè®¾ç½®çš„æ¯”è¾ƒçŸ­ï¼Œç”¨æˆ·ä¼šé¢‘ç¹çš„ç™»å½•ï¼Œå¦‚æœè®¾ç½®çš„æ¯”è¾ƒé•¿ï¼Œä¼šä¸å¤ªå®‰å…¨ï¼Œå› ä¸ºtokenä¸€æ—¦è¢«é»‘å®¢æˆªå–çš„è¯ï¼Œå°±å¯ä»¥é€šè¿‡æ­¤tokenä¸æœåŠ¡ç«¯è¿›è¡Œäº¤äº’äº†ã€‚ å¦å¤–ä¸€æ–¹é¢ï¼Œtokenæ˜¯æ— çŠ¶æ€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡ç«¯ä¸€æ—¦é¢å‘äº†tokenå°±æ— æ³•è®©å…¶å¤±æ•ˆï¼ˆé™¤éè¿‡äº†æœ‰æ•ˆæœŸï¼‰ï¼Œè¿™æ ·çš„è¯ï¼Œå¦‚æœæˆ‘ä»¬æ£€æµ‹åˆ°tokenå¼‚å¸¸ä¹Ÿæ— æ³•ä½¿å…¶å¤±æ•ˆï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯æ— çŠ¶æ€tokenå­˜åœ¨çš„é—®é¢˜ã€‚ ä¸ºäº†è§£å†³æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬å°†é‡‡ç”¨ã€åŒtokenä¸‰éªŒè¯ã€‘çš„è§£å†³æ–¹æ¡ˆæ¥è§£å†³æ­¤é—®é¢˜ã€‚</p><h3 id="åŒtokenä¸‰éªŒè¯" tabindex="-1">åŒtokenä¸‰éªŒè¯ <a class="header-anchor" href="#åŒtokenä¸‰éªŒè¯" aria-label="Permalink to &quot;åŒtokenä¸‰éªŒè¯&quot;">â€‹</a></h3><p>ä¸ºäº†è§£å†³å•tokenæ¨¡å¼ä¸‹å­˜åœ¨çš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ã€åŒtokenä¸‰éªŒè¯ã€‘çš„æ¨¡å¼è¿›è¡Œæ”¹è¿›å®ç°ï¼Œä¸»è¦è§£å†³çš„ä¸¤ä¸ªé—®é¢˜å¦‚ä¸‹ï¼š</p><ul><li>tokenæœ‰æ•ˆæœŸé•¿ä¸å®‰å…¨ <ul><li>ç™»å½•æˆåŠŸåï¼Œç”Ÿæˆ2ä¸ªtokenï¼Œåˆ†åˆ«æ˜¯ï¼šaccess_tokenã€refresh_tokenï¼Œå‰è€…æœ‰æ•ˆæœŸçŸ­ï¼ˆå¦‚ï¼š5åˆ†é’Ÿï¼‰ï¼Œåè€…çš„æœ‰æ•ˆæœŸé•¿ï¼ˆå¦‚ï¼š24å°æ—¶ï¼‰</li><li>æ­£å¸¸è¯·æ±‚åç«¯æœåŠ¡æ—¶ï¼Œæºå¸¦access_tokenï¼Œå¦‚æœå‘ç°access_tokenå¤±æ•ˆï¼Œå°±é€šè¿‡refresh_tokenåˆ°åå°æœåŠ¡ä¸­æ¢å–æ–°çš„access_tokenå’Œrefresh_tokenï¼Œè¿™ä¸ªå¯ä»¥ç†è§£ä¸ºtokençš„ç»­ç­¾</li><li>ä»¥æ­¤å¾€å¤ï¼Œç›´è‡³refresh_tokenè¿‡æœŸï¼Œéœ€è¦ç”¨æˆ·é‡æ–°ç™»å½•</li></ul></li><li>tokençš„æ— çŠ¶æ€æ€§ <ul><li>ä¸ºäº†ä½¿tokenæœ‰çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯åç«¯å¯ä»¥æ§åˆ¶å…¶æå‰å¤±æ•ˆï¼Œéœ€è¦å°†refresh_tokenè®¾è®¡æˆåªèƒ½<strong>ä½¿ç”¨ä¸€æ¬¡</strong></li><li>éœ€è¦å°†refresh_tokenå­˜å‚¨åˆ°redisä¸­ï¼Œå¹¶ä¸”è¦è®¾ç½®è¿‡æœŸæ—¶é—´</li><li>è¿™æ ·çš„è¯ï¼ŒæœåŠ¡ç«¯å¦‚æœæ£€æµ‹åˆ°ç”¨æˆ·tokenæœ‰å®‰å…¨éšæ‚£ï¼ˆå¦‚ï¼šå¼‚åœ°ç™»å½•ï¼‰ï¼Œåªéœ€è¦å°†refresh_tokenå¤±æ•ˆå³å¯</li></ul></li></ul><p>è¯¦ç»†æµç¨‹å¦‚ä¸‹ï¼š <img src="'+Ts+'" alt="" loading="lazy"></p><h3 id="ç”¨æˆ·ç«¯tokenæ ¡éªŒä¸é‰´æƒ" tabindex="-1">ç”¨æˆ·ç«¯tokenæ ¡éªŒä¸é‰´æƒ <a class="header-anchor" href="#ç”¨æˆ·ç«¯tokenæ ¡éªŒä¸é‰´æƒ" aria-label="Permalink to &quot;ç”¨æˆ·ç«¯tokenæ ¡éªŒä¸é‰´æƒ&quot;">â€‹</a></h3><p>å®¢æˆ·ç«¯çš„tokenæ˜¯é‡‡ç”¨äº†ã€åŒtokenä¸‰éªŒè¯ã€‘è§£å†³æ–¹æ¡ˆæ¥å®ç°çš„ã€‚</p><h4 id="å¾®ä¿¡å°ç¨‹åºç™»å½•æµç¨‹" tabindex="-1">å¾®ä¿¡å°ç¨‹åºç™»å½•æµç¨‹ <a class="header-anchor" href="#å¾®ä¿¡å°ç¨‹åºç™»å½•æµç¨‹" aria-label="Permalink to &quot;å¾®ä¿¡å°ç¨‹åºç™»å½•æµç¨‹&quot;">â€‹</a></h4><p>é¦–å…ˆå‚è€ƒ<a href="https://www.yuque.com/zhangzhijun-91vgw/xze2gr/rhyie35xipdqk9dg" target="_blank" rel="noreferrer">å‰ç«¯éƒ¨ç½²æ–‡æ¡£</a> ä¸­çš„ç”¨æˆ·ç«¯éƒ¨ç½²æ­¥éª¤è¿›è¡Œéƒ¨ç½²ã€‚ ç”¨æˆ·ç«¯æ˜¯é‡‡ç”¨å¾®ä¿¡å°ç¨‹åºå¼€å‘çš„ï¼Œæ‰€ä»¥éœ€è¦æ•´åˆå°ç¨‹åºçš„ç™»å½•ï¼Œå…·ä½“çš„ç™»å½•æµç¨‹å¦‚ä¸‹ï¼š <img src="'+Ss+'" alt="" loading="lazy"> æ›´å¤šå†…å®¹å‚è€ƒå¾®ä¿¡å°ç¨‹åºå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html" target="_blank" rel="noreferrer">ç‚¹å‡»æŸ¥çœ‹</a></p><h4 id="åŸºæœ¬æµç¨‹" tabindex="-1">åŸºæœ¬æµç¨‹ <a class="header-anchor" href="#åŸºæœ¬æµç¨‹" aria-label="Permalink to &quot;åŸºæœ¬æµç¨‹&quot;">â€‹</a></h4><p><img src="'+Os+'" alt="" loading="lazy">### é˜…è¯»ä»£ç  åœ¨<code>sl-express-gateway</code>ä¸­å°†ç”¨æˆ·ç«¯çš„ç™»å½•å’Œåˆ·æ–°tokenåœ°å€è®¾ç½®åˆ°ç™½åå•ä¸­ï¼š <img src="'+js+`" alt="image.png" loading="lazy"></p><h5 id="ç™»å½•" tabindex="-1">ç™»å½• <a class="header-anchor" href="#ç™»å½•" aria-label="Permalink to &quot;ç™»å½•&quot;">â€‹</a></h5><p>åœ¨ç™»å½•æ¥å£ä¸­æ¥æ”¶<code>com.sl.ms.web.customer.vo.user.UserLoginRequestVO</code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­åŒ…å«äº†ã€ç™»å½•ä¸´æ—¶å‡­è¯ã€‘å’Œã€æ‰‹æœºå·ä¸´æ—¶å‡­è¯ã€‘ï¼Œå…¶ä¸­ã€æ‰‹æœºå·ä¸´æ—¶å‡­è¯ã€‘æ˜¯ç”¨äºç”¨æˆ·æˆæƒè·å–æ‰‹æœºå·çš„å‡­è¯ï¼Œå¦åˆ™è·å–ä¸åˆ°æ‰‹æœºå·ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * Cç«¯ç”¨æˆ·ç™»å½•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Data</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserLoginRequestVO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ApiModelProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç™»å½•ä¸´æ—¶å‡­è¯&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String code;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ApiModelProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ‰‹æœºå·ä¸´æ—¶å‡­è¯&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String phoneCode;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Controlleræ–¹æ³•å®šä¹‰å¦‚ä¸‹ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * Cç«¯ç”¨æˆ·ç™»å½•--å¾®ä¿¡ç™»å½•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> userLoginRequestVO</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ç”¨æˆ·ç™»å½•ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ç™»å½•ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PostMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/login&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ApiOperation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç™»å½•&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> R</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UserLoginVO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestBody</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserLoginRequestVO userLoginRequestVO) throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        UserLoginVO login </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> memberService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userLoginRequestVO);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> R.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(login);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>åœ¨MemberServiceImplå®ç°ç±»ä¸­ï¼Œä¸»è¦å®Œå¯¹äºç™»å½•ä¸šåŠ¡çš„å®ç°ï¼Œé¦–å…ˆæ ¹æ®ã€ç™»å½•ä¸´æ—¶å‡­è¯ã€‘é€šè¿‡å¾®ä¿¡å¼€æ”¾å¹³å°æ¥å£è¿›è¡ŒæŸ¥è¯¢ï¼Œå¦‚æœç”¨æˆ·ä¸å­˜åœ¨å°±éœ€è¦é€šè¿‡ã€æ‰‹æœºå·ä¸´æ—¶å‡­è¯ã€‘æŸ¥è¯¢æ‰‹æœºå·ï¼Œå®Œæˆç”¨æˆ·æ³¨å†Œã€‚ æœ€ç»ˆé€šè¿‡<code>com.sl.ms.web.customer.service.TokenService</code>ç”Ÿæˆtokenï¼Œåˆ†åˆ«ç”Ÿæˆäº†é•¿çŸ­ä»¤ç‰Œã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * ç™»å½•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> userLoginRequestVO</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ç™»å½•code</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ç”¨æˆ·ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserLoginVO </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(UserLoginRequestVO userLoginRequestVO) throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1 è°ƒç”¨å¾®ä¿¡å¼€æ”¾å¹³å°å°ç¨‹åºçš„apiï¼Œæ ¹æ®codeè·å–openid</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        JSONObject jsonObject </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> wechatService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getOpenid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userLoginRequestVO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2 è‹¥codeä¸æ­£ç¡®ï¼Œåˆ™è·å–ä¸åˆ°openidï¼Œå“åº”å¤±è´¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isNotEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(jsonObject.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;errcode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SLWebException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(jsonObject.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;errmsg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String openid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsonObject.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;openid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        * 3 æ ¹æ®openidä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        * 3.1 å¦‚æœä¸ºæ–°ç”¨æˆ·ï¼Œæ­¤å¤„è¿”å›ä¸ºnull</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        * 3.2 å¦‚æœä¸ºå·²ç»ç™»å½•è¿‡çš„è€ç”¨æˆ·ï¼Œæ­¤å¤„è¿”å›ä¸ºuserå¯¹è±¡ ï¼ˆåŒ…å«openId,phone,unionIdç­‰å­—æ®µï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        MemberDTO user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getByOpenid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(openid);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 4 æ„é€ ç”¨æˆ·æ•°æ®ï¼Œè®¾ç½®openId,unionId</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 4.1 å¦‚æœuserä¸ºnullï¼Œåˆ™ä¸ºæ–°ç”¨æˆ·ï¼Œéœ€è¦æ„å»ºæ–°çš„userå¯¹è±¡ï¼Œå¹¶è®¾ç½®openId,unionId</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 4.2 å¦‚æœuserä¸ä¸ºnullï¼Œåˆ™ä¸ºè€ç”¨æˆ·ï¼Œæ— éœ€è®¾ç½®openId,unionId</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isNotEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MemberDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">builder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // openId</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(openid)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // å¹³å°å”¯ä¸€ID</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">authId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(jsonObject.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;unionid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 5 è°ƒç”¨å¾®ä¿¡å¼€æ”¾å¹³å°å°ç¨‹åºçš„apiè·å–å¾®ä¿¡ç»‘å®šçš„æ‰‹æœºå·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String phone </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> wechatService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPhone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userLoginRequestVO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPhoneCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 6 æ–°ç”¨æˆ·ç»‘å®šæ‰‹æœºå·æˆ–è€…è€ç”¨æˆ·æ›´æ–°æ‰‹æœºå·</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 6.1 å¦‚æœuser.getPhone()ä¸ºnullï¼Œåˆ™ä¸ºæ–°ç”¨æˆ·ï¼Œéœ€è¦è®¾ç½®æ‰‹æœºå·ï¼Œå¹¶ä¿å­˜æ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 6.2 å¦‚æœuser.getPhone()ä¸ä¸ºnullï¼Œä½†æ˜¯ä¸å¾®ä¿¡è·å–åˆ°çš„æ‰‹æœºå·ä¸ä¸€æ · åˆ™è¡¨ç¤ºç”¨æˆ·æ”¹äº†å¾®ä¿¡ç»‘å®šçš„æ‰‹æœºå·ï¼Œéœ€è¦è®¾ç½®æ‰‹æœºå·ï¼Œå¹¶ä¿å­˜æ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * ä»¥ä¸Šä¿©ç§æƒ…å†µï¼Œéƒ½éœ€è¦é‡æ–°è®¾ç½®æ‰‹æœºå·ï¼Œå¹¶ä¿å­˜æ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">notEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPhone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), phone)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPhone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phone);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 7 å¦‚æœä¸ºæ–°ç”¨æˆ·ï¼ŒæŸ¥è¯¢æ•°æ®åº“è·å–ç”¨æˆ·ID</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getByOpenid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(openid);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 8 å°†ç”¨æˆ·IDå­˜å…¥token</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; claims </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MapUtil.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String, Object</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">builder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Constants.GATEWAY.USER_ID, user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 9 å°è£…ç”¨æˆ·ä¿¡æ¯å’ŒåŒtokenï¼Œå“åº”ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserLoginVO</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">builder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(openid)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">accessToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tokenService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createAccessToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(claims))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">refreshToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tokenService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createRefreshToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(claims))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">binding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(StatusEnum.NORMAL.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><h5 id="tokenservice" tabindex="-1">TokenService <a class="header-anchor" href="#tokenservice" aria-label="Permalink to &quot;TokenService&quot;">â€‹</a></h5><p>åœ¨TokenServiceä¸­å®šä¹‰äº†3ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>åˆ›å»ºAccessTokenï¼ŒçŸ­ä»¤ç‰Œæ—¶é—´å•ä½ä¸ºåˆ†é’Ÿ</li><li>åˆ›å»ºRefreshTokenï¼Œé•¿ä»¤ç‰Œæ—¶é—´å•ä½ä¸ºå°æ—¶ï¼Œéœ€è¦å°†refreshTokenè½¬md5åå­˜å‚¨åˆ°redisä¸­ï¼Œå˜æˆæœ‰çŠ¶æ€çš„token</li><li>åˆ·æ–°token <ul><li>æ ¡éªŒtokençš„æœ‰æ•ˆæ€§</li><li>æ ¡éªŒredisä¸­æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨è¯´æ˜å¤±æ•ˆæˆ–å·²ç»ä½¿ç”¨è¿‡</li><li>æ ¡éªŒé€šè¿‡åï¼Œéœ€è¦å°†åŸtokenåˆ é™¤</li><li>é‡æ–°ç”Ÿæˆé•¿çŸ­ä»¤ç‰Œ</li></ul></li></ul><p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.web.customer.service.impl;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cn.hutool.core.date.DateField;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cn.hutool.core.util.StrUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cn.hutool.crypto.SecureUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.web.customer.properties.JwtProperties;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.web.customer.service.TokenService;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.ms.web.customer.vo.user.UserLoginVO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.transport.common.util.JwtUtils;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.sl.transport.common.util.ObjectUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.data.redis.core.StringRedisTemplate;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Service;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.annotation.Resource;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.time.Duration;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.Map;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Service</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TokenServiceImpl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TokenService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JwtProperties jwtProperties;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StringRedisTemplate stringRedisTemplate;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String REDIS_REFRESH_TOKEN_PREFIX </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;SL_CUSTOMER_REFRESH_TOKEN_&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createAccessToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">claims</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //ç”ŸæˆçŸ­ä»¤ç‰Œçš„æœ‰æ•ˆæœŸæ—¶é—´å•ä½ä¸ºï¼šåˆ†é’Ÿ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JwtUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(claims, jwtProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPrivateKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), jwtProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAccessTtl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                DateField.MINUTE);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createRefreshToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">claims</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //ç”Ÿæˆé•¿ä»¤ç‰Œçš„æœ‰æ•ˆæœŸæ—¶é—´å•ä½ä¸ºï¼šå°æ—¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Integer ttl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jwtProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRefreshTtl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String refreshToken </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JwtUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(claims, jwtProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPrivateKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), ttl);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //é•¿ä»¤ç‰Œåªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œéœ€è¦å°†å…¶å­˜å‚¨åˆ°redisä¸­ï¼Œå˜æˆæœ‰çŠ¶æ€çš„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String redisKey </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRedisRefreshToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(refreshToken);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.stringRedisTemplate.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">opsForValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(redisKey, refreshToken, Duration.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ofHours</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ttl));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> refreshToken;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserLoginVO </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">refreshToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">refreshToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (StrUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(refreshToken)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; originClaims </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JwtUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(refreshToken, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.jwtProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPublicKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(originClaims)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //tokenæ— æ•ˆ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //é€šè¿‡redisæ ¡éªŒï¼ŒåŸtokenæ˜¯å¦ä½¿ç”¨è¿‡ï¼Œæ¥ç¡®ä¿tokenåªèƒ½ä½¿ç”¨ä¸€æ¬¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String redisKey </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRedisRefreshToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(refreshToken);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Boolean bool </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.stringRedisTemplate.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(redisKey);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">notEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(bool, Boolean.TRUE)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //åŸtokenè¿‡æœŸæˆ–å·²ç»ä½¿ç”¨è¿‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //åˆ é™¤åŸtoken</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.stringRedisTemplate.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(redisKey);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //é‡æ–°ç”Ÿæˆé•¿çŸ­ä»¤ç‰Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String newRefreshToken </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createRefreshToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(originClaims);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String accessToken </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createAccessToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(originClaims);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserLoginVO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">builder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">accessToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(accessToken)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">refreshToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newRefreshToken)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRedisRefreshToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">refreshToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //md5æ˜¯ä¸ºäº†ç¼©çŸ­keyçš„é•¿åº¦</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> REDIS_REFRESH_TOKEN_PREFIX </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SecureUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">md5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(refreshToken);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ç”Ÿæˆtokenä½¿ç”¨çš„ç§é’¥é…ç½®åœ¨nacosä¸­ï¼š <img src="`+Ps+`" alt="image.png" loading="lazy"></p><h5 id="åˆ·æ–°token" tabindex="-1">åˆ·æ–°token <a class="header-anchor" href="#åˆ·æ–°token" aria-label="Permalink to &quot;åˆ·æ–°token&quot;">â€‹</a></h5><p>åˆ·æ–°tokenæ¥æ”¶è¯·æ±‚å¤´ä¸­çš„<code>refresh_token</code>å‚æ•°ï¼Œç”¨æ­¤å‚æ•°æ¥åˆ·æ–°æ–°çš„é•¿çŸ­ä»¤ç‰Œã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * åˆ·æ–°tokenï¼Œæ ¡éªŒè¯·æ±‚å¤´ä¸­çš„é•¿ä»¤ç‰Œï¼Œç”Ÿæˆæ–°çš„é•¿çŸ­ä»¤ç‰Œ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> refreshToken</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> åŸä»¤ç‰Œ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ç™»å½•ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PostMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/refresh&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ApiOperation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ·æ–°token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> R</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UserLoginVO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> refresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Constants.GATEWAY.REFRESH_TOKEN) String refreshToken) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        UserLoginVO loginVO </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> memberService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">refresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(refreshToken);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(loginVO)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> R.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ·æ–°tokenå¤±è´¥ï¼Œè¯·é‡æ–°ç™»å½•.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> R.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(loginVO);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserLoginVO </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">refresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String refreshToken) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tokenService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">refreshToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(refreshToken);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><h4 id="ç½‘å…³æ ¡éªŒ" tabindex="-1">ç½‘å…³æ ¡éªŒ <a class="header-anchor" href="#ç½‘å…³æ ¡éªŒ" aria-label="Permalink to &quot;ç½‘å…³æ ¡éªŒ&quot;">â€‹</a></h4><p>åœ¨ç½‘å…³ä¸­éœ€è¦é…ç½®æ ¡éªŒtokençš„å…¬é’¥ï¼ŒåŒæ ·ä¹Ÿæ˜¯é…ç½®åœ¨nacosä¸­ï¼š <img src="`+Rs+`" alt="image.png" loading="lazy"> æœ‰äº†å…¬é’¥å°±å¯ä»¥å¯¹tokençš„åˆæ³•æ€§è¿›è¡Œæ ¡éªŒäº†ï¼Œå…·ä½“çš„ä»£ç å®ç°ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AuthUserInfoDTO </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">check</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String token) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ™®é€šç”¨æˆ·çš„tokenæ²¡æœ‰å¯¹æ¥æƒé™ç³»ç»Ÿï¼Œéœ€è¦è‡ªå®šå®ç°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // é‰´æƒé€»è¾‘åœ¨ç”¨æˆ·ç«¯è‡ªè¡Œå®ç° ç½‘å…³ç»Ÿä¸€æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        log.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¼€å§‹è§£ætoken {}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, token);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; claims </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JwtUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token, jwtProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPublicKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ObjectUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(claims)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //tokenå¤±æ•ˆ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Long userId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MapUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(claims, Constants.GATEWAY.USER_ID, Long.class);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //tokenè§£ææˆåŠŸï¼Œæ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        AuthUserInfoDTO authUserInfoDTO </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AuthUserInfoDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        authUserInfoDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setUserId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authUserInfoDTO;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>å¯¹äºç”¨æˆ·ç«¯åªéœ€è¦æ ¡éªŒtokenå³å¯ï¼Œä¸éœ€è¦é‰´æƒã€‚</p><h4 id="æµ‹è¯•-3" tabindex="-1">æµ‹è¯• <a class="header-anchor" href="#æµ‹è¯•-3" aria-label="Permalink to &quot;æµ‹è¯•&quot;">â€‹</a></h4><p>åŸºäºå°ç¨‹åºè¿›è¡ŒåŠŸèƒ½æµ‹è¯•å³å¯ã€‚</p><h2 id="é¢è¯•è¿ç¯é—®" tabindex="-1">é¢è¯•è¿ç¯é—® <a class="header-anchor" href="#é¢è¯•è¿ç¯é—®" aria-label="Permalink to &quot;é¢è¯•è¿ç¯é—®&quot;">â€‹</a></h2><div class="info custom-block"><p class="custom-block-title">é¢è¯•å®˜é—®ï¼š</p><ul><li>ç®€å•ä»‹ç»ä¸‹ä½ åšçš„ç‰©æµé¡¹ç›®ã€‚</li><li>å¾®æœåŠ¡é¡¹ç›®å›¢é˜Ÿå¦‚ä½•åä½œï¼Ÿä½ ä»¬å¤šå°‘ä¸ªå°ç»„å¼€å‘ï¼Ÿ</li><li>é¡¹ç›®ä¸­æ˜¯å¦‚ä½•è¿›è¡ŒæŒç»­é›†æˆçš„ï¼Ÿæäº¤gitåå¦‚ä½•è‡ªåŠ¨è¿›è¡Œæ„å»ºï¼Ÿ</li><li>è¯´è¯´ç»Ÿä¸€ç½‘å…³ä¸­æ˜¯å¦‚ä½•è¿›è¡Œè®¤è¯ä¸é‰´æƒå·¥ä½œçš„ï¼Ÿåœ¨ç½‘å…³ä¸­å¦‚ä½•è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼Ÿ</li><li>é¡¹ç›®ä¸­çš„ç”¨æˆ·æƒé™æ˜¯å¦‚ä½•ç®¡ç†çš„ï¼Ÿå¦‚ä½•ä¸æƒé™ç®¡å®¶å¯¹æ¥ï¼Ÿ</li><li>åœ¨é¡¹ç›®ä¸­ï¼Œç”¨æˆ·ç™»å½•æˆåŠŸåçš„tokenä½ ä»¬æ˜¯æ€ä¹ˆç”Ÿæˆçš„ï¼Ÿæœ‰æ•ˆæœŸæ˜¯å¤šä¹…ï¼Ÿæœ‰è€ƒè™‘è¿‡åŒtokenæ¨¡å¼å—ï¼Ÿè°ˆè°ˆä½ çš„æƒ³æ³•ã€‚</li><li>å¦‚ä½•è®©tokenæå‰å¤±æ•ˆï¼Ÿ</li></ul></div>`,226);function Ms(s,Gs,Ns,Ls,Hs,Vs){const h=n("ArticleMetadata"),p=n("ClientOnly");return l(),k("div",null,[Is,r(p,null,{default:E(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(l(),y(h,{key:0,article:s.$frontmatter},null,8,["article"])):o("",!0)]}),_:1}),Us])}const Js=e(zs,[["render",Ms]]);export{Ks as __pageData,Js as default};
