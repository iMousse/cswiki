import{_ as r}from"./chunks/image-20230505092340431.oQwn9FOT.js";import{_ as d,E,c as g,m as s,J as n,w as i,a,b as p,a4 as t,V as e,o as l}from"./chunks/framework.syB9hai_.js";const y="/cswiki/assets/image-20230505083840046.jEt17eAg.png",c="/cswiki/assets/image-20230505084451193._rqsDp91.png",F="/cswiki/assets/image-20231226114150288.ebmr2_b-.png",o="/cswiki/assets/image-202309240024.0ac4zIfj.png",K=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"src/base/juc/juc-tool-locks.md","filePath":"src/base/juc/juc-tool-locks.md","lastUpdated":1730648753000}'),A={name:"src/base/juc/juc-tool-locks.md"},C=s("p",null,[s("a",{href:"./"},"返回首页")],-1),u={class:"table-of-contents"},D=s("a",{href:"#lock"},"Lock",-1),B={href:"#aqs原理"},b=s("ul",null,[s("li",null,[s("a",{href:"#实现不可重入锁"},"实现不可重入锁")]),s("li",null,[s("a",{href:"#原理"},"原理")])],-1),v=s("li",null,[s("a",{href:"#reentrantlock"},"ReentrantLock"),s("ul",null,[s("li",null,[s("a",{href:"#实现原理"},"实现原理")]),s("li",null,[s("a",{href:"#工作流程"},"工作流程")])])],-1),m=s("a",{href:"#reentrantreadwritelock"},"ReentrantReadWriteLock",-1),q={href:"#应用之缓存"},f=s("h2",{id:"lock",tabindex:"-1"},[a("Lock "),s("a",{class:"header-anchor",href:"#lock","aria-label":'Permalink to "Lock"'},"​")],-1),_={id:"aqs原理",tabindex:"-1"},S=s("a",{class:"header-anchor",href:"#aqs原理","aria-label":`Permalink to "<font color='blue'>*AQS原理</font>"`},"​",-1),w=e("",64),L=e("",54),j={id:"应用之缓存",tabindex:"-1"},x=s("a",{class:"header-anchor",href:"#应用之缓存","aria-label":`Permalink to "<font color='green'>* 应用之缓存</font>"`},"​",-1),T=s("h5",{id:"缓存更新策略",tabindex:"-1"},[a("缓存更新策略 "),s("a",{class:"header-anchor",href:"#缓存更新策略","aria-label":'Permalink to "缓存更新策略"'},"​")],-1),R=s("p",null,"更新时，是先清缓存还是先更新数据库",-1),O=s("p",null,[s("strong",null,"先清缓存")],-1),P=s("p",null,[s("strong",null,"先更新数据库")],-1),N=s("br",null,null,-1),Q=s("p",null,"补充一种情况，假设查询线程 A 查询数据时恰好缓存数据由于时间到期失效，或是第一次查询",-1),I=e("",7);function M(z,V,W,H,J,$){const h=E("font"),k=E("Mermaid");return l(),g("div",null,[C,s("nav",u,[s("ul",null,[s("li",null,[D,s("ul",null,[s("li",null,[s("a",B,[n(h,{color:"blue"},{default:i(()=>[a("*AQS原理")]),_:1})]),b]),v,s("li",null,[m,s("ul",null,[s("li",null,[s("a",q,[n(h,{color:"green"},{default:i(()=>[a("* 应用之缓存")]),_:1})])])])])])])])]),f,s("h3",_,[n(h,{color:"blue"},{default:i(()=>[a("*AQS原理")]),_:1}),a(),S]),w,(l(),p(t,null,{default:i(()=>[n(k,{id:"mermaid-415",class:"mermaid",graph:"graph%20%0A%09subgraph%20%E6%96%B0%E8%8A%82%E7%82%B9%0A%09head2(head)%20--%3E%20Dummy2%5BDummy%5D%0A%09tail2(tail)%20--%3E%20Node%5BNode%5D%0A%09Node%20--%3E%7Cprev%7C%20Dummy2%0A%09end%0A%09%0A%20%20subgraph%20%E5%88%9D%E5%A7%8B%0A%09head1(head)%20--%3E%20Dummy1%5BDummy%5D%0A%09tail1(tail)%20--%3E%20Dummy1%0A%09end%0A%09%20%20style%20Dummy1%20fill%3A%23f9f%2Cstroke%3A%23333%2Cstroke-width%3A4px%0A%20%20%20%20style%20Dummy2%20fill%3A%23f9f%2Cstroke%3A%23333%2Cstroke-width%3A4px%0A%20%20%20%20style%20Node%20fill%3A%23f9f%2Cstroke%3A%23333%2Cstroke-width%3A4px%0A%09%0A"})]),fallback:i(()=>[a(" Loading... ")]),_:1})),L,s("h4",j,[n(h,{color:"green"},{default:i(()=>[a("* 应用之缓存")]),_:1}),a(),x]),T,R,O,(l(),p(t,null,{default:i(()=>[n(k,{id:"mermaid-668",class:"mermaid",graph:"sequenceDiagram%0A%09participant%20t1%20as%20%E7%BA%BF%E7%A8%8B1%0A%09participant%20t2%20as%20%E7%BA%BF%E7%A8%8B2%0A%09participant%20redis%20as%20%E7%BC%93%E5%AD%98%0A%09participant%20db%20as%20%E6%95%B0%E6%8D%AE%E5%BA%93%0A%20%20t1%20-%3E%3E%20redis%3A%E6%B8%85%E9%99%A4%E7%BC%93%E5%AD%98%0A%20%20t2%20-%3E%3E%20db%3A%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%20x%20%3D%201%20%EF%BC%89%0A%20%20t2%20-%3E%3E%20redis%3A%E5%B0%86%E7%BB%93%E6%9E%9C%E6%94%BE%E5%85%A5%E7%BC%93%E5%AD%98%EF%BC%88%20x%20%3D%201%20%EF%BC%89%0A%20%20t1%20-%3E%3E%20db%3A%E5%B0%86%E6%96%B0%E6%95%B0%E6%8D%AE%E5%AD%98%E5%85%A5%E5%BA%93%EF%BC%88%20x%20%3D%202%20%EF%BC%89%0A%20%20t2%20-%3E%3E%20redis%3A%E5%90%8E%E7%BB%AD%E6%9F%A5%E5%88%B0%E7%BB%93%E6%9E%9C%E8%BF%98%E6%98%AF%E6%97%A7%E5%80%BC%EF%BC%88%20x%20%3D%201%20%EF%BC%89!!!%0A"})]),fallback:i(()=>[a(" Loading... ")]),_:1})),P,(l(),p(t,null,{default:i(()=>[n(k,{id:"mermaid-672",class:"mermaid",graph:"sequenceDiagram%0A%09participant%20t1%20as%20%E7%BA%BF%E7%A8%8B1%0A%09participant%20t2%20as%20%E7%BA%BF%E7%A8%8B2%0A%09participant%20redis%20as%20%E7%BC%93%E5%AD%98%0A%09participant%20db%20as%20%E6%95%B0%E6%8D%AE%E5%BA%93%0A%20%20t1%20-%3E%3E%20db%3A%E5%B0%86%E6%96%B0%E6%95%B0%E6%8D%AE%E5%AD%98%E5%85%A5%E5%BA%93%EF%BC%88%20x%20%3D%202%20)%0A%20%20t2%20-%3E%3E%20redis%3A%E6%9F%A5%E8%AF%A2%E7%BC%93%E5%AD%98%EF%BC%88%20x%20%3D%201%20%EF%BC%89%EF%BC%81%EF%BC%81%EF%BC%81%0A%20%20t1%20-%3E%3E%20redis%3A%E6%B8%85%E7%A9%BA%E7%BC%93%E5%AD%98%0A%20%20t2%20-%3E%3E%20db%3A%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%20x%20%3D%202%20%EF%BC%89%0A%20%20t2%20-%3E%3E%20redis%3A%E5%90%8E%E7%BB%AD%E6%9F%A5%E5%88%B0%E5%8F%AF%E4%BB%A5%E5%BE%97%E5%88%B0%E6%96%B0%E5%80%BC%EF%BC%88%20x%20%3D%202%20%EF%BC%89%0A"})]),fallback:i(()=>[a(" Loading... ")]),_:1})),N,Q,(l(),p(t,null,{default:i(()=>[n(k,{id:"mermaid-677",class:"mermaid",graph:"sequenceDiagram%0A%09participant%20t1%20as%20%E7%BA%BF%E7%A8%8B1%0A%09participant%20t2%20as%20%E7%BA%BF%E7%A8%8B2%0A%09participant%20redis%20as%20%E7%BC%93%E5%AD%98%0A%09participant%20db%20as%20%E6%95%B0%E6%8D%AE%E5%BA%93%0A%20%20t2%20-%3E%3E%20db%3A%E7%BC%93%E5%AD%98%E6%B2%A1%E6%9C%89%EF%BC%8C%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%20x%20%3D%201%20%EF%BC%89%0A%20%20t1%20-%3E%3E%20db%3A%E5%B0%86%E6%95%B0%E6%8D%AE%E5%AD%98%E5%85%A5%E5%BA%93%EF%BC%88%20x%20%3D%202%20%EF%BC%89%0A%20%20t1%20-%3E%3E%20redis%3A%E6%B8%85%E7%A9%BA%E7%BC%93%E5%AD%98%0A%20%20t2%20-%3E%3E%20redis%3A%E5%B0%86%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%94%BE%E5%85%A5%E7%BC%93%E5%AD%98%EF%BC%88%20x%20%3D%201%20%EF%BC%89%0A%20%20t2%20-%3E%3E%20redis%3A%E5%90%8E%E7%BB%AD%E6%9F%A5%E5%88%B0%E7%BB%93%E6%9E%9C%E8%BF%98%E6%98%AF%E6%97%A7%E5%80%BC%EF%BC%88%20x%20%3D%201%20%EF%BC%89!!!%0A"})]),fallback:i(()=>[a(" Loading... ")]),_:1})),I])}const X=d(A,[["render",M]]);export{K as __pageData,X as default};
